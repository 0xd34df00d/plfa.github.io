---
src       : "src/plfa/part2/Subtyping.lagda.md"
title     : "Subtyping: records"
layout    : page
prev      : /More/
permalink : /Subtyping/
next      : /Bisimulation/
---

{% raw %}<pre class="Agda"><a id="134" class="Keyword">module</a> <a id="141" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}" class="Module">plfa.part2.Subtyping</a> <a id="162" class="Keyword">where</a>
</pre>{% endraw %}
This chapter introduces *subtyping*, a concept that plays an important
role in object-oriented languages. Subtyping enables code to be more
reusable by allowing it to work on objects of many different
types. Thus, subtyping provides a kind of polymorphism. In general, a
type `A` can be a subtype of another type `B`, written `A <: B`, when
an object of type `A` has all the capabilities expected of something
of type `B`. Or put another way, a type `A` can be a subtype of type
`B` when it is safe to substitute something of type `A` into code that
is expected something of type `B`.  This is know as the *Liskov
Substitution Principle*. Given this semantic meaning of subtyping, a
subtype relation should always be reflexive and transitive. Given a
subtype relation `A <: B`, we refer to `B` as the supertype of `A`.

To formulate a type system for a language with subtyping, one simply
adds the *subsumption rule*, which states that a term of type `A`
can also have type `B` if `A` is a subtype of `B`.

    ⊢<: : ∀{Γ M A B}
      → Γ ⊢ M ⦂ A  →  A <: B
        --------------------
      → Γ ⊢ M ⦂ B

In this chapter we study subtyping in the relatively simple context of
records and record types.  A *record* is a grouping of named values,
called *fields*. For example, one could represent a point on the
Cartesian plane with the following record.

    { x = 4, y = 1 }

A *record type* gives a type for each field. In the following, we
specify that the fields `x` and `y` both have type `ℕ`.

    { x : `ℕ,  y : `ℕ }

One record type is a subtype of another if it has all of the fields of
the supertype and if the types of those fields are subtypes of the
corresponding fields in the supertype. So, for example, a point in
three dimensions is a subtype of a point in two dimensions.

    { x : `ℕ,  y : `ℕ, z : `ℕ } <: { x : `ℕ,  y : `ℕ }

The elimination form for records is field access (aka. projection),
written `M # l`, and whose dynamic semantics is defined by the
following reduction rule, which says that accessing the field `lⱼ`
returns the value stored at that field.

    {l₁=v₁, ..., lⱼ=vⱼ, ..., lᵢ=vᵢ} # lⱼ —→  vⱼ 

In this chapter we add records and record types to the simply typed
lambda calculus (STLC) and prove type safety. It is instructive to see
how the proof of type safety changes to handle subtyping.  Also, the
presence of subtyping makes the choice between extrinsic and intrinsic
typing more interesting by. If we wish to include the subsumption
rule, then we cannot use intrinsically typed terms, as intrinsic terms
only allow for syntax-directed rules, and subsumption is not syntax
directed.  A standard alternative to the subsumption rule is to
instead use subtyping in the typing rules for the elimination forms,
an approach called algorithmic typing. Here we choose to include the
subsumption rule and extrinsic typing, but we give an exercise at the
end of the chapter so the reader can explore algorithmic typing with
intrinsic terms.


## Imports

{% raw %}<pre class="Agda"><a id="3168" class="Keyword">open</a> <a id="3173" class="Keyword">import</a> <a id="3180" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html" class="Module">Data.Empty</a> <a id="3191" class="Keyword">using</a> <a id="3197" class="Symbol">(</a><a id="3198" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#279" class="Datatype">⊥</a><a id="3199" class="Symbol">;</a> <a id="3201" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a><a id="3207" class="Symbol">)</a>
<a id="3209" class="Keyword">open</a> <a id="3214" class="Keyword">import</a> <a id="3221" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.Irrelevant.html" class="Module">Data.Empty.Irrelevant</a> <a id="3243" class="Keyword">renaming</a> <a id="3252" class="Symbol">(</a><a id="3253" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.Irrelevant.html#327" class="Function">⊥-elim</a> <a id="3260" class="Symbol">to</a> <a id="3263" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.Irrelevant.html#327" class="Function">⊥-elimi</a><a id="3270" class="Symbol">)</a>
<a id="3272" class="Keyword">open</a> <a id="3277" class="Keyword">import</a> <a id="3284" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.html" class="Module">Data.Fin</a> <a id="3293" class="Keyword">using</a> <a id="3299" class="Symbol">(</a><a id="3300" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1000" class="Datatype">Fin</a><a id="3303" class="Symbol">;</a> <a id="3305" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1022" class="InductiveConstructor">zero</a><a id="3309" class="Symbol">;</a> <a id="3311" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1053" class="InductiveConstructor">suc</a><a id="3314" class="Symbol">)</a>
<a id="3316" class="Keyword">open</a> <a id="3321" class="Keyword">import</a> <a id="3328" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.html" class="Module">Data.Nat</a> <a id="3337" class="Keyword">using</a> <a id="3343" class="Symbol">(</a><a id="3344" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="3345" class="Symbol">;</a> <a id="3347" href="Agda.Builtin.Nat.html#183" class="InductiveConstructor">zero</a><a id="3351" class="Symbol">;</a> <a id="3353" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a><a id="3356" class="Symbol">;</a> <a id="3358" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#895" class="Datatype Operator">_≤_</a><a id="3361" class="Symbol">;</a> <a id="3363" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#918" class="InductiveConstructor">z≤n</a><a id="3366" class="Symbol">;</a> <a id="3368" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#960" class="InductiveConstructor">s≤s</a><a id="3371" class="Symbol">;</a> <a id="3373" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#1005" class="Function Operator">_&lt;_</a><a id="3376" class="Symbol">;</a> <a id="3378" href="Agda.Builtin.Nat.html#298" class="Primitive Operator">_+_</a><a id="3381" class="Symbol">)</a>
<a id="3383" class="Keyword">open</a> <a id="3388" class="Keyword">import</a> <a id="3395" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a>
    <a id="3419" class="Keyword">using</a> <a id="3425" class="Symbol">(</a><a id="3426" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#15115" class="Function">m+n≤o⇒m≤o</a><a id="3435" class="Symbol">;</a> <a id="3437" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#15250" class="Function">m+n≤o⇒n≤o</a><a id="3446" class="Symbol">;</a> <a id="3448" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#6284" class="Function">n≤0⇒n≡0</a><a id="3455" class="Symbol">;</a> <a id="3457" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#3355" class="Function">≤-pred</a><a id="3463" class="Symbol">;</a> <a id="3465" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#3632" class="Function">≤-refl</a><a id="3471" class="Symbol">;</a> <a id="3473" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#3815" class="Function">≤-trans</a><a id="3480" class="Symbol">;</a> <a id="3482" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#14955" class="Function">m≤m+n</a><a id="3487" class="Symbol">;</a> <a id="3489" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#59581" class="Function">n≤m+n</a><a id="3494" class="Symbol">)</a>
<a id="3496" class="Keyword">open</a> <a id="3501" class="Keyword">import</a> <a id="3508" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html" class="Module">Data.Product</a> <a id="3521" class="Keyword">using</a> <a id="3527" class="Symbol">(</a><a id="3528" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">_×_</a><a id="3531" class="Symbol">;</a> <a id="3533" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a><a id="3538" class="Symbol">;</a> <a id="3540" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a><a id="3545" class="Symbol">;</a> <a id="3547" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ-syntax</a><a id="3555" class="Symbol">)</a> <a id="3557" class="Keyword">renaming</a> <a id="3566" class="Symbol">(</a><a id="3567" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">_,_</a> <a id="3571" class="Symbol">to</a> <a id="3574" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="3579" class="Symbol">)</a>
<a id="3581" class="Keyword">open</a> <a id="3586" class="Keyword">import</a> <a id="3593" href="https://agda.github.io/agda-stdlib/v1.1/Data.String.html" class="Module">Data.String</a> <a id="3605" class="Keyword">using</a> <a id="3611" class="Symbol">(</a><a id="3612" href="Agda.Builtin.String.html#206" class="Postulate">String</a><a id="3618" class="Symbol">;</a> <a id="3620" href="https://agda.github.io/agda-stdlib/v1.1/Data.String.Properties.html#2569" class="Function Operator">_≟_</a><a id="3623" class="Symbol">)</a>
<a id="3625" class="Keyword">open</a> <a id="3630" class="Keyword">import</a> <a id="3637" href="https://agda.github.io/agda-stdlib/v1.1/Data.Unit.html" class="Module">Data.Unit</a> <a id="3647" class="Keyword">using</a> <a id="3653" class="Symbol">(</a><a id="3654" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a><a id="3655" class="Symbol">;</a> <a id="3657" href="Agda.Builtin.Unit.html#174" class="InductiveConstructor">tt</a><a id="3659" class="Symbol">)</a>
<a id="3661" class="Keyword">open</a> <a id="3666" class="Keyword">import</a> <a id="3673" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.html" class="Module">Data.Vec</a> <a id="3682" class="Keyword">using</a> <a id="3688" class="Symbol">(</a><a id="3689" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a><a id="3692" class="Symbol">;</a> <a id="3694" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a><a id="3696" class="Symbol">;</a> <a id="3698" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">_∷_</a><a id="3701" class="Symbol">;</a> <a id="3703" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a><a id="3709" class="Symbol">)</a>
<a id="3711" class="Keyword">open</a> <a id="3716" class="Keyword">import</a> <a id="3723" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Membership.Propositional.html" class="Module">Data.Vec.Membership.Propositional</a> <a id="3757" class="Keyword">using</a> <a id="3763" class="Symbol">(</a><a id="3764" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Membership.Setoid.html#824" class="Function Operator">_∈_</a><a id="3767" class="Symbol">)</a>
<a id="3769" class="Keyword">open</a> <a id="3774" class="Keyword">import</a> <a id="3781" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Membership.DecPropositional.html" class="Module">Data.Vec.Membership.DecPropositional</a> <a id="3818" href="https://agda.github.io/agda-stdlib/v1.1/Data.String.Properties.html#2569" class="Function Operator">_≟_</a> <a id="3822" class="Keyword">using</a> <a id="3828" class="Symbol">(</a>_∈?_<a id="3833" class="Symbol">)</a>
<a id="3835" class="Keyword">open</a> <a id="3840" class="Keyword">import</a> <a id="3847" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Membership.Propositional.Properties.html" class="Module">Data.Vec.Membership.Propositional.Properties</a> <a id="3892" class="Keyword">using</a> <a id="3898" class="Symbol">(</a><a id="3899" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Membership.Propositional.Properties.html#1165" class="Function">∈-lookup</a><a id="3907" class="Symbol">)</a>
<a id="3909" class="Keyword">open</a> <a id="3914" class="Keyword">import</a> <a id="3921" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Relation.Unary.Any.html" class="Module">Data.Vec.Relation.Unary.Any</a> <a id="3949" class="Keyword">using</a> <a id="3955" class="Symbol">(</a><a id="3956" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Relation.Unary.Any.html#991" class="InductiveConstructor">here</a><a id="3960" class="Symbol">;</a> <a id="3962" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Relation.Unary.Any.html#1058" class="InductiveConstructor">there</a><a id="3967" class="Symbol">)</a>
<a id="3969" class="Keyword">import</a> <a id="3976" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="4014" class="Symbol">as</a> <a id="4017" class="Module">Eq</a>
<a id="4020" class="Keyword">open</a> <a id="4025" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="4028" class="Keyword">using</a> <a id="4034" class="Symbol">(</a><a id="4035" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_≡_</a><a id="4038" class="Symbol">;</a> <a id="4040" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="4044" class="Symbol">;</a> <a id="4046" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a><a id="4049" class="Symbol">;</a> <a id="4051" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#984" class="Function">trans</a><a id="4056" class="Symbol">;</a> <a id="4058" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a><a id="4062" class="Symbol">)</a>
<a id="4064" class="Keyword">open</a> <a id="4069" class="Keyword">import</a> <a id="4076" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="4093" class="Keyword">using</a> <a id="4099" class="Symbol">(</a><a id="4100" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#605" class="Datatype">Dec</a><a id="4103" class="Symbol">;</a> <a id="4105" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a><a id="4108" class="Symbol">;</a> <a id="4110" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a><a id="4112" class="Symbol">;</a> <a id="4114" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬_</a><a id="4116" class="Symbol">)</a>
</pre>{% endraw %}
## Syntax

The syntax includes that of the STLC with a few additions regarding
records that we explain in the following sections.

{% raw %}<pre class="Agda"><a id="4258" class="Keyword">infixl</a> <a id="4265" class="Number">5</a> <a id="4267" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">_,_</a>
<a id="4271" class="Keyword">infix</a> <a id="4277" class="Number">4</a> <a id="4279" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7072" class="Function Operator">_⊆_</a>
<a id="4283" class="Keyword">infix</a> <a id="4289" class="Number">5</a> <a id="4291" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">_&lt;:_</a>
<a id="4296" class="Keyword">infix</a>  <a id="4303" class="Number">4</a> <a id="4305" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">_⊢_⦂_</a>
<a id="4311" class="Keyword">infix</a> <a id="4317" class="Number">4</a> <a id="4319" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">_⊢*_⦂_</a>
<a id="4326" class="Keyword">infix</a>  <a id="4333" class="Number">4</a> <a id="4335" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">_∋_⦂_</a>
<a id="4341" class="Keyword">infix</a>  <a id="4348" class="Number">4</a> <a id="4350" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">Canonical_⦂_</a>

<a id="4364" class="Keyword">infixr</a> <a id="4371" class="Number">7</a> <a id="4373" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">_⇒_</a>

<a id="4378" class="Keyword">infix</a>  <a id="4385" class="Number">5</a> <a id="4387" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17502" class="InductiveConstructor Operator">ƛ_</a>
<a id="4390" class="Keyword">infix</a>  <a id="4397" class="Number">5</a> <a id="4399" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17716" class="InductiveConstructor Operator">μ_</a>
<a id="4402" class="Keyword">infixl</a> <a id="4409" class="Number">7</a> <a id="4411" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17542" class="InductiveConstructor Operator">_·_</a>
<a id="4415" class="Keyword">infix</a>  <a id="4422" class="Number">8</a> <a id="4424" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17622" class="InductiveConstructor Operator">`suc_</a>
<a id="4430" class="Keyword">infix</a>  <a id="4437" class="Number">9</a> <a id="4439" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17464" class="InductiveConstructor Operator">`_</a>
<a id="4442" class="Keyword">infixl</a> <a id="4449" class="Number">7</a> <a id="4451" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17834" class="InductiveConstructor Operator">_#_</a>
<a id="4455" class="Keyword">infix</a> <a id="4461" class="Number">5</a> <a id="4463" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛_⦂_｝</a>
<a id="4469" class="Keyword">infix</a> <a id="4475" class="Number">5</a> <a id="4477" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｛_:=_｝</a>

<a id="4485" class="Keyword">infix</a> <a id="4491" class="Number">5</a> <a id="4493" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22656" class="Function Operator">_[_]</a>
<a id="4498" class="Keyword">infix</a> <a id="4504" class="Number">2</a> <a id="4506" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">_—→_</a>
</pre>{% endraw %}
## Record Fields and their Properties

We represent field names as strings.

{% raw %}<pre class="Agda"><a id="Name"></a><a id="4597" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="4602" class="Symbol">:</a> <a id="4604" class="PrimitiveType">Set</a>
<a id="4608" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="4613" class="Symbol">=</a> <a id="4615" href="Agda.Builtin.String.html#206" class="Postulate">String</a>
</pre>{% endraw %}
A record is traditionally written as follows

    { l₁ = M₁, ..., lᵢ = Mᵢ }
    
so a natural representation is a list of label-term pairs.
However, we find it more convenient to represent records as a pair of
vectors (Agda's `Vec` type), one vector of fields and one vector of terms:

    l₁, ..., lᵢ
    M₁, ..., Mᵢ
    
This representation has the advantage that the traditional subscript
notation `lᵢ` corresponds to indexing into a vector.

Likewise, a record type, traditionally written as

    { l₁ : A₁, ..., lᵢ : Aᵢ }

will be represented as a pair of vectors, one vector of fields and one
vector of types.

    l₁, ..., lᵢ
    A₁, ..., Aᵢ

The field names of a record type must be distinct, which we define as
follows.
{% raw %}<pre class="Agda"><a id="distinct"></a><a id="5360" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="5369" class="Symbol">:</a> <a id="5371" class="Symbol">∀{</a><a id="5373" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5373" class="Bound">A</a> <a id="5375" class="Symbol">:</a> <a id="5377" class="PrimitiveType">Set</a><a id="5380" class="Symbol">}{</a><a id="5382" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5382" class="Bound">n</a><a id="5383" class="Symbol">}</a> <a id="5385" class="Symbol">→</a> <a id="5387" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="5391" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5373" class="Bound">A</a> <a id="5393" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5382" class="Bound">n</a> <a id="5395" class="Symbol">→</a> <a id="5397" class="PrimitiveType">Set</a>
<a id="5401" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="5410" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a> <a id="5413" class="Symbol">=</a> <a id="5415" href="Agda.Builtin.Unit.html#137" class="Record">⊤</a>
<a id="5417" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="5426" class="Symbol">(</a><a id="5427" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5427" class="Bound">x</a> <a id="5429" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="5431" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5431" class="Bound">xs</a><a id="5433" class="Symbol">)</a> <a id="5435" class="Symbol">=</a> <a id="5437" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="5439" class="Symbol">(</a><a id="5440" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5427" class="Bound">x</a> <a id="5442" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Membership.Setoid.html#824" class="Function Operator">∈</a> <a id="5444" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5431" class="Bound">xs</a><a id="5446" class="Symbol">)</a> <a id="5448" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">×</a> <a id="5450" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="5459" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5431" class="Bound">xs</a>
</pre>{% endraw %}
For vectors of distinct elements, lookup is injective.
{% raw %}<pre class="Agda"><a id="distinct-lookup-inj"></a><a id="5526" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5526" class="Function">distinct-lookup-inj</a> <a id="5546" class="Symbol">:</a> <a id="5548" class="Symbol">∀</a> <a id="5550" class="Symbol">{</a><a id="5551" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5551" class="Bound">n</a><a id="5552" class="Symbol">}{</a><a id="5554" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5554" class="Bound">ls</a> <a id="5557" class="Symbol">:</a> <a id="5559" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="5563" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="5568" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5551" class="Bound">n</a><a id="5569" class="Symbol">}{</a><a id="5571" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5571" class="Bound">i</a> <a id="5573" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5573" class="Bound">j</a> <a id="5575" class="Symbol">:</a> <a id="5577" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1000" class="Datatype">Fin</a> <a id="5581" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5551" class="Bound">n</a><a id="5582" class="Symbol">}</a>
   <a id="5587" class="Symbol">→</a> <a id="5589" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="5598" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5554" class="Bound">ls</a>  <a id="5602" class="Symbol">→</a>  <a id="5605" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="5612" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5554" class="Bound">ls</a> <a id="5615" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5571" class="Bound">i</a> <a id="5617" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="5619" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="5626" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5554" class="Bound">ls</a> <a id="5629" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5573" class="Bound">j</a>
   <a id="5634" class="Symbol">→</a> <a id="5636" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5571" class="Bound">i</a> <a id="5638" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="5640" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5573" class="Bound">j</a>
<a id="5642" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5526" class="Function">distinct-lookup-inj</a> <a id="5662" class="Symbol">{</a><a id="5663" class="Argument">ls</a> <a id="5666" class="Symbol">=</a> <a id="5668" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5668" class="Bound">x</a> <a id="5670" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="5672" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5672" class="Bound">ls</a><a id="5674" class="Symbol">}</a> <a id="5676" class="Symbol">{</a><a id="5677" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1022" class="InductiveConstructor">zero</a><a id="5681" class="Symbol">}</a> <a id="5683" class="Symbol">{</a><a id="5684" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1022" class="InductiveConstructor">zero</a><a id="5688" class="Symbol">}</a> <a id="5690" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5692" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5692" class="Bound">x∉ls</a> <a id="5697" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5699" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5699" class="Bound">dls</a> <a id="5703" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="5705" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5705" class="Bound">lsij</a> <a id="5710" class="Symbol">=</a> <a id="5712" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="5717" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5526" class="Function">distinct-lookup-inj</a> <a id="5737" class="Symbol">{</a><a id="5738" class="Argument">ls</a> <a id="5741" class="Symbol">=</a> <a id="5743" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5743" class="Bound">x</a> <a id="5745" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="5747" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5747" class="Bound">ls</a><a id="5749" class="Symbol">}</a> <a id="5751" class="Symbol">{</a><a id="5752" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1022" class="InductiveConstructor">zero</a><a id="5756" class="Symbol">}</a> <a id="5758" class="Symbol">{</a><a id="5759" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1053" class="InductiveConstructor">suc</a> <a id="5763" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5763" class="Bound">j</a><a id="5764" class="Symbol">}</a> <a id="5766" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5768" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5768" class="Bound">x∉ls</a> <a id="5773" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5775" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5775" class="Bound">dls</a> <a id="5779" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="5781" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="5786" class="Symbol">=</a>
    <a id="5792" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a> <a id="5799" class="Symbol">(</a><a id="5800" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5768" class="Bound">x∉ls</a> <a id="5805" class="Symbol">(</a><a id="5806" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Membership.Propositional.Properties.html#1165" class="Function">∈-lookup</a> <a id="5815" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5763" class="Bound">j</a> <a id="5817" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5747" class="Bound">ls</a><a id="5819" class="Symbol">))</a>
<a id="5822" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5526" class="Function">distinct-lookup-inj</a> <a id="5842" class="Symbol">{</a><a id="5843" class="Argument">ls</a> <a id="5846" class="Symbol">=</a> <a id="5848" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5848" class="Bound">x</a> <a id="5850" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="5852" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5852" class="Bound">ls</a><a id="5854" class="Symbol">}</a> <a id="5856" class="Symbol">{</a><a id="5857" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1053" class="InductiveConstructor">suc</a> <a id="5861" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5861" class="Bound">i</a><a id="5862" class="Symbol">}</a> <a id="5864" class="Symbol">{</a><a id="5865" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1022" class="InductiveConstructor">zero</a><a id="5869" class="Symbol">}</a> <a id="5871" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5873" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5873" class="Bound">x∉ls</a> <a id="5878" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5880" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5880" class="Bound">dls</a> <a id="5884" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="5886" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="5891" class="Symbol">=</a>
    <a id="5897" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a> <a id="5904" class="Symbol">(</a><a id="5905" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5873" class="Bound">x∉ls</a> <a id="5910" class="Symbol">(</a><a id="5911" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Membership.Propositional.Properties.html#1165" class="Function">∈-lookup</a> <a id="5920" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5861" class="Bound">i</a> <a id="5922" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5852" class="Bound">ls</a><a id="5924" class="Symbol">))</a>
<a id="5927" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5526" class="Function">distinct-lookup-inj</a> <a id="5947" class="Symbol">{</a><a id="5948" class="Argument">ls</a> <a id="5951" class="Symbol">=</a> <a id="5953" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5953" class="Bound">x</a> <a id="5955" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="5957" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5957" class="Bound">ls</a><a id="5959" class="Symbol">}</a> <a id="5961" class="Symbol">{</a><a id="5962" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1053" class="InductiveConstructor">suc</a> <a id="5966" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5966" class="Bound">i</a><a id="5967" class="Symbol">}</a> <a id="5969" class="Symbol">{</a><a id="5970" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1053" class="InductiveConstructor">suc</a> <a id="5974" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5974" class="Bound">j</a><a id="5975" class="Symbol">}</a> <a id="5977" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5979" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5979" class="Bound">x∉ls</a> <a id="5984" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5986" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5986" class="Bound">dls</a> <a id="5990" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="5992" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5992" class="Bound">lsij</a> <a id="5997" class="Symbol">=</a>
    <a id="6003" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="6008" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1053" class="InductiveConstructor">suc</a> <a id="6012" class="Symbol">(</a><a id="6013" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5526" class="Function">distinct-lookup-inj</a> <a id="6033" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5986" class="Bound">dls</a> <a id="6037" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5992" class="Bound">lsij</a><a id="6041" class="Symbol">)</a>
</pre>{% endraw %}
We shall need to convert from an irrelevant proof of distinctness to a
relevant one. In general, the laundering of irrelevant proofs into
relevant ones is easy to do when the predicate in question is
decidable. The following is a decision procedure for whether a vector
is distinct.
{% raw %}<pre class="Agda"><a id="distinct?"></a><a id="6335" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6335" class="Function">distinct?</a> <a id="6345" class="Symbol">:</a> <a id="6347" class="Symbol">∀{</a><a id="6349" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6349" class="Bound">n</a><a id="6350" class="Symbol">}</a> <a id="6352" class="Symbol">→</a> <a id="6354" class="Symbol">(</a><a id="6355" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6355" class="Bound">xs</a> <a id="6358" class="Symbol">:</a> <a id="6360" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="6364" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="6369" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6349" class="Bound">n</a><a id="6370" class="Symbol">)</a> <a id="6372" class="Symbol">→</a> <a id="6374" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#605" class="Datatype">Dec</a> <a id="6378" class="Symbol">(</a><a id="6379" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="6388" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6355" class="Bound">xs</a><a id="6390" class="Symbol">)</a>
<a id="6392" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6335" class="Function">distinct?</a> <a id="6402" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a> <a id="6405" class="Symbol">=</a> <a id="6407" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="6411" href="Agda.Builtin.Unit.html#174" class="InductiveConstructor">tt</a>
<a id="6414" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6335" class="Function">distinct?</a> <a id="6424" class="Symbol">(</a><a id="6425" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6425" class="Bound">x</a> <a id="6427" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="6429" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6429" class="Bound">xs</a><a id="6431" class="Symbol">)</a>
    <a id="6437" class="Keyword">with</a> <a id="6442" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6425" class="Bound">x</a> <a id="6444" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Membership.DecSetoid.html#834" class="Function Operator">∈?</a> <a id="6447" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6429" class="Bound">xs</a>
<a id="6450" class="Symbol">...</a> <a id="6454" class="Symbol">|</a> <a id="6456" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="6460" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6460" class="Bound">x∈xs</a> <a id="6465" class="Symbol">=</a> <a id="6467" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="6470" class="Symbol">λ</a> <a id="6472" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6472" class="Bound">z</a> <a id="6474" class="Symbol">→</a> <a id="6476" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a> <a id="6482" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6472" class="Bound">z</a> <a id="6484" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6460" class="Bound">x∈xs</a>
<a id="6489" class="Symbol">...</a> <a id="6493" class="Symbol">|</a> <a id="6495" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="6498" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6498" class="Bound">x∉xs</a>
    <a id="6508" class="Keyword">with</a> <a id="6513" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6335" class="Function">distinct?</a> <a id="6523" class="Bound">xs</a>
<a id="6526" class="Symbol">...</a> <a id="6530" class="Symbol">|</a> <a id="6532" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="6536" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6536" class="Bound">dxs</a> <a id="6540" class="Symbol">=</a> <a id="6542" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="6546" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6548" class="Bound">x∉xs</a> <a id="6554" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6556" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6536" class="Bound">dxs</a> <a id="6560" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="6562" class="Symbol">...</a> <a id="6566" class="Symbol">|</a> <a id="6568" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="6571" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6571" class="Bound">¬dxs</a> <a id="6576" class="Symbol">=</a> <a id="6578" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="6581" class="Symbol">λ</a> <a id="6583" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6583" class="Bound">x₁</a> <a id="6586" class="Symbol">→</a> <a id="6588" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6571" class="Bound">¬dxs</a> <a id="6593" class="Symbol">(</a><a id="6594" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="6600" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6583" class="Bound">x₁</a><a id="6602" class="Symbol">)</a>
</pre>{% endraw %}
With this decision procedure in hand, we define the following
function for laundering irrelevant proofs of distinctness into
relevant ones.
{% raw %}<pre class="Agda"><a id="distinct-relevant"></a><a id="6753" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6753" class="Function">distinct-relevant</a> <a id="6771" class="Symbol">:</a> <a id="6773" class="Symbol">∀</a> <a id="6775" class="Symbol">{</a><a id="6776" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6776" class="Bound">n</a><a id="6777" class="Symbol">}{</a><a id="6779" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6779" class="Bound">fs</a> <a id="6782" class="Symbol">:</a> <a id="6784" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="6788" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="6793" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6776" class="Bound">n</a><a id="6794" class="Symbol">}</a> <a id="6796" class="Symbol">.(</a><a id="6798" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6798" class="Bound">d</a> <a id="6800" class="Symbol">:</a> <a id="6802" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="6811" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6779" class="Bound">fs</a><a id="6813" class="Symbol">)</a> <a id="6815" class="Symbol">→</a> <a id="6817" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="6826" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6779" class="Bound">fs</a>
<a id="6829" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6753" class="Function">distinct-relevant</a> <a id="6847" class="Symbol">{</a><a id="6848" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6848" class="Bound">n</a><a id="6849" class="Symbol">}{</a><a id="6851" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6851" class="Bound">fs</a><a id="6853" class="Symbol">}</a> <a id="6855" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6855" class="Bound">d</a>
    <a id="6861" class="Keyword">with</a> <a id="6866" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6335" class="Function">distinct?</a> <a id="6876" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6851" class="Bound">fs</a>
<a id="6879" class="Symbol">...</a> <a id="6883" class="Symbol">|</a> <a id="6885" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="6889" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6889" class="Bound">dfs</a> <a id="6893" class="Symbol">=</a> <a id="6895" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6889" class="Bound">dfs</a>
<a id="6899" class="Symbol">...</a> <a id="6903" class="Symbol">|</a> <a id="6905" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="6908" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6908" class="Bound">¬dfs</a> <a id="6913" class="Symbol">=</a> <a id="6915" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.Irrelevant.html#327" class="Function">⊥-elimi</a> <a id="6923" class="Symbol">(</a><a id="6924" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6908" class="Bound">¬dfs</a> <a id="6929" class="Bound">d</a><a id="6930" class="Symbol">)</a>
</pre>{% endraw %}
The fields of one record are a *subset* of the fields of another
record if every field of the first is also a field of the second.
{% raw %}<pre class="Agda"><a id="_⊆_"></a><a id="7072" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7072" class="Function Operator">_⊆_</a> <a id="7076" class="Symbol">:</a> <a id="7078" class="Symbol">∀{</a><a id="7080" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7080" class="Bound">n</a> <a id="7082" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7082" class="Bound">m</a><a id="7083" class="Symbol">}</a> <a id="7085" class="Symbol">→</a> <a id="7087" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="7091" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="7096" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7080" class="Bound">n</a> <a id="7098" class="Symbol">→</a> <a id="7100" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="7104" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="7109" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7082" class="Bound">m</a> <a id="7111" class="Symbol">→</a> <a id="7113" class="PrimitiveType">Set</a>
<a id="7117" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7117" class="Bound">xs</a> <a id="7120" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7072" class="Function Operator">⊆</a> <a id="7122" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7122" class="Bound">ys</a> <a id="7125" class="Symbol">=</a> <a id="7127" class="Symbol">(</a><a id="7128" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7128" class="Bound">x</a> <a id="7130" class="Symbol">:</a> <a id="7132" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a><a id="7136" class="Symbol">)</a> <a id="7138" class="Symbol">→</a> <a id="7140" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7128" class="Bound">x</a> <a id="7142" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Membership.Setoid.html#824" class="Function Operator">∈</a> <a id="7144" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7117" class="Bound">xs</a> <a id="7147" class="Symbol">→</a> <a id="7149" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7128" class="Bound">x</a> <a id="7151" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Membership.Setoid.html#824" class="Function Operator">∈</a> <a id="7153" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7122" class="Bound">ys</a>
</pre>{% endraw %}
This subset relation is reflexive and transitive.
{% raw %}<pre class="Agda"><a id="⊆-refl"></a><a id="7215" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7215" class="Function">⊆-refl</a> <a id="7222" class="Symbol">:</a> <a id="7224" class="Symbol">∀{</a><a id="7226" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7226" class="Bound">n</a><a id="7227" class="Symbol">}{</a><a id="7229" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7229" class="Bound">ls</a> <a id="7232" class="Symbol">:</a> <a id="7234" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="7238" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="7243" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7226" class="Bound">n</a><a id="7244" class="Symbol">}</a> <a id="7246" class="Symbol">→</a> <a id="7248" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7229" class="Bound">ls</a> <a id="7251" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7072" class="Function Operator">⊆</a> <a id="7253" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7229" class="Bound">ls</a>
<a id="7256" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7215" class="Function">⊆-refl</a> <a id="7263" class="Symbol">{</a><a id="7264" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7264" class="Bound">n</a><a id="7265" class="Symbol">}{</a><a id="7267" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7267" class="Bound">ls</a><a id="7269" class="Symbol">}</a> <a id="7271" class="Symbol">=</a> <a id="7273" class="Symbol">λ</a> <a id="7275" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7275" class="Bound">x</a> <a id="7277" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7277" class="Bound">x∈ls</a> <a id="7282" class="Symbol">→</a> <a id="7284" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7277" class="Bound">x∈ls</a>

<a id="⊆-trans"></a><a id="7290" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7290" class="Function">⊆-trans</a> <a id="7298" class="Symbol">:</a> <a id="7300" class="Symbol">∀{</a><a id="7302" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7302" class="Bound">l</a> <a id="7304" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7304" class="Bound">n</a> <a id="7306" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7306" class="Bound">m</a><a id="7307" class="Symbol">}{</a><a id="7309" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7309" class="Bound">ns</a>  <a id="7313" class="Symbol">:</a> <a id="7315" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="7319" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="7324" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7304" class="Bound">n</a><a id="7325" class="Symbol">}{</a><a id="7327" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7327" class="Bound">ms</a>  <a id="7331" class="Symbol">:</a> <a id="7333" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="7337" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="7342" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7306" class="Bound">m</a><a id="7343" class="Symbol">}{</a><a id="7345" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7345" class="Bound">ls</a>  <a id="7349" class="Symbol">:</a> <a id="7351" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="7355" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="7360" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7302" class="Bound">l</a><a id="7361" class="Symbol">}</a>
   <a id="7366" class="Symbol">→</a> <a id="7368" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7309" class="Bound">ns</a> <a id="7371" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7072" class="Function Operator">⊆</a> <a id="7373" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7327" class="Bound">ms</a>  <a id="7377" class="Symbol">→</a>  <a id="7380" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7327" class="Bound">ms</a> <a id="7383" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7072" class="Function Operator">⊆</a> <a id="7385" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7345" class="Bound">ls</a>  <a id="7389" class="Symbol">→</a>  <a id="7392" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7309" class="Bound">ns</a> <a id="7395" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7072" class="Function Operator">⊆</a> <a id="7397" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7345" class="Bound">ls</a>
<a id="7400" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7290" class="Function">⊆-trans</a> <a id="7408" class="Symbol">{</a><a id="7409" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7409" class="Bound">l</a><a id="7410" class="Symbol">}{</a><a id="7412" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7412" class="Bound">n</a><a id="7413" class="Symbol">}{</a><a id="7415" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7415" class="Bound">m</a><a id="7416" class="Symbol">}{</a><a id="7418" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7418" class="Bound">ns</a><a id="7420" class="Symbol">}{</a><a id="7422" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7422" class="Bound">ms</a><a id="7424" class="Symbol">}{</a><a id="7426" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7426" class="Bound">ls</a><a id="7428" class="Symbol">}</a> <a id="7430" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7430" class="Bound">ns⊆ms</a> <a id="7436" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7436" class="Bound">ms⊆ls</a> <a id="7442" class="Symbol">=</a> <a id="7444" class="Symbol">λ</a> <a id="7446" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7446" class="Bound">x</a> <a id="7448" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7448" class="Bound">z</a> <a id="7450" class="Symbol">→</a> <a id="7452" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7436" class="Bound">ms⊆ls</a> <a id="7458" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7446" class="Bound">x</a> <a id="7460" class="Symbol">(</a><a id="7461" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7430" class="Bound">ns⊆ms</a> <a id="7467" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7446" class="Bound">x</a> <a id="7469" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7448" class="Bound">z</a><a id="7470" class="Symbol">)</a>
</pre>{% endraw %}
If `y` is an element of vector `xs`, then `y` is at some index `i` of
the vector.
{% raw %}<pre class="Agda"><a id="lookup-∈"></a><a id="7563" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7563" class="Function">lookup-∈</a> <a id="7572" class="Symbol">:</a> <a id="7574" class="Symbol">∀{</a><a id="7576" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7576" class="Bound">ℓ</a><a id="7577" class="Symbol">}{</a><a id="7579" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7579" class="Bound">A</a> <a id="7581" class="Symbol">:</a> <a id="7583" class="PrimitiveType">Set</a> <a id="7587" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7576" class="Bound">ℓ</a><a id="7588" class="Symbol">}{</a><a id="7590" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7590" class="Bound">n</a><a id="7591" class="Symbol">}</a> <a id="7593" class="Symbol">{</a><a id="7594" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7594" class="Bound">xs</a> <a id="7597" class="Symbol">:</a> <a id="7599" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="7603" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7579" class="Bound">A</a> <a id="7605" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7590" class="Bound">n</a><a id="7606" class="Symbol">}{</a><a id="7608" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7608" class="Bound">y</a><a id="7609" class="Symbol">}</a>
   <a id="7614" class="Symbol">→</a> <a id="7616" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7608" class="Bound">y</a> <a id="7618" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Membership.Setoid.html#824" class="Function Operator">∈</a> <a id="7620" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7594" class="Bound">xs</a>
   <a id="7626" class="Symbol">→</a> <a id="7628" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="7631" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7631" class="Bound">i</a> <a id="7633" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="7635" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1000" class="Datatype">Fin</a> <a id="7639" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7590" class="Bound">n</a> <a id="7641" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="7643" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="7650" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7594" class="Bound">xs</a> <a id="7653" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7631" class="Bound">i</a> <a id="7655" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="7657" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7608" class="Bound">y</a>
<a id="7659" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7563" class="Function">lookup-∈</a> <a id="7668" class="Symbol">{</a><a id="7669" class="Argument">xs</a> <a id="7672" class="Symbol">=</a> <a id="7674" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7674" class="Bound">x</a> <a id="7676" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="7678" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7678" class="Bound">xs</a><a id="7680" class="Symbol">}</a> <a id="7682" class="Symbol">(</a><a id="7683" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Relation.Unary.Any.html#991" class="InductiveConstructor">here</a> <a id="7688" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="7692" class="Symbol">)</a> <a id="7694" class="Symbol">=</a> <a id="7696" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="7698" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1022" class="InductiveConstructor">zero</a> <a id="7703" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="7705" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="7710" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="7712" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7563" class="Function">lookup-∈</a> <a id="7721" class="Symbol">{</a><a id="7722" class="Argument">xs</a> <a id="7725" class="Symbol">=</a> <a id="7727" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7727" class="Bound">x</a> <a id="7729" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="7731" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7731" class="Bound">xs</a><a id="7733" class="Symbol">}</a> <a id="7735" class="Symbol">(</a><a id="7736" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Relation.Unary.Any.html#1058" class="InductiveConstructor">there</a> <a id="7742" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7742" class="Bound">y∈xs</a><a id="7746" class="Symbol">)</a>
    <a id="7752" class="Keyword">with</a> <a id="7757" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7563" class="Function">lookup-∈</a> <a id="7766" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7742" class="Bound">y∈xs</a>
<a id="7771" class="Symbol">...</a> <a id="7775" class="Symbol">|</a> <a id="7777" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="7779" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7779" class="Bound">i</a> <a id="7781" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="7783" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7783" class="Bound">xs[i]=y</a> <a id="7791" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="7793" class="Symbol">=</a> <a id="7795" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="7797" class="Symbol">(</a><a id="7798" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1053" class="InductiveConstructor">suc</a> <a id="7802" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7779" class="Bound">i</a><a id="7803" class="Symbol">)</a> <a id="7805" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="7807" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7783" class="Bound">xs[i]=y</a> <a id="7815" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
</pre>{% endraw %}
If one vector `ns` is a subset of another `ms`, then for any element
`lookup ns i`, there is an equal element in `ms` at some index.
{% raw %}<pre class="Agda"><a id="lookup-⊆"></a><a id="7959" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7959" class="Function">lookup-⊆</a> <a id="7968" class="Symbol">:</a> <a id="7970" class="Symbol">∀{</a><a id="7972" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7972" class="Bound">n</a> <a id="7974" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7974" class="Bound">m</a> <a id="7976" class="Symbol">:</a> <a id="7978" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="7979" class="Symbol">}{</a><a id="7981" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7981" class="Bound">ns</a> <a id="7984" class="Symbol">:</a> <a id="7986" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="7990" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="7995" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7972" class="Bound">n</a><a id="7996" class="Symbol">}{</a><a id="7998" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7998" class="Bound">ms</a> <a id="8001" class="Symbol">:</a> <a id="8003" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="8007" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="8012" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7974" class="Bound">m</a><a id="8013" class="Symbol">}{</a><a id="8015" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8015" class="Bound">i</a> <a id="8017" class="Symbol">:</a> <a id="8019" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1000" class="Datatype">Fin</a> <a id="8023" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7972" class="Bound">n</a><a id="8024" class="Symbol">}</a>
   <a id="8029" class="Symbol">→</a> <a id="8031" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7981" class="Bound">ns</a> <a id="8034" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7072" class="Function Operator">⊆</a> <a id="8036" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7998" class="Bound">ms</a>
   <a id="8042" class="Symbol">→</a> <a id="8044" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="8047" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8047" class="Bound">k</a> <a id="8049" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="8051" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1000" class="Datatype">Fin</a> <a id="8055" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7974" class="Bound">m</a> <a id="8057" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="8059" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="8066" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7981" class="Bound">ns</a> <a id="8069" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8015" class="Bound">i</a> <a id="8071" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="8073" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="8080" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7998" class="Bound">ms</a> <a id="8083" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8047" class="Bound">k</a>
<a id="8085" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7959" class="Function">lookup-⊆</a> <a id="8094" class="Symbol">{</a><a id="8095" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="8099" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8099" class="Bound">n</a><a id="8100" class="Symbol">}</a> <a id="8102" class="Symbol">{</a><a id="8103" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8103" class="Bound">m</a><a id="8104" class="Symbol">}</a> <a id="8106" class="Symbol">{</a><a id="8107" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8107" class="Bound">x</a> <a id="8109" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="8111" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8111" class="Bound">ns</a><a id="8113" class="Symbol">}</a> <a id="8115" class="Symbol">{</a><a id="8116" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8116" class="Bound">ms</a><a id="8118" class="Symbol">}</a> <a id="8120" class="Symbol">{</a><a id="8121" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1022" class="InductiveConstructor">zero</a><a id="8125" class="Symbol">}</a> <a id="8127" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8127" class="Bound">ns⊆ms</a> 
    <a id="8138" class="Keyword">with</a> <a id="8143" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7563" class="Function">lookup-∈</a> <a id="8152" class="Symbol">(</a><a id="8153" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8127" class="Bound">ns⊆ms</a> <a id="8159" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8107" class="Bound">x</a> <a id="8161" class="Symbol">(</a><a id="8162" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Relation.Unary.Any.html#991" class="InductiveConstructor">here</a> <a id="8167" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="8171" class="Symbol">))</a>
<a id="8174" class="Symbol">...</a> <a id="8178" class="Symbol">|</a> <a id="8180" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="8182" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8182" class="Bound">k</a> <a id="8184" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="8186" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8186" class="Bound">ms[k]=x</a> <a id="8194" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="8196" class="Symbol">=</a>     
      <a id="8209" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="8211" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8182" class="Bound">k</a> <a id="8213" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="8215" class="Symbol">(</a><a id="8216" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="8220" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8186" class="Bound">ms[k]=x</a><a id="8227" class="Symbol">)</a> <a id="8229" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="8231" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7959" class="Function">lookup-⊆</a> <a id="8240" class="Symbol">{</a><a id="8241" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="8245" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8245" class="Bound">n</a><a id="8246" class="Symbol">}</a> <a id="8248" class="Symbol">{</a><a id="8249" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8249" class="Bound">m</a><a id="8250" class="Symbol">}</a> <a id="8252" class="Symbol">{</a><a id="8253" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8253" class="Bound">x</a> <a id="8255" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="8257" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8257" class="Bound">ns</a><a id="8259" class="Symbol">}</a> <a id="8261" class="Symbol">{</a><a id="8262" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8262" class="Bound">ms</a><a id="8264" class="Symbol">}</a> <a id="8266" class="Symbol">{</a><a id="8267" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1053" class="InductiveConstructor">suc</a> <a id="8271" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8271" class="Bound">i</a><a id="8272" class="Symbol">}</a> <a id="8274" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8274" class="Bound">x∷ns⊆ms</a> <a id="8282" class="Symbol">=</a>
    <a id="8288" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7959" class="Function">lookup-⊆</a> <a id="8297" class="Symbol">{</a><a id="8298" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8245" class="Bound">n</a><a id="8299" class="Symbol">}</a> <a id="8301" class="Symbol">{</a><a id="8302" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8249" class="Bound">m</a><a id="8303" class="Symbol">}</a> <a id="8305" class="Symbol">{</a><a id="8306" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8257" class="Bound">ns</a><a id="8308" class="Symbol">}</a> <a id="8310" class="Symbol">{</a><a id="8311" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8262" class="Bound">ms</a><a id="8313" class="Symbol">}</a> <a id="8315" class="Symbol">{</a><a id="8316" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8271" class="Bound">i</a><a id="8317" class="Symbol">}</a> <a id="8319" class="Symbol">(λ</a> <a id="8322" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8322" class="Bound">x</a> <a id="8324" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8324" class="Bound">z</a> <a id="8326" class="Symbol">→</a> <a id="8328" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8274" class="Bound">x∷ns⊆ms</a> <a id="8336" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8322" class="Bound">x</a> <a id="8338" class="Symbol">(</a><a id="8339" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Relation.Unary.Any.html#1058" class="InductiveConstructor">there</a> <a id="8345" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8324" class="Bound">z</a><a id="8346" class="Symbol">))</a>
</pre>{% endraw %}
## Types

{% raw %}<pre class="Agda"><a id="8368" class="Keyword">data</a> <a id="Type"></a><a id="8373" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="8378" class="Symbol">:</a> <a id="8380" class="PrimitiveType">Set</a> <a id="8384" class="Keyword">where</a>
  <a id="Type._⇒_"></a><a id="8392" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">_⇒_</a>   <a id="8398" class="Symbol">:</a> <a id="8400" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="8405" class="Symbol">→</a> <a id="8407" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="8412" class="Symbol">→</a> <a id="8414" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a>
  <a id="Type.`ℕ"></a><a id="8421" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a>    <a id="8427" class="Symbol">:</a> <a id="8429" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a>
  <a id="Type.｛_⦂_｝"></a><a id="8436" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛_⦂_｝</a> <a id="8442" class="Symbol">:</a> <a id="8444" class="Symbol">{</a><a id="8445" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8445" class="Bound">n</a> <a id="8447" class="Symbol">:</a> <a id="8449" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="8450" class="Symbol">}</a> <a id="8452" class="Symbol">(</a><a id="8453" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8453" class="Bound">ls</a> <a id="8456" class="Symbol">:</a> <a id="8458" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="8462" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="8467" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8445" class="Bound">n</a><a id="8468" class="Symbol">)</a> <a id="8470" class="Symbol">(</a><a id="8471" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8471" class="Bound">As</a> <a id="8474" class="Symbol">:</a> <a id="8476" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="8480" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="8485" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8445" class="Bound">n</a><a id="8486" class="Symbol">)</a> <a id="8488" class="Symbol">→</a> <a id="8490" class="Symbol">.{</a><a id="8492" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8492" class="Bound">d</a> <a id="8494" class="Symbol">:</a> <a id="8496" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="8505" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8453" class="Bound">ls</a><a id="8507" class="Symbol">}</a> <a id="8509" class="Symbol">→</a> <a id="8511" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> 
</pre>{% endraw %}
In addition to function types `A ⇒ B` and natural numbers `ℕ`, we
have the record type `｛ ls ⦂ As ｝`, where `ls` is a vector of field
names and `As` is a vector of types, as discussed above.  We require
that the field names be distinct, but we do not want the details of
the proof of distinctness to affect whether two record types are
equal, so we declare that parameter to be irrelevant by placing a `.`
in front of it.


## Subtyping

The subtyping relation, written `A <: B`, defines when an implicit
cast is allowed via the subsumption rule. The following data type
definition specifies the subtyping rules for natural numbers,
functions, and record types. We discuss each rule below.

{% raw %}<pre class="Agda"><a id="9217" class="Keyword">data</a> <a id="_&lt;:_"></a><a id="9222" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">_&lt;:_</a> <a id="9227" class="Symbol">:</a> <a id="9229" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="9234" class="Symbol">→</a> <a id="9236" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="9241" class="Symbol">→</a> <a id="9243" class="PrimitiveType">Set</a> <a id="9247" class="Keyword">where</a>
  <a id="_&lt;:_.&lt;:-nat"></a><a id="9255" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9255" class="InductiveConstructor">&lt;:-nat</a> <a id="9262" class="Symbol">:</a> <a id="9264" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a> <a id="9267" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="9270" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a>

  <a id="_&lt;:_.&lt;:-fun"></a><a id="9276" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9276" class="InductiveConstructor">&lt;:-fun</a> <a id="9283" class="Symbol">:</a> <a id="9285" class="Symbol">∀{</a><a id="9287" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9287" class="Bound">A</a> <a id="9289" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9289" class="Bound">B</a> <a id="9291" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9291" class="Bound">C</a> <a id="9293" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9293" class="Bound">D</a> <a id="9295" class="Symbol">:</a> <a id="9297" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a><a id="9301" class="Symbol">}</a>
    <a id="9307" class="Symbol">→</a> <a id="9309" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9291" class="Bound">C</a> <a id="9311" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="9314" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9287" class="Bound">A</a>  <a id="9317" class="Symbol">→</a> <a id="9319" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9289" class="Bound">B</a> <a id="9321" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="9324" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9293" class="Bound">D</a>
      <a id="9332" class="Comment">----------------</a>
    <a id="9353" class="Symbol">→</a> <a id="9355" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9287" class="Bound">A</a> <a id="9357" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="9359" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9289" class="Bound">B</a> <a id="9361" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="9364" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9291" class="Bound">C</a> <a id="9366" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="9368" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9293" class="Bound">D</a>

  <a id="_&lt;:_.&lt;:-rcd"></a><a id="9373" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9373" class="InductiveConstructor">&lt;:-rcd</a> <a id="9380" class="Symbol">:</a>  <a id="9383" class="Symbol">∀{</a><a id="9385" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9385" class="Bound">m</a><a id="9386" class="Symbol">}{</a><a id="9388" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9388" class="Bound">ks</a> <a id="9391" class="Symbol">:</a> <a id="9393" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="9397" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="9402" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9385" class="Bound">m</a><a id="9403" class="Symbol">}{</a><a id="9405" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9405" class="Bound">Ss</a> <a id="9408" class="Symbol">:</a> <a id="9410" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="9414" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="9419" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9385" class="Bound">m</a><a id="9420" class="Symbol">}.{</a><a id="9423" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9423" class="Bound">d1</a> <a id="9426" class="Symbol">:</a> <a id="9428" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="9437" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9388" class="Bound">ks</a><a id="9439" class="Symbol">}</a>
             <a id="9454" class="Symbol">{</a><a id="9455" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9455" class="Bound">n</a><a id="9456" class="Symbol">}{</a><a id="9458" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9458" class="Bound">ls</a> <a id="9461" class="Symbol">:</a> <a id="9463" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="9467" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="9472" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9455" class="Bound">n</a><a id="9473" class="Symbol">}{</a><a id="9475" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9475" class="Bound">Ts</a> <a id="9478" class="Symbol">:</a> <a id="9480" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="9484" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="9489" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9455" class="Bound">n</a><a id="9490" class="Symbol">}.{</a><a id="9493" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9493" class="Bound">d2</a> <a id="9496" class="Symbol">:</a> <a id="9498" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="9507" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9458" class="Bound">ls</a><a id="9509" class="Symbol">}</a>
    <a id="9515" class="Symbol">→</a> <a id="9517" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9458" class="Bound">ls</a> <a id="9520" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7072" class="Function Operator">⊆</a> <a id="9522" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9388" class="Bound">ks</a>
    <a id="9529" class="Symbol">→</a> <a id="9531" class="Symbol">(∀{</a><a id="9534" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9534" class="Bound">i</a> <a id="9536" class="Symbol">:</a> <a id="9538" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1000" class="Datatype">Fin</a> <a id="9542" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9455" class="Bound">n</a><a id="9543" class="Symbol">}{</a><a id="9545" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9545" class="Bound">j</a> <a id="9547" class="Symbol">:</a> <a id="9549" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1000" class="Datatype">Fin</a> <a id="9553" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9385" class="Bound">m</a><a id="9554" class="Symbol">}</a> <a id="9556" class="Symbol">→</a> <a id="9558" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="9565" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9388" class="Bound">ks</a> <a id="9568" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9545" class="Bound">j</a> <a id="9570" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="9572" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="9579" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9458" class="Bound">ls</a> <a id="9582" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9534" class="Bound">i</a>
                               <a id="9615" class="Symbol">→</a> <a id="9617" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="9624" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9405" class="Bound">Ss</a> <a id="9627" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9545" class="Bound">j</a> <a id="9629" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="9632" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="9639" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9475" class="Bound">Ts</a> <a id="9642" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9534" class="Bound">i</a><a id="9643" class="Symbol">)</a>
      <a id="9651" class="Comment">------------------------------------------------------</a>
    <a id="9710" class="Symbol">→</a> <a id="9712" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="9714" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9388" class="Bound">ks</a> <a id="9717" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="9719" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9405" class="Bound">Ss</a> <a id="9722" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a> <a id="9724" class="Symbol">{</a><a id="9725" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9423" class="Bound">d1</a><a id="9727" class="Symbol">}</a> <a id="9729" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="9732" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="9734" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9458" class="Bound">ls</a> <a id="9737" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="9739" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9475" class="Bound">Ts</a> <a id="9742" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a> <a id="9744" class="Symbol">{</a><a id="9745" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9493" class="Bound">d2</a><a id="9747" class="Symbol">}</a>
</pre>{% endraw %}
The rule `<:-nat` says that `ℕ` is a subtype of itself.

The rule `<:-fun` is the traditional rule for function types, which is
best understood with the below diagram. It answers the question, when
can a function of type `A ⇒ B` be used in place of a function of type
`C ⇒ D`. It will be called with an argument of type `C`, so we need to
convert from `C` to `A`. We then call the function to get the result
of type `B`. Finally, we need to convert from `B` to `D`. Note that
the direction of subtyping for the parameters is swapped (`C <: A`), a
phenomenon named contra-variance.

    C <: A
    ⇓    ⇓
    D :> B

The record subtyping rule (`<:-rcd`) characterizes when a record of
one type can safely be used in place of another record type.  The
first premise of the rule expresses _width subtyping_ by requiring
that all the field names in `ls` are also in `ks`. So it allows the
hiding of fields when going from a subtype to a supertype.
The second premise of the record subtyping rule (`<:-rcd`) expresses
_depth subtyping_, that is, it allows the types of the fields to
change according to subtyping. The following is an abbreviation for
this premise.
{% raw %}<pre class="Agda"><a id="_⦂_&lt;:_⦂_"></a><a id="10918" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10918" class="Function Operator">_⦂_&lt;:_⦂_</a> <a id="10927" class="Symbol">:</a> <a id="10929" class="Symbol">∀</a> <a id="10931" class="Symbol">{</a><a id="10932" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10932" class="Bound">m</a> <a id="10934" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10934" class="Bound">n</a><a id="10935" class="Symbol">}</a> <a id="10937" class="Symbol">→</a> <a id="10939" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="10943" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="10948" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10932" class="Bound">m</a> <a id="10950" class="Symbol">→</a> <a id="10952" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="10956" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="10961" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10932" class="Bound">m</a> <a id="10963" class="Symbol">→</a> <a id="10965" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="10969" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="10974" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10934" class="Bound">n</a> <a id="10976" class="Symbol">→</a> <a id="10978" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="10982" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="10987" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10934" class="Bound">n</a> <a id="10989" class="Symbol">→</a> <a id="10991" class="PrimitiveType">Set</a>
<a id="10995" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10918" class="Function Operator">_⦂_&lt;:_⦂_</a> <a id="11004" class="Symbol">{</a><a id="11005" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11005" class="Bound">m</a><a id="11006" class="Symbol">}{</a><a id="11008" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11008" class="Bound">n</a><a id="11009" class="Symbol">}</a> <a id="11011" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11011" class="Bound">ks</a> <a id="11014" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11014" class="Bound">Ss</a> <a id="11017" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11017" class="Bound">ls</a> <a id="11020" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11020" class="Bound">Ts</a> <a id="11023" class="Symbol">=</a> <a id="11025" class="Symbol">(∀{</a><a id="11028" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11028" class="Bound">i</a> <a id="11030" class="Symbol">:</a> <a id="11032" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1000" class="Datatype">Fin</a> <a id="11036" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11008" class="Bound">n</a><a id="11037" class="Symbol">}{</a><a id="11039" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11039" class="Bound">j</a> <a id="11041" class="Symbol">:</a> <a id="11043" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1000" class="Datatype">Fin</a> <a id="11047" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11005" class="Bound">m</a><a id="11048" class="Symbol">}</a>
    <a id="11054" class="Symbol">→</a> <a id="11056" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="11063" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11011" class="Bound">ks</a> <a id="11066" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11039" class="Bound">j</a> <a id="11068" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="11070" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="11077" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11017" class="Bound">ls</a> <a id="11080" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11028" class="Bound">i</a>  <a id="11083" class="Symbol">→</a>  <a id="11086" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="11093" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11014" class="Bound">Ss</a> <a id="11096" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11039" class="Bound">j</a> <a id="11098" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="11101" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="11108" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11020" class="Bound">Ts</a> <a id="11111" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11028" class="Bound">i</a><a id="11112" class="Symbol">)</a>
</pre>{% endraw %}
## Subtyping is Reflexive

In this section we prove that subtyping is reflexive, that is, `A <:
A` for any type `A`. The proof does not go by induction on the type
`A` because of the `<:-rcd` rule. We instead use induction on the size
of the type. So we first define size of a type, and the size of a
vector of types, as follows.
{% raw %}<pre class="Agda"><a id="ty-size"></a><a id="11453" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11453" class="Function">ty-size</a> <a id="11461" class="Symbol">:</a> <a id="11463" class="Symbol">(</a><a id="11464" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11464" class="Bound">A</a> <a id="11466" class="Symbol">:</a> <a id="11468" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a><a id="11472" class="Symbol">)</a> <a id="11474" class="Symbol">→</a> <a id="11476" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>
<a id="vec-ty-size"></a><a id="11478" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11478" class="Function">vec-ty-size</a> <a id="11490" class="Symbol">:</a> <a id="11492" class="Symbol">∀</a> <a id="11494" class="Symbol">{</a><a id="11495" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11495" class="Bound">n</a> <a id="11497" class="Symbol">:</a> <a id="11499" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="11500" class="Symbol">}</a> <a id="11502" class="Symbol">→</a> <a id="11504" class="Symbol">(</a><a id="11505" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11505" class="Bound">As</a> <a id="11508" class="Symbol">:</a> <a id="11510" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="11514" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="11519" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11495" class="Bound">n</a><a id="11520" class="Symbol">)</a> <a id="11522" class="Symbol">→</a> <a id="11524" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>

<a id="11527" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11453" class="Function">ty-size</a> <a id="11535" class="Symbol">(</a><a id="11536" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11536" class="Bound">A</a> <a id="11538" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="11540" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11540" class="Bound">B</a><a id="11541" class="Symbol">)</a> <a id="11543" class="Symbol">=</a> <a id="11545" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="11549" class="Symbol">(</a><a id="11550" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11453" class="Function">ty-size</a> <a id="11558" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11536" class="Bound">A</a> <a id="11560" href="Agda.Builtin.Nat.html#298" class="Primitive Operator">+</a> <a id="11562" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11453" class="Function">ty-size</a> <a id="11570" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11540" class="Bound">B</a><a id="11571" class="Symbol">)</a>
<a id="11573" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11453" class="Function">ty-size</a> <a id="11581" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a> <a id="11584" class="Symbol">=</a> <a id="11586" class="Number">1</a>
<a id="11588" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11453" class="Function">ty-size</a> <a id="11596" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="11598" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11598" class="Bound">ls</a> <a id="11601" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="11603" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11603" class="Bound">As</a> <a id="11606" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a> <a id="11608" class="Symbol">=</a> <a id="11610" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="11614" class="Symbol">(</a><a id="11615" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11478" class="Function">vec-ty-size</a> <a id="11627" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11603" class="Bound">As</a><a id="11629" class="Symbol">)</a>
<a id="11631" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11478" class="Function">vec-ty-size</a> <a id="11643" class="Symbol">{</a><a id="11644" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11644" class="Bound">n</a><a id="11645" class="Symbol">}</a> <a id="11647" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a> <a id="11650" class="Symbol">=</a> <a id="11652" class="Number">0</a>
<a id="11654" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11478" class="Function">vec-ty-size</a> <a id="11666" class="Symbol">{</a><a id="11667" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11667" class="Bound">n</a><a id="11668" class="Symbol">}</a> <a id="11670" class="Symbol">(</a><a id="11671" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11671" class="Bound">x</a> <a id="11673" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="11675" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11675" class="Bound">xs</a><a id="11677" class="Symbol">)</a> <a id="11679" class="Symbol">=</a> <a id="11681" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11453" class="Function">ty-size</a> <a id="11689" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11671" class="Bound">x</a> <a id="11691" href="Agda.Builtin.Nat.html#298" class="Primitive Operator">+</a> <a id="11693" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11478" class="Function">vec-ty-size</a> <a id="11705" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11675" class="Bound">xs</a>
</pre>{% endraw %}
The size of a type is always positive.
{% raw %}<pre class="Agda"><a id="ty-size-pos"></a><a id="11756" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11756" class="Function">ty-size-pos</a> <a id="11768" class="Symbol">:</a> <a id="11770" class="Symbol">∀</a> <a id="11772" class="Symbol">{</a><a id="11773" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11773" class="Bound">A</a><a id="11774" class="Symbol">}</a> <a id="11776" class="Symbol">→</a> <a id="11778" class="Number">0</a> <a id="11780" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#1005" class="Function Operator">&lt;</a> <a id="11782" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11453" class="Function">ty-size</a> <a id="11790" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11773" class="Bound">A</a>
<a id="11792" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11756" class="Function">ty-size-pos</a> <a id="11804" class="Symbol">{</a><a id="11805" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11805" class="Bound">A</a> <a id="11807" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="11809" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11809" class="Bound">B</a><a id="11810" class="Symbol">}</a> <a id="11812" class="Symbol">=</a> <a id="11814" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#960" class="InductiveConstructor">s≤s</a> <a id="11818" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#918" class="InductiveConstructor">z≤n</a>
<a id="11822" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11756" class="Function">ty-size-pos</a> <a id="11834" class="Symbol">{</a><a id="11835" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a><a id="11837" class="Symbol">}</a> <a id="11839" class="Symbol">=</a> <a id="11841" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#960" class="InductiveConstructor">s≤s</a> <a id="11845" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#918" class="InductiveConstructor">z≤n</a>
<a id="11849" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11756" class="Function">ty-size-pos</a> <a id="11861" class="Symbol">{</a><a id="11862" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="11864" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11864" class="Bound">fs</a> <a id="11867" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="11869" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11869" class="Bound">As</a> <a id="11872" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a> <a id="11874" class="Symbol">}</a> <a id="11876" class="Symbol">=</a> <a id="11878" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#960" class="InductiveConstructor">s≤s</a> <a id="11882" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#918" class="InductiveConstructor">z≤n</a>
</pre>{% endraw %}
The size of a type in a vector is less-or-equal in size to the entire vector.
{% raw %}<pre class="Agda"><a id="lookup-vec-ty-size"></a><a id="11973" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11973" class="Function">lookup-vec-ty-size</a> <a id="11992" class="Symbol">:</a> <a id="11994" class="Symbol">∀{</a><a id="11996" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11996" class="Bound">k</a><a id="11997" class="Symbol">}</a> <a id="11999" class="Symbol">{</a><a id="12000" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12000" class="Bound">As</a> <a id="12003" class="Symbol">:</a> <a id="12005" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="12009" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="12014" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11996" class="Bound">k</a><a id="12015" class="Symbol">}</a> <a id="12017" class="Symbol">{</a><a id="12018" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12018" class="Bound">j</a><a id="12019" class="Symbol">}</a>
   <a id="12024" class="Symbol">→</a> <a id="12026" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11453" class="Function">ty-size</a> <a id="12034" class="Symbol">(</a><a id="12035" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="12042" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12000" class="Bound">As</a> <a id="12045" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12018" class="Bound">j</a><a id="12046" class="Symbol">)</a> <a id="12048" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#895" class="Datatype Operator">≤</a> <a id="12050" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11478" class="Function">vec-ty-size</a> <a id="12062" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12000" class="Bound">As</a>
<a id="12065" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11973" class="Function">lookup-vec-ty-size</a> <a id="12084" class="Symbol">{</a><a id="12085" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="12089" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12089" class="Bound">k</a><a id="12090" class="Symbol">}</a> <a id="12092" class="Symbol">{</a><a id="12093" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12093" class="Bound">A</a> <a id="12095" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="12097" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12097" class="Bound">As</a><a id="12099" class="Symbol">}</a> <a id="12101" class="Symbol">{</a><a id="12102" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1022" class="InductiveConstructor">zero</a><a id="12106" class="Symbol">}</a> <a id="12108" class="Symbol">=</a> <a id="12110" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#14955" class="Function">m≤m+n</a> <a id="12116" class="Symbol">_</a> <a id="12118" class="Symbol">_</a>
<a id="12120" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11973" class="Function">lookup-vec-ty-size</a> <a id="12139" class="Symbol">{</a><a id="12140" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="12144" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12144" class="Bound">k</a><a id="12145" class="Symbol">}</a> <a id="12147" class="Symbol">{</a><a id="12148" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12148" class="Bound">A</a> <a id="12150" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="12152" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12152" class="Bound">As</a><a id="12154" class="Symbol">}</a> <a id="12156" class="Symbol">{</a><a id="12157" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1053" class="InductiveConstructor">suc</a> <a id="12161" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12161" class="Bound">j</a><a id="12162" class="Symbol">}</a> <a id="12164" class="Symbol">=</a> <a id="12166" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#3815" class="Function">≤-trans</a> <a id="12174" class="Symbol">(</a><a id="12175" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11973" class="Function">lookup-vec-ty-size</a> <a id="12194" class="Symbol">{</a><a id="12195" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12144" class="Bound">k</a><a id="12196" class="Symbol">}</a> <a id="12198" class="Symbol">{</a><a id="12199" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12152" class="Bound">As</a><a id="12201" class="Symbol">})</a> <a id="12204" class="Symbol">(</a><a id="12205" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#59581" class="Function">n≤m+n</a> <a id="12211" class="Symbol">_</a> <a id="12213" class="Symbol">_)</a>
</pre>{% endraw %}
Here is the proof of reflexivity, by induction on the size of the type.
{% raw %}<pre class="Agda"><a id="&lt;:-refl-aux"></a><a id="12297" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12297" class="Function">&lt;:-refl-aux</a> <a id="12309" class="Symbol">:</a> <a id="12311" class="Symbol">∀{</a><a id="12313" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12313" class="Bound">n</a><a id="12314" class="Symbol">}{</a><a id="12316" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12316" class="Bound">A</a><a id="12317" class="Symbol">}{</a><a id="12319" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12319" class="Bound">m</a> <a id="12321" class="Symbol">:</a> <a id="12323" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11453" class="Function">ty-size</a> <a id="12331" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12316" class="Bound">A</a> <a id="12333" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Base.html#895" class="Datatype Operator">≤</a> <a id="12335" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12313" class="Bound">n</a><a id="12336" class="Symbol">}</a> <a id="12338" class="Symbol">→</a> <a id="12340" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12316" class="Bound">A</a> <a id="12342" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="12345" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12316" class="Bound">A</a>
<a id="12347" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12297" class="Function">&lt;:-refl-aux</a> <a id="12359" class="Symbol">{</a><a id="12360" class="Number">0</a><a id="12361" class="Symbol">}{</a><a id="12363" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12363" class="Bound">A</a><a id="12364" class="Symbol">}{</a><a id="12366" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12366" class="Bound">m</a><a id="12367" class="Symbol">}</a>
    <a id="12373" class="Keyword">with</a> <a id="12378" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11756" class="Function">ty-size-pos</a> <a id="12390" class="Symbol">{</a><a id="12391" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12363" class="Bound">A</a><a id="12392" class="Symbol">}</a>
<a id="12394" class="Symbol">...</a> <a id="12398" class="Symbol">|</a> <a id="12400" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12400" class="Bound">pos</a> <a id="12404" class="Keyword">rewrite</a> <a id="12412" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#6284" class="Function">n≤0⇒n≡0</a> <a id="12420" class="Bound">m</a>
    <a id="12426" class="Keyword">with</a> <a id="12431" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12400" class="Bound">pos</a>
<a id="12435" class="Symbol">...</a> <a id="12439" class="Symbol">|</a> <a id="12441" class="Symbol">()</a>    
<a id="12448" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12297" class="Function">&lt;:-refl-aux</a> <a id="12460" class="Symbol">{</a><a id="12461" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="12465" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12465" class="Bound">n</a><a id="12466" class="Symbol">}{</a><a id="12468" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a><a id="12470" class="Symbol">}{</a><a id="12472" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12472" class="Bound">m</a><a id="12473" class="Symbol">}</a> <a id="12475" class="Symbol">=</a> <a id="12477" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9255" class="InductiveConstructor">&lt;:-nat</a>
<a id="12484" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12297" class="Function">&lt;:-refl-aux</a> <a id="12496" class="Symbol">{</a><a id="12497" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="12501" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12501" class="Bound">n</a><a id="12502" class="Symbol">}{</a><a id="12504" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12504" class="Bound">A</a> <a id="12506" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="12508" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12508" class="Bound">B</a><a id="12509" class="Symbol">}{</a><a id="12511" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12511" class="Bound">m</a><a id="12512" class="Symbol">}</a> <a id="12514" class="Symbol">=</a>
  <a id="12518" class="Keyword">let</a> <a id="12522" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12522" class="Bound">A&lt;:A</a> <a id="12527" class="Symbol">=</a> <a id="12529" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12297" class="Function">&lt;:-refl-aux</a> <a id="12541" class="Symbol">{</a><a id="12542" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12501" class="Bound">n</a><a id="12543" class="Symbol">}{</a><a id="12545" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12504" class="Bound">A</a><a id="12546" class="Symbol">}{</a><a id="12548" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#15115" class="Function">m+n≤o⇒m≤o</a> <a id="12558" class="Symbol">_</a> <a id="12560" class="Symbol">(</a><a id="12561" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#3355" class="Function">≤-pred</a> <a id="12568" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12511" class="Bound">m</a><a id="12569" class="Symbol">)</a> <a id="12571" class="Symbol">}</a> <a id="12573" class="Keyword">in</a>
  <a id="12578" class="Keyword">let</a> <a id="12582" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12582" class="Bound">B&lt;:B</a> <a id="12587" class="Symbol">=</a> <a id="12589" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12297" class="Function">&lt;:-refl-aux</a> <a id="12601" class="Symbol">{</a><a id="12602" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12501" class="Bound">n</a><a id="12603" class="Symbol">}{</a><a id="12605" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12508" class="Bound">B</a><a id="12606" class="Symbol">}{</a><a id="12608" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#15250" class="Function">m+n≤o⇒n≤o</a> <a id="12618" class="Symbol">_</a> <a id="12620" class="Symbol">(</a><a id="12621" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#3355" class="Function">≤-pred</a> <a id="12628" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12511" class="Bound">m</a><a id="12629" class="Symbol">)</a> <a id="12631" class="Symbol">}</a> <a id="12633" class="Keyword">in</a>
  <a id="12638" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9276" class="InductiveConstructor">&lt;:-fun</a> <a id="12645" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12522" class="Bound">A&lt;:A</a> <a id="12650" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12582" class="Bound">B&lt;:B</a>
<a id="12655" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12297" class="Function">&lt;:-refl-aux</a> <a id="12667" class="Symbol">{</a><a id="12668" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="12672" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12672" class="Bound">n</a><a id="12673" class="Symbol">}{</a><a id="12675" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="12677" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12677" class="Bound">ls</a> <a id="12680" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="12682" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12682" class="Bound">As</a> <a id="12685" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a> <a id="12687" class="Symbol">{</a><a id="12688" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12688" class="Bound">d</a><a id="12689" class="Symbol">}</a> <a id="12691" class="Symbol">}{</a><a id="12693" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12693" class="Bound">m</a><a id="12694" class="Symbol">}</a> <a id="12696" class="Symbol">=</a> <a id="12698" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9373" class="InductiveConstructor">&lt;:-rcd</a> <a id="12705" class="Symbol">{</a><a id="12706" class="Argument">d1</a> <a id="12709" class="Symbol">=</a> <a id="12711" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12688" class="Bound">d</a><a id="12712" class="Symbol">}{</a><a id="12714" class="Argument">d2</a> <a id="12717" class="Symbol">=</a> <a id="12719" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12688" class="Bound">d</a><a id="12720" class="Symbol">}</a> <a id="12722" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7215" class="Function">⊆-refl</a> <a id="12729" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12745" class="Function">G</a>
    <a id="12735" class="Keyword">where</a>
    <a id="12745" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12745" class="Function">G</a> <a id="12747" class="Symbol">:</a> <a id="12749" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12677" class="Bound">ls</a> <a id="12752" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10918" class="Function Operator">⦂</a> <a id="12754" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12682" class="Bound">As</a> <a id="12757" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10918" class="Function Operator">&lt;:</a> <a id="12760" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12677" class="Bound">ls</a> <a id="12763" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10918" class="Function Operator">⦂</a> <a id="12765" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12682" class="Bound">As</a>
    <a id="12772" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12745" class="Function">G</a> <a id="12774" class="Symbol">{</a><a id="12775" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12775" class="Bound">i</a><a id="12776" class="Symbol">}{</a><a id="12778" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12778" class="Bound">j</a><a id="12779" class="Symbol">}</a> <a id="12781" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12781" class="Bound">lij</a> <a id="12785" class="Keyword">rewrite</a> <a id="12793" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5526" class="Function">distinct-lookup-inj</a> <a id="12813" class="Symbol">(</a><a id="12814" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6753" class="Function">distinct-relevant</a> <a id="12832" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12688" class="Bound">d</a><a id="12833" class="Symbol">)</a> <a id="12835" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12781" class="Bound">lij</a> <a id="12839" class="Symbol">=</a>
        <a id="12849" class="Keyword">let</a> <a id="12853" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12853" class="Bound">As[i]≤n</a> <a id="12861" class="Symbol">=</a> <a id="12863" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#3815" class="Function">≤-trans</a> <a id="12871" class="Symbol">(</a><a id="12872" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11973" class="Function">lookup-vec-ty-size</a> <a id="12891" class="Symbol">{</a><a id="12892" class="Argument">As</a> <a id="12895" class="Symbol">=</a> <a id="12897" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12682" class="Bound">As</a><a id="12899" class="Symbol">}{</a><a id="12901" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12775" class="Bound">i</a><a id="12902" class="Symbol">})</a> <a id="12905" class="Symbol">(</a><a id="12906" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#3355" class="Function">≤-pred</a> <a id="12913" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12693" class="Bound">m</a><a id="12914" class="Symbol">)</a> <a id="12916" class="Keyword">in</a> 
        <a id="12928" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12297" class="Function">&lt;:-refl-aux</a> <a id="12940" class="Symbol">{</a><a id="12941" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12672" class="Bound">n</a><a id="12942" class="Symbol">}{</a><a id="12944" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="12951" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12682" class="Bound">As</a> <a id="12954" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12775" class="Bound">i</a><a id="12955" class="Symbol">}{</a><a id="12957" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12853" class="Bound">As[i]≤n</a><a id="12964" class="Symbol">}</a>
</pre>{% endraw %}The theorem statement uses `n` as an upper bound on the size of the type `A`
and proceeds by induction on `n`.

* If it is `0`, then we have a contradiction because the size of a type is always positive.

* If it is `suc n`, we proceed by cases on the type `A`.

  * If it is `ℕ`, then we have `ℕ <: ℕ` by rule `<:-nat`.
  * If it is `A ⇒ B`, then by induction we have `A <: A` and `B <: B`.
    We conclude that `A ⇒ B <: A ⇒ B` by rule `<:-fun`.
  * If it is `｛ ls ⦂ As ｝`, then it suffices to prove that
    `ls ⊆ ls` and `ls ⦂ As <: ls ⦂ As`. The former is proved by `⊆-refl`.
    Regarding the latter, we need to show that for any `i` and `j`,
    `lookup ls j ≡ lookup ls i` implies `lookup As j <: lookup As i`.
    Because `lookup` is injective on distinct vectors, we have `i ≡ j`.
    We then use the induction hypothesis to show that 
    `lookup As i <: lookup As i`, noting that the size of
    `lookup As i` is less-than-or-equal to the size of `As`, which
    is one smaller than the size of `｛ ls ⦂ As ｝`.

The following corollary packages up reflexivity for ease of use.
{% raw %}<pre class="Agda"><a id="&lt;:-refl"></a><a id="14062" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14062" class="Function">&lt;:-refl</a> <a id="14070" class="Symbol">:</a> <a id="14072" class="Symbol">∀{</a><a id="14074" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14074" class="Bound">A</a><a id="14075" class="Symbol">}</a> <a id="14077" class="Symbol">→</a> <a id="14079" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14074" class="Bound">A</a> <a id="14081" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="14084" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14074" class="Bound">A</a>
<a id="14086" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14062" class="Function">&lt;:-refl</a> <a id="14094" class="Symbol">{</a><a id="14095" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14095" class="Bound">A</a><a id="14096" class="Symbol">}</a> <a id="14098" class="Symbol">=</a> <a id="14100" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#12297" class="Function">&lt;:-refl-aux</a> <a id="14112" class="Symbol">{</a><a id="14113" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#11453" class="Function">ty-size</a> <a id="14121" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14095" class="Bound">A</a><a id="14122" class="Symbol">}{</a><a id="14124" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14095" class="Bound">A</a><a id="14125" class="Symbol">}{</a><a id="14127" href="https://agda.github.io/agda-stdlib/v1.1/Data.Nat.Properties.html#3632" class="Function">≤-refl</a><a id="14133" class="Symbol">}</a>
</pre>{% endraw %}
## Subtyping is transitive

{% raw %}<pre class="Agda"><a id="&lt;:-trans"></a><a id="14172" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14172" class="Function">&lt;:-trans</a> <a id="14181" class="Symbol">:</a> <a id="14183" class="Symbol">∀{</a><a id="14185" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14185" class="Bound">A</a> <a id="14187" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14187" class="Bound">B</a> <a id="14189" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14189" class="Bound">C</a><a id="14190" class="Symbol">}</a>
    <a id="14196" class="Symbol">→</a> <a id="14198" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14185" class="Bound">A</a> <a id="14200" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="14203" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14187" class="Bound">B</a>   <a id="14207" class="Symbol">→</a>   <a id="14211" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14187" class="Bound">B</a> <a id="14213" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="14216" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14189" class="Bound">C</a>
      <a id="14224" class="Comment">-------------------</a>
    <a id="14248" class="Symbol">→</a> <a id="14250" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14185" class="Bound">A</a> <a id="14252" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="14255" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14189" class="Bound">C</a>
<a id="14257" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14172" class="Function">&lt;:-trans</a> <a id="14266" class="Symbol">{</a><a id="14267" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14267" class="Bound">A₁</a> <a id="14270" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="14272" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14272" class="Bound">A₂</a><a id="14274" class="Symbol">}</a> <a id="14276" class="Symbol">{</a><a id="14277" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14277" class="Bound">B₁</a> <a id="14280" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="14282" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14282" class="Bound">B₂</a><a id="14284" class="Symbol">}</a> <a id="14286" class="Symbol">{</a><a id="14287" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14287" class="Bound">C₁</a> <a id="14290" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="14292" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14292" class="Bound">C₂</a><a id="14294" class="Symbol">}</a> <a id="14296" class="Symbol">(</a><a id="14297" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9276" class="InductiveConstructor">&lt;:-fun</a> <a id="14304" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14304" class="Bound">A₁&lt;:B₁</a> <a id="14311" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14311" class="Bound">A₂&lt;:B₂</a><a id="14317" class="Symbol">)</a> <a id="14319" class="Symbol">(</a><a id="14320" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9276" class="InductiveConstructor">&lt;:-fun</a> <a id="14327" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14327" class="Bound">B₁&lt;:C₁</a> <a id="14334" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14334" class="Bound">B₂&lt;:C₂</a><a id="14340" class="Symbol">)</a> <a id="14342" class="Symbol">=</a>
    <a id="14348" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9276" class="InductiveConstructor">&lt;:-fun</a> <a id="14355" class="Symbol">(</a><a id="14356" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14172" class="Function">&lt;:-trans</a> <a id="14365" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14327" class="Bound">B₁&lt;:C₁</a> <a id="14372" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14304" class="Bound">A₁&lt;:B₁</a><a id="14378" class="Symbol">)</a> <a id="14380" class="Symbol">(</a><a id="14381" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14172" class="Function">&lt;:-trans</a> <a id="14390" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14311" class="Bound">A₂&lt;:B₂</a> <a id="14397" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14334" class="Bound">B₂&lt;:C₂</a><a id="14403" class="Symbol">)</a>
<a id="14405" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14172" class="Function">&lt;:-trans</a> <a id="14414" class="Symbol">{</a><a id="14415" class="DottedPattern Symbol">.</a><a id="14416" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="DottedPattern InductiveConstructor">`ℕ</a><a id="14418" class="Symbol">}</a> <a id="14420" class="Symbol">{</a><a id="14421" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a><a id="14423" class="Symbol">}</a> <a id="14425" class="Symbol">{</a><a id="14426" class="DottedPattern Symbol">.</a><a id="14427" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="DottedPattern InductiveConstructor">`ℕ</a><a id="14429" class="Symbol">}</a> <a id="14431" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9255" class="InductiveConstructor">&lt;:-nat</a> <a id="14438" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9255" class="InductiveConstructor">&lt;:-nat</a> <a id="14445" class="Symbol">=</a> <a id="14447" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9255" class="InductiveConstructor">&lt;:-nat</a>
<a id="14454" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14172" class="Function">&lt;:-trans</a> <a id="14463" class="Symbol">{</a><a id="14464" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="14466" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14466" class="Bound">ls</a> <a id="14469" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="14471" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14471" class="Bound">As</a> <a id="14474" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a><a id="14475" class="Symbol">{</a><a id="14476" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14476" class="Bound">d1</a><a id="14478" class="Symbol">}</a> <a id="14480" class="Symbol">}</a> <a id="14482" class="Symbol">{</a><a id="14483" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="14485" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14485" class="Bound">ms</a> <a id="14488" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="14490" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14490" class="Bound">Bs</a> <a id="14493" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a> <a id="14495" class="Symbol">{</a><a id="14496" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14496" class="Bound">d2</a><a id="14498" class="Symbol">}</a> <a id="14500" class="Symbol">}</a> <a id="14502" class="Symbol">{</a><a id="14503" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="14505" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14505" class="Bound">ns</a> <a id="14508" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="14510" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14510" class="Bound">Cs</a> <a id="14513" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a> <a id="14515" class="Symbol">{</a><a id="14516" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14516" class="Bound">d3</a><a id="14518" class="Symbol">}</a> <a id="14520" class="Symbol">}</a>
    <a id="14526" class="Symbol">(</a><a id="14527" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9373" class="InductiveConstructor">&lt;:-rcd</a> <a id="14534" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14534" class="Bound">ms⊆ls</a> <a id="14540" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14540" class="Bound">As&lt;:Bs</a><a id="14546" class="Symbol">)</a> <a id="14548" class="Symbol">(</a><a id="14549" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9373" class="InductiveConstructor">&lt;:-rcd</a> <a id="14556" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14556" class="Bound">ns⊆ms</a> <a id="14562" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14562" class="Bound">Bs&lt;:Cs</a><a id="14568" class="Symbol">)</a> <a id="14570" class="Symbol">=</a>
    <a id="14576" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9373" class="InductiveConstructor">&lt;:-rcd</a> <a id="14583" class="Symbol">(</a><a id="14584" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7290" class="Function">⊆-trans</a> <a id="14592" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14556" class="Bound">ns⊆ms</a> <a id="14598" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14534" class="Bound">ms⊆ls</a><a id="14603" class="Symbol">)</a> <a id="14605" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14626" class="Function">As&lt;:Cs</a>
    <a id="14616" class="Keyword">where</a>
    <a id="14626" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14626" class="Function">As&lt;:Cs</a> <a id="14633" class="Symbol">:</a> <a id="14635" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14466" class="Bound">ls</a> <a id="14638" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10918" class="Function Operator">⦂</a> <a id="14640" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14471" class="Bound">As</a> <a id="14643" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10918" class="Function Operator">&lt;:</a> <a id="14646" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14505" class="Bound">ns</a> <a id="14649" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#10918" class="Function Operator">⦂</a> <a id="14651" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14510" class="Bound">Cs</a>
    <a id="14658" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14626" class="Function">As&lt;:Cs</a> <a id="14665" class="Symbol">{</a><a id="14666" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14666" class="Bound">i</a><a id="14667" class="Symbol">}{</a><a id="14669" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14669" class="Bound">j</a><a id="14670" class="Symbol">}</a> <a id="14672" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14672" class="Bound">ls[j]=ns[i]</a>
        <a id="14692" class="Keyword">with</a> <a id="14697" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7959" class="Function">lookup-⊆</a> <a id="14706" class="Symbol">{</a><a id="14707" class="Argument">i</a> <a id="14709" class="Symbol">=</a> <a id="14711" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14666" class="Bound">i</a><a id="14712" class="Symbol">}</a> <a id="14714" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14556" class="Bound">ns⊆ms</a> 
    <a id="14725" class="Symbol">...</a> <a id="14729" class="Symbol">|</a> <a id="14731" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="14733" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14733" class="Bound">k</a> <a id="14735" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="14737" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14737" class="Bound">ns[i]=ms[k]</a> <a id="14749" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="14751" class="Symbol">=</a>
        <a id="14761" class="Keyword">let</a> <a id="14765" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14765" class="Bound">As[j]&lt;:Bs[k]</a> <a id="14778" class="Symbol">=</a> <a id="14780" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14540" class="Bound">As&lt;:Bs</a> <a id="14787" class="Symbol">{</a><a id="14788" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14733" class="Bound">k</a><a id="14789" class="Symbol">}{</a><a id="14791" class="Bound">j</a><a id="14792" class="Symbol">}</a> <a id="14794" class="Symbol">(</a><a id="14795" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#984" class="Function">trans</a> <a id="14801" class="Bound">ls[j]=ns[i]</a> <a id="14813" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14737" class="Bound">ns[i]=ms[k]</a><a id="14824" class="Symbol">)</a> <a id="14826" class="Keyword">in</a>
        <a id="14837" class="Keyword">let</a> <a id="14841" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14841" class="Bound">Bs[k]&lt;:Cs[i]</a> <a id="14854" class="Symbol">=</a> <a id="14856" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14562" class="Bound">Bs&lt;:Cs</a> <a id="14863" class="Symbol">{</a><a id="14864" class="Bound">i</a><a id="14865" class="Symbol">}{</a><a id="14867" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14733" class="Bound">k</a><a id="14868" class="Symbol">}</a> <a id="14870" class="Symbol">(</a><a id="14871" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="14875" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14737" class="Bound">ns[i]=ms[k]</a><a id="14886" class="Symbol">)</a> <a id="14888" class="Keyword">in</a>
        <a id="14899" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14172" class="Function">&lt;:-trans</a> <a id="14908" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14765" class="Bound">As[j]&lt;:Bs[k]</a> <a id="14921" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14841" class="Bound">Bs[k]&lt;:Cs[i]</a>
</pre>{% endraw %}
The proof is by induction on the derivations of `A <: B` and `B <: C`.

* If both derivations end with `<:-nat`: then we immediately conclude that `ℕ <: ℕ`.

* If both derivations end with `<:-fun`:
  we have `A₁ ⇒ A₂ <: B₁ ⇒ B₂` and  `B₁ ⇒ B₂ <: C₁ ⇒ C₂`.
  So `A₁ <: B₁` and `B₁ <: C₁`, thus `A₁ <: C₁` by the induction hypothesis.
  We also have `A₂ <: B₂` and `B₂ <: C₂`, so by the induction hypothesis
  we have `A₂ <: C₂`. We conclude that `A₁ ⇒ A₂ <: C₁ ⇒ C₂` by rule `<:-fun`.

* If both derivations end with `<:-rcd`, so we have
  `｛ ls ⦂ As ｝ <: ｛ ms ⦂ Bs ｝` and `｛ ms ⦂ Bs ｝ <: ｛ ns ⦂ Cs ｝`.
  From `ls ⊆ ms` and `ms ⊆ ns` we have `ls ⊆ ns` because `⊆` is transitive.
  Next we need to prove that `ls ⦂ As <: ns ⦂ Cs`.
  Suppose `lookup ls j ≡ lookup ns i` for an arbitrary `i` and `j`.
  We need to prove that `lookup As j <: lookup Cs i`.
  By the induction hypothesis, it suffices to show
  that `lookup As j <: lookup Bs k` and `lookup Bs k <: lookup Cs i` for some `k`.
  We can obtain the former from `｛ ls ⦂ As ｝ <: ｛ ms ⦂ Bs ｝`
  if we can prove that `lookup ls j ≡ lookup ms k`.
  We already have `lookup ls j ≡ lookup ns i` and we
  obtain `lookup ns i ≡ lookup ms k` by use of the lemma `lookup-⊆`,
  noting that `ns ⊆ ms`. 
  We can obtain the later, that `lookup Bs k <: lookup Cs i`,
  from `｛ ms ⦂ Bs ｝ <: ｛ ns ⦂ Cs ｝`.
  It suffices to show that `lookup ms k ≡ lookup ns i`,
  which we have by symmetry.


## Contexts

We choose to represent variables with de Bruijn indices, so contexts
are sequences of types.

{% raw %}<pre class="Agda"><a id="16483" class="Keyword">data</a> <a id="Context"></a><a id="16488" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16488" class="Datatype">Context</a> <a id="16496" class="Symbol">:</a> <a id="16498" class="PrimitiveType">Set</a> <a id="16502" class="Keyword">where</a>
  <a id="Context.∅"></a><a id="16510" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16510" class="InductiveConstructor">∅</a>   <a id="16514" class="Symbol">:</a> <a id="16516" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16488" class="Datatype">Context</a>
  <a id="Context._,_"></a><a id="16526" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">_,_</a> <a id="16530" class="Symbol">:</a> <a id="16532" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16488" class="Datatype">Context</a> <a id="16540" class="Symbol">→</a> <a id="16542" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="16547" class="Symbol">→</a> <a id="16549" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16488" class="Datatype">Context</a>
</pre>{% endraw %}
## Variables and the lookup judgment

The lookup judgment is a three-place relation, with a context, a de
Bruijn index, and a type.

{% raw %}<pre class="Agda"><a id="16699" class="Keyword">data</a> <a id="_∋_⦂_"></a><a id="16704" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">_∋_⦂_</a> <a id="16710" class="Symbol">:</a> <a id="16712" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16488" class="Datatype">Context</a> <a id="16720" class="Symbol">→</a> <a id="16722" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a> <a id="16724" class="Symbol">→</a> <a id="16726" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="16731" class="Symbol">→</a> <a id="16733" class="PrimitiveType">Set</a> <a id="16737" class="Keyword">where</a>

  <a id="_∋_⦂_.Z"></a><a id="16746" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16746" class="InductiveConstructor">Z</a> <a id="16748" class="Symbol">:</a> <a id="16750" class="Symbol">∀</a> <a id="16752" class="Symbol">{</a><a id="16753" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16753" class="Bound">Γ</a> <a id="16755" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16755" class="Bound">A</a><a id="16756" class="Symbol">}</a>
      <a id="16764" class="Comment">------------------</a>
    <a id="16787" class="Symbol">→</a> <a id="16789" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16753" class="Bound">Γ</a> <a id="16791" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">,</a> <a id="16793" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16755" class="Bound">A</a> <a id="16795" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">∋</a> <a id="16797" class="Number">0</a> <a id="16799" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">⦂</a> <a id="16801" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16755" class="Bound">A</a>

  <a id="_∋_⦂_.S"></a><a id="16806" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16806" class="InductiveConstructor">S</a> <a id="16808" class="Symbol">:</a> <a id="16810" class="Symbol">∀</a> <a id="16812" class="Symbol">{</a><a id="16813" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16813" class="Bound">Γ</a> <a id="16815" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16815" class="Bound">x</a> <a id="16817" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16817" class="Bound">A</a> <a id="16819" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16819" class="Bound">B</a><a id="16820" class="Symbol">}</a>
    <a id="16826" class="Symbol">→</a> <a id="16828" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16813" class="Bound">Γ</a> <a id="16830" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">∋</a> <a id="16832" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16815" class="Bound">x</a> <a id="16834" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">⦂</a> <a id="16836" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16817" class="Bound">A</a>
      <a id="16844" class="Comment">------------------</a>
    <a id="16867" class="Symbol">→</a> <a id="16869" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16813" class="Bound">Γ</a> <a id="16871" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">,</a> <a id="16873" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16819" class="Bound">B</a> <a id="16875" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">∋</a> <a id="16877" class="Symbol">(</a><a id="16878" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="16882" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16815" class="Bound">x</a><a id="16883" class="Symbol">)</a> <a id="16885" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">⦂</a> <a id="16887" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16817" class="Bound">A</a>
</pre>{% endraw %}
* The index `0` has the type at the front of the context.

* For the index `suc x`, we recursively look up its type in the
  remaining context `Γ`.


## Terms and the typing judgment

As mentioned above, variables are de Bruijn indices, which we
represent with natural numbers.

{% raw %}<pre class="Agda"><a id="Id"></a><a id="17177" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="17180" class="Symbol">:</a> <a id="17182" class="PrimitiveType">Set</a>
<a id="17186" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="17189" class="Symbol">=</a> <a id="17191" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>
</pre>{% endraw %}
Our terms are extrinsic, so we define a `Term` data type similar to
the one in the [Lambda]({{ site.baseurl }}/Lambda/) chapter, but adapted for de
Bruijn indices.  The two new term constructors are for record creation
and field access.

{% raw %}<pre class="Agda"><a id="17440" class="Keyword">data</a> <a id="Term"></a><a id="17445" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="17450" class="Symbol">:</a> <a id="17452" class="PrimitiveType">Set</a> <a id="17456" class="Keyword">where</a>
  <a id="Term.`_"></a><a id="17464" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17464" class="InductiveConstructor Operator">`_</a>                      <a id="17488" class="Symbol">:</a> <a id="17490" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="17493" class="Symbol">→</a> <a id="17495" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a>
  <a id="Term.ƛ_"></a><a id="17502" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17502" class="InductiveConstructor Operator">ƛ_</a>                      <a id="17526" class="Symbol">:</a> <a id="17528" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="17533" class="Symbol">→</a> <a id="17535" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a>
  <a id="Term._·_"></a><a id="17542" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17542" class="InductiveConstructor Operator">_·_</a>                     <a id="17566" class="Symbol">:</a> <a id="17568" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="17573" class="Symbol">→</a> <a id="17575" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="17580" class="Symbol">→</a> <a id="17582" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a>
  <a id="Term.`zero"></a><a id="17589" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17589" class="InductiveConstructor">`zero</a>                   <a id="17613" class="Symbol">:</a> <a id="17615" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a>
  <a id="Term.`suc_"></a><a id="17622" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17622" class="InductiveConstructor Operator">`suc_</a>                   <a id="17646" class="Symbol">:</a> <a id="17648" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="17653" class="Symbol">→</a> <a id="17655" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a>
  <a id="Term.case_[zero⇒_|suc⇒_]"></a><a id="17662" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">case_[zero⇒_|suc⇒_]</a>     <a id="17686" class="Symbol">:</a> <a id="17688" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="17693" class="Symbol">→</a> <a id="17695" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="17700" class="Symbol">→</a> <a id="17702" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="17707" class="Symbol">→</a> <a id="17709" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a>
  <a id="Term.μ_"></a><a id="17716" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17716" class="InductiveConstructor Operator">μ_</a>                      <a id="17740" class="Symbol">:</a> <a id="17742" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="17747" class="Symbol">→</a> <a id="17749" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a>
  <a id="Term.｛_:=_｝"></a><a id="17756" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｛_:=_｝</a>                 <a id="17779" class="Symbol">:</a> <a id="17781" class="Symbol">{</a><a id="17782" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17782" class="Bound">n</a> <a id="17784" class="Symbol">:</a> <a id="17786" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="17787" class="Symbol">}</a> <a id="17789" class="Symbol">(</a><a id="17790" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17790" class="Bound">ls</a> <a id="17793" class="Symbol">:</a> <a id="17795" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="17799" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="17804" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17782" class="Bound">n</a><a id="17805" class="Symbol">)</a> <a id="17807" class="Symbol">(</a><a id="17808" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17808" class="Bound">Ms</a> <a id="17811" class="Symbol">:</a> <a id="17813" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="17817" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="17822" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17782" class="Bound">n</a><a id="17823" class="Symbol">)</a> <a id="17825" class="Symbol">→</a> <a id="17827" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a>
  <a id="Term._#_"></a><a id="17834" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17834" class="InductiveConstructor Operator">_#_</a>                     <a id="17858" class="Symbol">:</a> <a id="17860" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="17865" class="Symbol">→</a> <a id="17867" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="17872" class="Symbol">→</a> <a id="17874" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a>
</pre>{% endraw %}
In a record `｛ ls := Ms ｝`, we refer to the vector of terms `Ms` as
the *field initializers*.

The typing judgment takes the form `Γ ⊢ M ⦂ A` and relies on an
auxiliary judgment `Γ ⊢* Ms ⦂ As` for typing a vector of terms.

{% raw %}<pre class="Agda"><a id="18112" class="Keyword">data</a> <a id="_⊢*_⦂_"></a><a id="18117" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">_⊢*_⦂_</a> <a id="18124" class="Symbol">:</a> <a id="18126" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16488" class="Datatype">Context</a> <a id="18134" class="Symbol">→</a> <a id="18136" class="Symbol">∀</a> <a id="18138" class="Symbol">{</a><a id="18139" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18139" class="Bound">n</a><a id="18140" class="Symbol">}</a> <a id="18142" class="Symbol">→</a> <a id="18144" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="18148" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="18153" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18139" class="Bound">n</a> <a id="18155" class="Symbol">→</a> <a id="18157" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="18161" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="18166" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18139" class="Bound">n</a> <a id="18168" class="Symbol">→</a> <a id="18170" class="PrimitiveType">Set</a> 

<a id="18176" class="Keyword">data</a> <a id="_⊢_⦂_"></a><a id="18181" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">_⊢_⦂_</a> <a id="18187" class="Symbol">:</a> <a id="18189" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16488" class="Datatype">Context</a> <a id="18197" class="Symbol">→</a> <a id="18199" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="18204" class="Symbol">→</a> <a id="18206" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="18211" class="Symbol">→</a> <a id="18213" class="PrimitiveType">Set</a> <a id="18217" class="Keyword">where</a>

  <a id="_⊢_⦂_.⊢`"></a><a id="18226" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18226" class="InductiveConstructor">⊢`</a> <a id="18229" class="Symbol">:</a> <a id="18231" class="Symbol">∀</a> <a id="18233" class="Symbol">{</a><a id="18234" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18234" class="Bound">Γ</a> <a id="18236" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18236" class="Bound">x</a> <a id="18238" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18238" class="Bound">A</a><a id="18239" class="Symbol">}</a>
    <a id="18245" class="Symbol">→</a> <a id="18247" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18234" class="Bound">Γ</a> <a id="18249" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">∋</a> <a id="18251" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18236" class="Bound">x</a> <a id="18253" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">⦂</a> <a id="18255" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18238" class="Bound">A</a>
      <a id="18263" class="Comment">-----------</a>
    <a id="18279" class="Symbol">→</a> <a id="18281" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18234" class="Bound">Γ</a> <a id="18283" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18285" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17464" class="InductiveConstructor Operator">`</a> <a id="18287" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18236" class="Bound">x</a> <a id="18289" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18291" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18238" class="Bound">A</a>

  <a id="_⊢_⦂_.⊢ƛ"></a><a id="18296" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18296" class="InductiveConstructor">⊢ƛ</a>  <a id="18300" class="Symbol">:</a> <a id="18302" class="Symbol">∀</a> <a id="18304" class="Symbol">{</a><a id="18305" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18305" class="Bound">Γ</a> <a id="18307" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18307" class="Bound">A</a> <a id="18309" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18309" class="Bound">B</a> <a id="18311" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18311" class="Bound">N</a><a id="18312" class="Symbol">}</a>
    <a id="18318" class="Symbol">→</a> <a id="18320" class="Symbol">(</a><a id="18321" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18305" class="Bound">Γ</a> <a id="18323" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">,</a> <a id="18325" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18307" class="Bound">A</a><a id="18326" class="Symbol">)</a> <a id="18328" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18330" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18311" class="Bound">N</a> <a id="18332" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18334" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18309" class="Bound">B</a>
      <a id="18342" class="Comment">---------------</a>
    <a id="18362" class="Symbol">→</a> <a id="18364" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18305" class="Bound">Γ</a> <a id="18366" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18368" class="Symbol">(</a><a id="18369" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17502" class="InductiveConstructor Operator">ƛ</a> <a id="18371" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18311" class="Bound">N</a><a id="18372" class="Symbol">)</a> <a id="18374" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18376" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18307" class="Bound">A</a> <a id="18378" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="18380" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18309" class="Bound">B</a>

  <a id="_⊢_⦂_.⊢·"></a><a id="18385" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18385" class="InductiveConstructor">⊢·</a> <a id="18388" class="Symbol">:</a> <a id="18390" class="Symbol">∀</a> <a id="18392" class="Symbol">{</a><a id="18393" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18393" class="Bound">Γ</a> <a id="18395" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18395" class="Bound">A</a> <a id="18397" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18397" class="Bound">B</a> <a id="18399" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18399" class="Bound">L</a> <a id="18401" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18401" class="Bound">M</a><a id="18402" class="Symbol">}</a>
    <a id="18408" class="Symbol">→</a> <a id="18410" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18393" class="Bound">Γ</a> <a id="18412" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18414" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18399" class="Bound">L</a> <a id="18416" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18418" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18395" class="Bound">A</a> <a id="18420" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="18422" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18397" class="Bound">B</a>
    <a id="18428" class="Symbol">→</a> <a id="18430" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18393" class="Bound">Γ</a> <a id="18432" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18434" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18401" class="Bound">M</a> <a id="18436" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18438" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18395" class="Bound">A</a>
      <a id="18446" class="Comment">-------------</a>
    <a id="18464" class="Symbol">→</a> <a id="18466" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18393" class="Bound">Γ</a> <a id="18468" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18470" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18399" class="Bound">L</a> <a id="18472" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17542" class="InductiveConstructor Operator">·</a> <a id="18474" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18401" class="Bound">M</a> <a id="18476" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18478" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18397" class="Bound">B</a>

  <a id="_⊢_⦂_.⊢zero"></a><a id="18483" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18483" class="InductiveConstructor">⊢zero</a> <a id="18489" class="Symbol">:</a> <a id="18491" class="Symbol">∀</a> <a id="18493" class="Symbol">{</a><a id="18494" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18494" class="Bound">Γ</a><a id="18495" class="Symbol">}</a>
      <a id="18503" class="Comment">--------------</a>
    <a id="18522" class="Symbol">→</a> <a id="18524" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18494" class="Bound">Γ</a> <a id="18526" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18528" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17589" class="InductiveConstructor">`zero</a> <a id="18534" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18536" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a>

  <a id="_⊢_⦂_.⊢suc"></a><a id="18542" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18542" class="InductiveConstructor">⊢suc</a> <a id="18547" class="Symbol">:</a> <a id="18549" class="Symbol">∀</a> <a id="18551" class="Symbol">{</a><a id="18552" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18552" class="Bound">Γ</a> <a id="18554" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18554" class="Bound">M</a><a id="18555" class="Symbol">}</a>
    <a id="18561" class="Symbol">→</a> <a id="18563" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18552" class="Bound">Γ</a> <a id="18565" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18567" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18554" class="Bound">M</a> <a id="18569" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18571" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a>
      <a id="18580" class="Comment">---------------</a>
    <a id="18600" class="Symbol">→</a> <a id="18602" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18552" class="Bound">Γ</a> <a id="18604" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18606" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17622" class="InductiveConstructor Operator">`suc</a> <a id="18611" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18554" class="Bound">M</a> <a id="18613" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18615" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a>

  <a id="_⊢_⦂_.⊢case"></a><a id="18621" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18621" class="InductiveConstructor">⊢case</a> <a id="18627" class="Symbol">:</a> <a id="18629" class="Symbol">∀</a> <a id="18631" class="Symbol">{</a><a id="18632" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18632" class="Bound">Γ</a> <a id="18634" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18634" class="Bound">A</a> <a id="18636" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18636" class="Bound">L</a> <a id="18638" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18638" class="Bound">M</a> <a id="18640" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18640" class="Bound">N</a><a id="18641" class="Symbol">}</a>
    <a id="18647" class="Symbol">→</a> <a id="18649" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18632" class="Bound">Γ</a> <a id="18651" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18653" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18636" class="Bound">L</a> <a id="18655" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18657" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a>
    <a id="18664" class="Symbol">→</a> <a id="18666" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18632" class="Bound">Γ</a> <a id="18668" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18670" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18638" class="Bound">M</a> <a id="18672" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18674" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18634" class="Bound">A</a>
    <a id="18680" class="Symbol">→</a> <a id="18682" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18632" class="Bound">Γ</a> <a id="18684" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">,</a> <a id="18686" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a> <a id="18689" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18691" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18640" class="Bound">N</a> <a id="18693" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18695" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18634" class="Bound">A</a>
      <a id="18703" class="Comment">---------------------------------</a>
    <a id="18741" class="Symbol">→</a> <a id="18743" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18632" class="Bound">Γ</a> <a id="18745" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18747" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">case</a> <a id="18752" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18636" class="Bound">L</a> <a id="18754" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">[zero⇒</a> <a id="18761" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18638" class="Bound">M</a> <a id="18763" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">|suc⇒</a> <a id="18769" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18640" class="Bound">N</a> <a id="18771" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">]</a> <a id="18773" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18775" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18634" class="Bound">A</a>

  <a id="_⊢_⦂_.⊢μ"></a><a id="18780" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18780" class="InductiveConstructor">⊢μ</a> <a id="18783" class="Symbol">:</a> <a id="18785" class="Symbol">∀</a> <a id="18787" class="Symbol">{</a><a id="18788" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18788" class="Bound">Γ</a> <a id="18790" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18790" class="Bound">A</a> <a id="18792" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18792" class="Bound">M</a><a id="18793" class="Symbol">}</a>
    <a id="18799" class="Symbol">→</a> <a id="18801" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18788" class="Bound">Γ</a> <a id="18803" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">,</a> <a id="18805" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18790" class="Bound">A</a> <a id="18807" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18809" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18792" class="Bound">M</a> <a id="18811" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18813" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18790" class="Bound">A</a>
      <a id="18821" class="Comment">-------------</a>
    <a id="18839" class="Symbol">→</a> <a id="18841" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18788" class="Bound">Γ</a> <a id="18843" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18845" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17716" class="InductiveConstructor Operator">μ</a> <a id="18847" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18792" class="Bound">M</a> <a id="18849" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18851" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18790" class="Bound">A</a>

  <a id="_⊢_⦂_.⊢rcd"></a><a id="18856" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18856" class="InductiveConstructor">⊢rcd</a> <a id="18861" class="Symbol">:</a> <a id="18863" class="Symbol">∀</a> <a id="18865" class="Symbol">{</a><a id="18866" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18866" class="Bound">Γ</a> <a id="18868" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18868" class="Bound">n</a><a id="18869" class="Symbol">}{</a><a id="18871" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18871" class="Bound">Ms</a> <a id="18874" class="Symbol">:</a> <a id="18876" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="18880" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="18885" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18868" class="Bound">n</a><a id="18886" class="Symbol">}{</a><a id="18888" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18888" class="Bound">As</a> <a id="18891" class="Symbol">:</a> <a id="18893" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="18897" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="18902" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18868" class="Bound">n</a><a id="18903" class="Symbol">}{</a><a id="18905" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18905" class="Bound">ls</a> <a id="18908" class="Symbol">:</a> <a id="18910" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="18914" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="18919" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18868" class="Bound">n</a><a id="18920" class="Symbol">}</a>
     <a id="18927" class="Symbol">→</a> <a id="18929" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18866" class="Bound">Γ</a> <a id="18931" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⊢*</a> <a id="18934" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18871" class="Bound">Ms</a> <a id="18937" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⦂</a> <a id="18939" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18888" class="Bound">As</a>
     <a id="18947" class="Symbol">→</a> <a id="18949" class="Symbol">(</a><a id="18950" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18950" class="Bound">d</a> <a id="18952" class="Symbol">:</a> <a id="18954" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="18963" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18905" class="Bound">ls</a><a id="18965" class="Symbol">)</a>
     <a id="18972" class="Symbol">→</a> <a id="18974" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18866" class="Bound">Γ</a> <a id="18976" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="18978" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｛</a> <a id="18980" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18905" class="Bound">ls</a> <a id="18983" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">:=</a> <a id="18986" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18871" class="Bound">Ms</a> <a id="18989" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｝</a> <a id="18991" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="18993" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="18995" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18905" class="Bound">ls</a> <a id="18998" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="19000" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18888" class="Bound">As</a> <a id="19003" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a> <a id="19005" class="Symbol">{</a><a id="19006" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18950" class="Bound">d</a><a id="19007" class="Symbol">}</a>


  <a id="_⊢_⦂_.⊢#"></a><a id="19013" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19013" class="InductiveConstructor">⊢#</a> <a id="19016" class="Symbol">:</a> <a id="19018" class="Symbol">∀</a> <a id="19020" class="Symbol">{</a><a id="19021" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19021" class="Bound">n</a> <a id="19023" class="Symbol">:</a> <a id="19025" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="19026" class="Symbol">}{</a><a id="19028" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19028" class="Bound">Γ</a> <a id="19030" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19030" class="Bound">A</a> <a id="19032" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19032" class="Bound">M</a> <a id="19034" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19034" class="Bound">l</a><a id="19035" class="Symbol">}{</a><a id="19037" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19037" class="Bound">ls</a> <a id="19040" class="Symbol">:</a> <a id="19042" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="19046" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="19051" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19021" class="Bound">n</a><a id="19052" class="Symbol">}{</a><a id="19054" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19054" class="Bound">As</a> <a id="19057" class="Symbol">:</a> <a id="19059" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="19063" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="19068" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19021" class="Bound">n</a><a id="19069" class="Symbol">}{</a><a id="19071" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19071" class="Bound">i</a><a id="19072" class="Symbol">}{</a><a id="19074" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19074" class="Bound">d</a><a id="19075" class="Symbol">}</a>
     <a id="19082" class="Symbol">→</a> <a id="19084" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19028" class="Bound">Γ</a> <a id="19086" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="19088" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19032" class="Bound">M</a> <a id="19090" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="19092" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="19094" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19037" class="Bound">ls</a> <a id="19097" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="19099" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19054" class="Bound">As</a> <a id="19102" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a><a id="19103" class="Symbol">{</a><a id="19104" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19074" class="Bound">d</a><a id="19105" class="Symbol">}</a>
     <a id="19112" class="Symbol">→</a> <a id="19114" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="19121" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19037" class="Bound">ls</a> <a id="19124" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19071" class="Bound">i</a> <a id="19126" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="19128" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19034" class="Bound">l</a>
     <a id="19135" class="Symbol">→</a> <a id="19137" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="19144" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19054" class="Bound">As</a> <a id="19147" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19071" class="Bound">i</a> <a id="19149" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="19151" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19030" class="Bound">A</a>
     <a id="19158" class="Symbol">→</a> <a id="19160" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19028" class="Bound">Γ</a> <a id="19162" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="19164" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19032" class="Bound">M</a> <a id="19166" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17834" class="InductiveConstructor Operator">#</a> <a id="19168" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19034" class="Bound">l</a> <a id="19170" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="19172" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19030" class="Bound">A</a>

  <a id="_⊢_⦂_.⊢&lt;:"></a><a id="19177" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="19181" class="Symbol">:</a> <a id="19183" class="Symbol">∀{</a><a id="19185" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19185" class="Bound">Γ</a> <a id="19187" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19187" class="Bound">M</a> <a id="19189" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19189" class="Bound">A</a> <a id="19191" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19191" class="Bound">B</a><a id="19192" class="Symbol">}</a>
    <a id="19198" class="Symbol">→</a> <a id="19200" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19185" class="Bound">Γ</a> <a id="19202" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="19204" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19187" class="Bound">M</a> <a id="19206" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="19208" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19189" class="Bound">A</a>   <a id="19212" class="Symbol">→</a> <a id="19214" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19189" class="Bound">A</a> <a id="19216" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="19219" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19191" class="Bound">B</a>
      <a id="19227" class="Comment">--------------------</a>
    <a id="19252" class="Symbol">→</a> <a id="19254" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19185" class="Bound">Γ</a> <a id="19256" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="19258" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19187" class="Bound">M</a> <a id="19260" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="19262" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19191" class="Bound">B</a>

<a id="19265" class="Keyword">data</a> <a id="19270" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">_⊢*_⦂_</a> <a id="19277" class="Keyword">where</a>
  <a id="_⊢*_⦂_.⊢*-[]"></a><a id="19285" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19285" class="InductiveConstructor">⊢*-[]</a> <a id="19291" class="Symbol">:</a> <a id="19293" class="Symbol">∀{</a><a id="19295" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19295" class="Bound">Γ</a><a id="19296" class="Symbol">}</a> <a id="19298" class="Symbol">→</a> <a id="19300" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19295" class="Bound">Γ</a> <a id="19302" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⊢*</a> <a id="19305" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a> <a id="19308" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⦂</a> <a id="19310" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a>

  <a id="_⊢*_⦂_.⊢*-∷"></a><a id="19316" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19316" class="InductiveConstructor">⊢*-∷</a> <a id="19321" class="Symbol">:</a> <a id="19323" class="Symbol">∀</a> <a id="19325" class="Symbol">{</a><a id="19326" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19326" class="Bound">n</a><a id="19327" class="Symbol">}{</a><a id="19329" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19329" class="Bound">Γ</a> <a id="19331" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19331" class="Bound">M</a><a id="19332" class="Symbol">}{</a><a id="19334" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19334" class="Bound">Ms</a> <a id="19337" class="Symbol">:</a> <a id="19339" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="19343" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="19348" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19326" class="Bound">n</a><a id="19349" class="Symbol">}{</a><a id="19351" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19351" class="Bound">A</a><a id="19352" class="Symbol">}{</a><a id="19354" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19354" class="Bound">As</a> <a id="19357" class="Symbol">:</a> <a id="19359" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="19363" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="19368" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19326" class="Bound">n</a><a id="19369" class="Symbol">}</a>
     <a id="19376" class="Symbol">→</a> <a id="19378" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19329" class="Bound">Γ</a> <a id="19380" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="19382" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19331" class="Bound">M</a> <a id="19384" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="19386" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19351" class="Bound">A</a>
     <a id="19393" class="Symbol">→</a> <a id="19395" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19329" class="Bound">Γ</a> <a id="19397" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⊢*</a> <a id="19400" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19334" class="Bound">Ms</a> <a id="19403" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⦂</a> <a id="19405" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19354" class="Bound">As</a>
     <a id="19413" class="Symbol">→</a> <a id="19415" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19329" class="Bound">Γ</a> <a id="19417" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⊢*</a> <a id="19420" class="Symbol">(</a><a id="19421" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19331" class="Bound">M</a> <a id="19423" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="19425" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19334" class="Bound">Ms</a><a id="19427" class="Symbol">)</a> <a id="19429" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⦂</a> <a id="19431" class="Symbol">(</a><a id="19432" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19351" class="Bound">A</a> <a id="19434" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="19436" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19354" class="Bound">As</a><a id="19438" class="Symbol">)</a>
</pre>{% endraw %}
Most of the typing rules are adapted from those in the [Lambda]({{ site.baseurl }}/Lambda/)
chapter. Here we discuss the three new rules.

* Rule `⊢rcd`: A record is well-typed if the field initializers `Ms`
  have types `As`, to match the record type. Also, the vector of field
  names is required to be distinct.

* Rule `⊢#`: A field access is well-typed if the term `M` has record type,
  the field `l` is at some index `i` in the record type's vector of field names,
  and the result type `A` is at index `i` in the vector of field types.

* Rule `⊢<:`: (Subsumption) If a term `M` has type `A`, and `A <: B`,
  then term `M` also has type `B`.
  

## Renaming and Substitution

In preparation of defining the reduction rules for this language, we
define simultaneous substitution using the same recipe as in the
[DeBruijn]({{ site.baseurl }}/DeBruijn/) chapter, but adapted to extrinsic
terms. Thus, the `subst` function is split into two parts: a raw
`subst` function that operators on terms and a `subst-pres` lemma that
proves that substitution preserves types. We define `subst` in this
section and postpone `subst-pres` to the
[Preservation](#subtyping-preservation) section.  Likewise for `rename`.

We begin by defining the `ext` function on renamings.
{% raw %}<pre class="Agda"><a id="ext"></a><a id="20715" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20715" class="Function">ext</a> <a id="20719" class="Symbol">:</a> <a id="20721" class="Symbol">(</a><a id="20722" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="20725" class="Symbol">→</a> <a id="20727" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a><a id="20729" class="Symbol">)</a> <a id="20731" class="Symbol">→</a> <a id="20733" class="Symbol">(</a><a id="20734" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="20737" class="Symbol">→</a> <a id="20739" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a><a id="20741" class="Symbol">)</a>
<a id="20743" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20715" class="Function">ext</a> <a id="20747" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20747" class="Bound">ρ</a> <a id="20749" class="Number">0</a>      <a id="20756" class="Symbol">=</a>  <a id="20759" class="Number">0</a>
<a id="20761" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20715" class="Function">ext</a> <a id="20765" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20765" class="Bound">ρ</a> <a id="20767" class="Symbol">(</a><a id="20768" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="20772" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20772" class="Bound">x</a><a id="20773" class="Symbol">)</a>  <a id="20776" class="Symbol">=</a>  <a id="20779" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="20783" class="Symbol">(</a><a id="20784" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20765" class="Bound">ρ</a> <a id="20786" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20772" class="Bound">x</a><a id="20787" class="Symbol">)</a>
</pre>{% endraw %}
The `rename` function is defined mutually with the auxiliary
`rename-vec` function, which is needed in the case for records.
{% raw %}<pre class="Agda"><a id="rename-vec"></a><a id="20923" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20923" class="Function">rename-vec</a> <a id="20934" class="Symbol">:</a> <a id="20936" class="Symbol">(</a><a id="20937" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="20940" class="Symbol">→</a> <a id="20942" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a><a id="20944" class="Symbol">)</a> <a id="20946" class="Symbol">→</a> <a id="20948" class="Symbol">∀{</a><a id="20950" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20950" class="Bound">n</a><a id="20951" class="Symbol">}</a> <a id="20953" class="Symbol">→</a> <a id="20955" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="20959" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="20964" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20950" class="Bound">n</a> <a id="20966" class="Symbol">→</a> <a id="20968" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="20972" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="20977" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20950" class="Bound">n</a>

<a id="rename"></a><a id="20980" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="20987" class="Symbol">:</a> <a id="20989" class="Symbol">(</a><a id="20990" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="20993" class="Symbol">→</a> <a id="20995" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a><a id="20997" class="Symbol">)</a> <a id="20999" class="Symbol">→</a> <a id="21001" class="Symbol">(</a><a id="21002" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="21007" class="Symbol">→</a> <a id="21009" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="21013" class="Symbol">)</a>
<a id="21015" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21022" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21022" class="Bound">ρ</a> <a id="21024" class="Symbol">(</a><a id="21025" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17464" class="InductiveConstructor Operator">`</a> <a id="21027" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21027" class="Bound">x</a><a id="21028" class="Symbol">)</a>          <a id="21039" class="Symbol">=</a>  <a id="21042" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17464" class="InductiveConstructor Operator">`</a> <a id="21044" class="Symbol">(</a><a id="21045" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21022" class="Bound">ρ</a> <a id="21047" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21027" class="Bound">x</a><a id="21048" class="Symbol">)</a>
<a id="21050" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21057" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21057" class="Bound">ρ</a> <a id="21059" class="Symbol">(</a><a id="21060" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17502" class="InductiveConstructor Operator">ƛ</a> <a id="21062" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21062" class="Bound">N</a><a id="21063" class="Symbol">)</a>          <a id="21074" class="Symbol">=</a>  <a id="21077" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17502" class="InductiveConstructor Operator">ƛ</a> <a id="21079" class="Symbol">(</a><a id="21080" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21087" class="Symbol">(</a><a id="21088" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20715" class="Function">ext</a> <a id="21092" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21057" class="Bound">ρ</a><a id="21093" class="Symbol">)</a> <a id="21095" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21062" class="Bound">N</a><a id="21096" class="Symbol">)</a>
<a id="21098" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21105" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21105" class="Bound">ρ</a> <a id="21107" class="Symbol">(</a><a id="21108" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21108" class="Bound">L</a> <a id="21110" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17542" class="InductiveConstructor Operator">·</a> <a id="21112" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21112" class="Bound">M</a><a id="21113" class="Symbol">)</a>        <a id="21122" class="Symbol">=</a>  <a id="21125" class="Symbol">(</a><a id="21126" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21133" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21105" class="Bound">ρ</a> <a id="21135" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21108" class="Bound">L</a><a id="21136" class="Symbol">)</a> <a id="21138" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17542" class="InductiveConstructor Operator">·</a> <a id="21140" class="Symbol">(</a><a id="21141" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21148" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21105" class="Bound">ρ</a> <a id="21150" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21112" class="Bound">M</a><a id="21151" class="Symbol">)</a>
<a id="21153" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21160" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21160" class="Bound">ρ</a> <a id="21162" class="Symbol">(</a><a id="21163" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17589" class="InductiveConstructor">`zero</a><a id="21168" class="Symbol">)</a>        <a id="21177" class="Symbol">=</a>  <a id="21180" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17589" class="InductiveConstructor">`zero</a>
<a id="21186" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21193" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21193" class="Bound">ρ</a> <a id="21195" class="Symbol">(</a><a id="21196" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17622" class="InductiveConstructor Operator">`suc</a> <a id="21201" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21201" class="Bound">M</a><a id="21202" class="Symbol">)</a>       <a id="21210" class="Symbol">=</a>  <a id="21213" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17622" class="InductiveConstructor Operator">`suc</a> <a id="21218" class="Symbol">(</a><a id="21219" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21226" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21193" class="Bound">ρ</a> <a id="21228" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21201" class="Bound">M</a><a id="21229" class="Symbol">)</a>
<a id="21231" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21238" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21238" class="Bound">ρ</a> <a id="21240" class="Symbol">(</a><a id="21241" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">case</a> <a id="21246" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21246" class="Bound">L</a> <a id="21248" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">[zero⇒</a> <a id="21255" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21255" class="Bound">M</a> <a id="21257" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">|suc⇒</a> <a id="21263" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21263" class="Bound">N</a> <a id="21265" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">]</a><a id="21266" class="Symbol">)</a> <a id="21268" class="Symbol">=</a>
    <a id="21274" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">case</a> <a id="21279" class="Symbol">(</a><a id="21280" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21287" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21238" class="Bound">ρ</a> <a id="21289" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21246" class="Bound">L</a><a id="21290" class="Symbol">)</a> <a id="21292" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">[zero⇒</a> <a id="21299" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21306" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21238" class="Bound">ρ</a> <a id="21308" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21255" class="Bound">M</a> <a id="21310" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">|suc⇒</a> <a id="21316" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21323" class="Symbol">(</a><a id="21324" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20715" class="Function">ext</a> <a id="21328" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21238" class="Bound">ρ</a><a id="21329" class="Symbol">)</a> <a id="21331" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21263" class="Bound">N</a> <a id="21333" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">]</a>
<a id="21335" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21342" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21342" class="Bound">ρ</a> <a id="21344" class="Symbol">(</a><a id="21345" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17716" class="InductiveConstructor Operator">μ</a> <a id="21347" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21347" class="Bound">N</a><a id="21348" class="Symbol">)</a>          <a id="21359" class="Symbol">=</a>  <a id="21362" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17716" class="InductiveConstructor Operator">μ</a> <a id="21364" class="Symbol">(</a><a id="21365" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21372" class="Symbol">(</a><a id="21373" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20715" class="Function">ext</a> <a id="21377" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21342" class="Bound">ρ</a><a id="21378" class="Symbol">)</a> <a id="21380" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21347" class="Bound">N</a><a id="21381" class="Symbol">)</a>
<a id="21383" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21390" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21390" class="Bound">ρ</a> <a id="21392" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｛</a> <a id="21394" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21394" class="Bound">ls</a> <a id="21397" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">:=</a> <a id="21400" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21400" class="Bound">Ms</a> <a id="21403" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｝</a> <a id="21405" class="Symbol">=</a> <a id="21407" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｛</a> <a id="21409" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21394" class="Bound">ls</a> <a id="21412" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">:=</a> <a id="21415" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20923" class="Function">rename-vec</a> <a id="21426" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21390" class="Bound">ρ</a> <a id="21428" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21400" class="Bound">Ms</a> <a id="21431" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｝</a>
<a id="21433" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21440" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21440" class="Bound">ρ</a> <a id="21442" class="Symbol">(</a><a id="21443" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21443" class="Bound">M</a> <a id="21445" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17834" class="InductiveConstructor Operator">#</a> <a id="21447" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21447" class="Bound">l</a><a id="21448" class="Symbol">)</a>       <a id="21456" class="Symbol">=</a> <a id="21458" class="Symbol">(</a><a id="21459" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21466" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21440" class="Bound">ρ</a> <a id="21468" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21443" class="Bound">M</a><a id="21469" class="Symbol">)</a> <a id="21471" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17834" class="InductiveConstructor Operator">#</a> <a id="21473" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21447" class="Bound">l</a>

<a id="21476" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20923" class="Function">rename-vec</a> <a id="21487" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21487" class="Bound">ρ</a> <a id="21489" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a> <a id="21492" class="Symbol">=</a> <a id="21494" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a>
<a id="21497" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20923" class="Function">rename-vec</a> <a id="21508" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21508" class="Bound">ρ</a> <a id="21510" class="Symbol">(</a><a id="21511" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21511" class="Bound">M</a> <a id="21513" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="21515" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21515" class="Bound">Ms</a><a id="21517" class="Symbol">)</a> <a id="21519" class="Symbol">=</a> <a id="21521" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21528" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21508" class="Bound">ρ</a> <a id="21530" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21511" class="Bound">M</a> <a id="21532" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="21534" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20923" class="Function">rename-vec</a> <a id="21545" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21508" class="Bound">ρ</a> <a id="21547" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21515" class="Bound">Ms</a>
</pre>{% endraw %}
With the `rename` function in hand, we can define the `exts` function
on substitutions.
{% raw %}<pre class="Agda"><a id="exts"></a><a id="21647" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21647" class="Function">exts</a> <a id="21652" class="Symbol">:</a> <a id="21654" class="Symbol">(</a><a id="21655" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="21658" class="Symbol">→</a> <a id="21660" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="21664" class="Symbol">)</a> <a id="21666" class="Symbol">→</a> <a id="21668" class="Symbol">(</a><a id="21669" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="21672" class="Symbol">→</a> <a id="21674" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="21678" class="Symbol">)</a>
<a id="21680" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21647" class="Function">exts</a> <a id="21685" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21685" class="Bound">σ</a> <a id="21687" class="Number">0</a>      <a id="21694" class="Symbol">=</a>  <a id="21697" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17464" class="InductiveConstructor Operator">`</a> <a id="21699" class="Number">0</a>
<a id="21701" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21647" class="Function">exts</a> <a id="21706" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21706" class="Bound">σ</a> <a id="21708" class="Symbol">(</a><a id="21709" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="21713" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21713" class="Bound">x</a><a id="21714" class="Symbol">)</a>  <a id="21717" class="Symbol">=</a>  <a id="21720" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="21727" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="21731" class="Symbol">(</a><a id="21732" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21706" class="Bound">σ</a> <a id="21734" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21713" class="Bound">x</a><a id="21735" class="Symbol">)</a>
</pre>{% endraw %}
We define `subst` mutually with the auxiliary `subst-vec` function,
which is needed in the case for records.
{% raw %}<pre class="Agda"><a id="subst-vec"></a><a id="21855" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21855" class="Function">subst-vec</a> <a id="21865" class="Symbol">:</a> <a id="21867" class="Symbol">(</a><a id="21868" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="21871" class="Symbol">→</a> <a id="21873" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="21877" class="Symbol">)</a> <a id="21879" class="Symbol">→</a> <a id="21881" class="Symbol">∀{</a><a id="21883" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21883" class="Bound">n</a><a id="21884" class="Symbol">}</a> <a id="21886" class="Symbol">→</a> <a id="21888" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="21892" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="21897" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21883" class="Bound">n</a> <a id="21899" class="Symbol">→</a> <a id="21901" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="21905" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="21910" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21883" class="Bound">n</a>

<a id="subst"></a><a id="21913" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="21919" class="Symbol">:</a> <a id="21921" class="Symbol">(</a><a id="21922" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="21925" class="Symbol">→</a> <a id="21927" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="21931" class="Symbol">)</a> <a id="21933" class="Symbol">→</a> <a id="21935" class="Symbol">(</a><a id="21936" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="21941" class="Symbol">→</a> <a id="21943" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="21947" class="Symbol">)</a>
<a id="21949" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="21955" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21955" class="Bound">σ</a> <a id="21957" class="Symbol">(</a><a id="21958" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17464" class="InductiveConstructor Operator">`</a> <a id="21960" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21960" class="Bound">k</a><a id="21961" class="Symbol">)</a>          <a id="21972" class="Symbol">=</a>  <a id="21975" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21955" class="Bound">σ</a> <a id="21977" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21960" class="Bound">k</a>
<a id="21979" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="21985" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21985" class="Bound">σ</a> <a id="21987" class="Symbol">(</a><a id="21988" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17502" class="InductiveConstructor Operator">ƛ</a> <a id="21990" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21990" class="Bound">N</a><a id="21991" class="Symbol">)</a>          <a id="22002" class="Symbol">=</a>  <a id="22005" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17502" class="InductiveConstructor Operator">ƛ</a> <a id="22007" class="Symbol">(</a><a id="22008" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22014" class="Symbol">(</a><a id="22015" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21647" class="Function">exts</a> <a id="22020" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21985" class="Bound">σ</a><a id="22021" class="Symbol">)</a> <a id="22023" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21990" class="Bound">N</a><a id="22024" class="Symbol">)</a>
<a id="22026" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22032" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22032" class="Bound">σ</a> <a id="22034" class="Symbol">(</a><a id="22035" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22035" class="Bound">L</a> <a id="22037" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17542" class="InductiveConstructor Operator">·</a> <a id="22039" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22039" class="Bound">M</a><a id="22040" class="Symbol">)</a>        <a id="22049" class="Symbol">=</a>  <a id="22052" class="Symbol">(</a><a id="22053" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22059" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22032" class="Bound">σ</a> <a id="22061" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22035" class="Bound">L</a><a id="22062" class="Symbol">)</a> <a id="22064" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17542" class="InductiveConstructor Operator">·</a> <a id="22066" class="Symbol">(</a><a id="22067" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22073" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22032" class="Bound">σ</a> <a id="22075" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22039" class="Bound">M</a><a id="22076" class="Symbol">)</a>
<a id="22078" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22084" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22084" class="Bound">σ</a> <a id="22086" class="Symbol">(</a><a id="22087" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17589" class="InductiveConstructor">`zero</a><a id="22092" class="Symbol">)</a>        <a id="22101" class="Symbol">=</a>  <a id="22104" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17589" class="InductiveConstructor">`zero</a>
<a id="22110" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22116" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22116" class="Bound">σ</a> <a id="22118" class="Symbol">(</a><a id="22119" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17622" class="InductiveConstructor Operator">`suc</a> <a id="22124" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22124" class="Bound">M</a><a id="22125" class="Symbol">)</a>       <a id="22133" class="Symbol">=</a>  <a id="22136" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17622" class="InductiveConstructor Operator">`suc</a> <a id="22141" class="Symbol">(</a><a id="22142" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22148" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22116" class="Bound">σ</a> <a id="22150" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22124" class="Bound">M</a><a id="22151" class="Symbol">)</a>
<a id="22153" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22159" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22159" class="Bound">σ</a> <a id="22161" class="Symbol">(</a><a id="22162" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">case</a> <a id="22167" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22167" class="Bound">L</a> <a id="22169" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">[zero⇒</a> <a id="22176" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22176" class="Bound">M</a> <a id="22178" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">|suc⇒</a> <a id="22184" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22184" class="Bound">N</a> <a id="22186" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">]</a><a id="22187" class="Symbol">)</a>
                       <a id="22212" class="Symbol">=</a>  <a id="22215" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">case</a> <a id="22220" class="Symbol">(</a><a id="22221" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22227" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22159" class="Bound">σ</a> <a id="22229" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22167" class="Bound">L</a><a id="22230" class="Symbol">)</a> <a id="22232" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">[zero⇒</a> <a id="22239" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22245" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22159" class="Bound">σ</a> <a id="22247" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22176" class="Bound">M</a> <a id="22249" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">|suc⇒</a> <a id="22255" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22261" class="Symbol">(</a><a id="22262" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21647" class="Function">exts</a> <a id="22267" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22159" class="Bound">σ</a><a id="22268" class="Symbol">)</a> <a id="22270" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22184" class="Bound">N</a> <a id="22272" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">]</a>
<a id="22274" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22280" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22280" class="Bound">σ</a> <a id="22282" class="Symbol">(</a><a id="22283" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17716" class="InductiveConstructor Operator">μ</a> <a id="22285" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22285" class="Bound">N</a><a id="22286" class="Symbol">)</a>          <a id="22297" class="Symbol">=</a>  <a id="22300" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17716" class="InductiveConstructor Operator">μ</a> <a id="22302" class="Symbol">(</a><a id="22303" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22309" class="Symbol">(</a><a id="22310" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21647" class="Function">exts</a> <a id="22315" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22280" class="Bound">σ</a><a id="22316" class="Symbol">)</a> <a id="22318" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22285" class="Bound">N</a><a id="22319" class="Symbol">)</a>
<a id="22321" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22327" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22327" class="Bound">σ</a> <a id="22329" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｛</a> <a id="22331" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22331" class="Bound">ls</a> <a id="22334" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">:=</a> <a id="22337" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22337" class="Bound">Ms</a> <a id="22340" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｝</a>  <a id="22343" class="Symbol">=</a> <a id="22345" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｛</a> <a id="22347" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22331" class="Bound">ls</a> <a id="22350" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">:=</a> <a id="22353" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21855" class="Function">subst-vec</a> <a id="22363" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22327" class="Bound">σ</a> <a id="22365" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22337" class="Bound">Ms</a> <a id="22368" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｝</a>
<a id="22370" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22376" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22376" class="Bound">σ</a> <a id="22378" class="Symbol">(</a><a id="22379" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22379" class="Bound">M</a> <a id="22381" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17834" class="InductiveConstructor Operator">#</a> <a id="22383" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22383" class="Bound">l</a><a id="22384" class="Symbol">)</a>        <a id="22393" class="Symbol">=</a> <a id="22395" class="Symbol">(</a><a id="22396" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22402" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22376" class="Bound">σ</a> <a id="22404" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22379" class="Bound">M</a><a id="22405" class="Symbol">)</a> <a id="22407" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17834" class="InductiveConstructor Operator">#</a> <a id="22409" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22383" class="Bound">l</a>

<a id="22412" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21855" class="Function">subst-vec</a> <a id="22422" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22422" class="Bound">σ</a> <a id="22424" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a> <a id="22427" class="Symbol">=</a> <a id="22429" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#971" class="InductiveConstructor">[]</a>
<a id="22432" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21855" class="Function">subst-vec</a> <a id="22442" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22442" class="Bound">σ</a> <a id="22444" class="Symbol">(</a><a id="22445" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22445" class="Bound">M</a> <a id="22447" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="22449" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22449" class="Bound">Ms</a><a id="22451" class="Symbol">)</a> <a id="22453" class="Symbol">=</a> <a id="22455" class="Symbol">(</a><a id="22456" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22462" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22442" class="Bound">σ</a> <a id="22464" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22445" class="Bound">M</a><a id="22465" class="Symbol">)</a> <a id="22467" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#990" class="InductiveConstructor Operator">∷</a> <a id="22469" class="Symbol">(</a><a id="22470" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21855" class="Function">subst-vec</a> <a id="22480" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22442" class="Bound">σ</a> <a id="22482" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22449" class="Bound">Ms</a><a id="22484" class="Symbol">)</a>
</pre>{% endraw %}
As usual, we implement single substitution using simultaneous
substitution.
{% raw %}<pre class="Agda"><a id="subst-zero"></a><a id="22571" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22571" class="Function">subst-zero</a> <a id="22582" class="Symbol">:</a> <a id="22584" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="22589" class="Symbol">→</a> <a id="22591" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="22594" class="Symbol">→</a> <a id="22596" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a>
<a id="22601" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22571" class="Function">subst-zero</a> <a id="22612" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22612" class="Bound">M</a> <a id="22614" class="Number">0</a>       <a id="22622" class="Symbol">=</a>  <a id="22625" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22612" class="Bound">M</a>
<a id="22627" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22571" class="Function">subst-zero</a> <a id="22638" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22638" class="Bound">M</a> <a id="22640" class="Symbol">(</a><a id="22641" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="22645" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22645" class="Bound">x</a><a id="22646" class="Symbol">)</a> <a id="22648" class="Symbol">=</a>  <a id="22651" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17464" class="InductiveConstructor Operator">`</a> <a id="22653" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22645" class="Bound">x</a>

<a id="_[_]"></a><a id="22656" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22656" class="Function Operator">_[_]</a> <a id="22661" class="Symbol">:</a> <a id="22663" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="22668" class="Symbol">→</a> <a id="22670" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="22675" class="Symbol">→</a> <a id="22677" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a>
<a id="22682" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22656" class="Function Operator">_[_]</a> <a id="22687" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22687" class="Bound">N</a> <a id="22689" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22689" class="Bound">M</a> <a id="22691" class="Symbol">=</a>  <a id="22694" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="22700" class="Symbol">(</a><a id="22701" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22571" class="Function">subst-zero</a> <a id="22712" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22689" class="Bound">M</a><a id="22713" class="Symbol">)</a> <a id="22715" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22687" class="Bound">N</a>
</pre>{% endraw %}
## Values

We extend the definition of `Value` to include a clause for records.
In a call-by-value language, a record is usually only considered a
value if all its field initializers are values. Here we instead treat
records in a lazy fashion, declaring any record to be a value, to save
on some extra bookkeeping.
{% raw %}<pre class="Agda"><a id="23041" class="Keyword">data</a> <a id="Value"></a><a id="23046" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23046" class="Datatype">Value</a> <a id="23052" class="Symbol">:</a> <a id="23054" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="23059" class="Symbol">→</a> <a id="23061" class="PrimitiveType">Set</a> <a id="23065" class="Keyword">where</a>

  <a id="Value.V-ƛ"></a><a id="23074" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23074" class="InductiveConstructor">V-ƛ</a> <a id="23078" class="Symbol">:</a> <a id="23080" class="Symbol">∀</a> <a id="23082" class="Symbol">{</a><a id="23083" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23083" class="Bound">N</a><a id="23084" class="Symbol">}</a>
      <a id="23092" class="Comment">-----------</a>
    <a id="23108" class="Symbol">→</a> <a id="23110" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23046" class="Datatype">Value</a> <a id="23116" class="Symbol">(</a><a id="23117" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17502" class="InductiveConstructor Operator">ƛ</a> <a id="23119" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23083" class="Bound">N</a><a id="23120" class="Symbol">)</a>

  <a id="Value.V-zero"></a><a id="23125" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23125" class="InductiveConstructor">V-zero</a> <a id="23132" class="Symbol">:</a>
      <a id="23140" class="Comment">-------------</a>
      <a id="23160" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23046" class="Datatype">Value</a> <a id="23166" class="Symbol">(</a><a id="23167" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17589" class="InductiveConstructor">`zero</a><a id="23172" class="Symbol">)</a>

  <a id="Value.V-suc"></a><a id="23177" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23177" class="InductiveConstructor">V-suc</a> <a id="23183" class="Symbol">:</a> <a id="23185" class="Symbol">∀</a> <a id="23187" class="Symbol">{</a><a id="23188" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23188" class="Bound">V</a><a id="23189" class="Symbol">}</a>
    <a id="23195" class="Symbol">→</a> <a id="23197" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23046" class="Datatype">Value</a> <a id="23203" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23188" class="Bound">V</a>
      <a id="23211" class="Comment">--------------</a>
    <a id="23230" class="Symbol">→</a> <a id="23232" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23046" class="Datatype">Value</a> <a id="23238" class="Symbol">(</a><a id="23239" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17622" class="InductiveConstructor Operator">`suc</a> <a id="23244" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23188" class="Bound">V</a><a id="23245" class="Symbol">)</a>

  <a id="Value.V-rcd"></a><a id="23250" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23250" class="InductiveConstructor">V-rcd</a> <a id="23256" class="Symbol">:</a> <a id="23258" class="Symbol">∀{</a><a id="23260" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23260" class="Bound">n</a><a id="23261" class="Symbol">}{</a><a id="23263" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23263" class="Bound">ls</a> <a id="23266" class="Symbol">:</a> <a id="23268" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="23272" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="23277" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23260" class="Bound">n</a><a id="23278" class="Symbol">}{</a><a id="23280" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23280" class="Bound">Ms</a> <a id="23283" class="Symbol">:</a> <a id="23285" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="23289" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="23294" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23260" class="Bound">n</a><a id="23295" class="Symbol">}</a>
    <a id="23301" class="Symbol">→</a> <a id="23303" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23046" class="Datatype">Value</a> <a id="23309" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｛</a> <a id="23311" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23263" class="Bound">ls</a> <a id="23314" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">:=</a> <a id="23317" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23280" class="Bound">Ms</a> <a id="23320" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｝</a> 
</pre>{% endraw %}
## Reduction

The following datatype `_—→_` defines the reduction relation for the
STLC with records. We discuss the two new rules for records in the
following paragraph.

{% raw %}<pre class="Agda"><a id="23504" class="Keyword">data</a> <a id="_—→_"></a><a id="23509" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">_—→_</a> <a id="23514" class="Symbol">:</a> <a id="23516" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="23521" class="Symbol">→</a> <a id="23523" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="23528" class="Symbol">→</a> <a id="23530" class="PrimitiveType">Set</a> <a id="23534" class="Keyword">where</a>

  <a id="_—→_.ξ-·₁"></a><a id="23543" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23543" class="InductiveConstructor">ξ-·₁</a> <a id="23548" class="Symbol">:</a> <a id="23550" class="Symbol">∀</a> <a id="23552" class="Symbol">{</a><a id="23553" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23553" class="Bound">L</a> <a id="23555" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23555" class="Bound">L′</a> <a id="23558" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23558" class="Bound">M</a> <a id="23560" class="Symbol">:</a> <a id="23562" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="23566" class="Symbol">}</a>
    <a id="23572" class="Symbol">→</a> <a id="23574" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23553" class="Bound">L</a> <a id="23576" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="23579" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23555" class="Bound">L′</a>
      <a id="23588" class="Comment">---------------</a>
    <a id="23608" class="Symbol">→</a> <a id="23610" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23553" class="Bound">L</a> <a id="23612" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17542" class="InductiveConstructor Operator">·</a> <a id="23614" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23558" class="Bound">M</a> <a id="23616" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="23619" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23555" class="Bound">L′</a> <a id="23622" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17542" class="InductiveConstructor Operator">·</a> <a id="23624" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23558" class="Bound">M</a>

  <a id="_—→_.ξ-·₂"></a><a id="23629" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23629" class="InductiveConstructor">ξ-·₂</a> <a id="23634" class="Symbol">:</a> <a id="23636" class="Symbol">∀</a> <a id="23638" class="Symbol">{</a><a id="23639" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23639" class="Bound">V</a>  <a id="23642" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23642" class="Bound">M</a> <a id="23644" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23644" class="Bound">M′</a> <a id="23647" class="Symbol">:</a> <a id="23649" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="23653" class="Symbol">}</a>
    <a id="23659" class="Symbol">→</a> <a id="23661" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23046" class="Datatype">Value</a> <a id="23667" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23639" class="Bound">V</a>
    <a id="23673" class="Symbol">→</a> <a id="23675" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23642" class="Bound">M</a> <a id="23677" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="23680" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23644" class="Bound">M′</a>
      <a id="23689" class="Comment">---------------</a>
    <a id="23709" class="Symbol">→</a> <a id="23711" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23639" class="Bound">V</a> <a id="23713" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17542" class="InductiveConstructor Operator">·</a> <a id="23715" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23642" class="Bound">M</a> <a id="23717" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="23720" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23639" class="Bound">V</a> <a id="23722" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17542" class="InductiveConstructor Operator">·</a> <a id="23724" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23644" class="Bound">M′</a>

  <a id="_—→_.β-ƛ"></a><a id="23730" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23730" class="InductiveConstructor">β-ƛ</a> <a id="23734" class="Symbol">:</a> <a id="23736" class="Symbol">∀</a> <a id="23738" class="Symbol">{</a><a id="23739" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23739" class="Bound">N</a> <a id="23741" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23741" class="Bound">W</a> <a id="23743" class="Symbol">:</a> <a id="23745" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="23749" class="Symbol">}</a>
    <a id="23755" class="Symbol">→</a> <a id="23757" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23046" class="Datatype">Value</a> <a id="23763" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23741" class="Bound">W</a>
      <a id="23771" class="Comment">--------------------</a>
    <a id="23796" class="Symbol">→</a> <a id="23798" class="Symbol">(</a><a id="23799" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17502" class="InductiveConstructor Operator">ƛ</a> <a id="23801" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23739" class="Bound">N</a><a id="23802" class="Symbol">)</a> <a id="23804" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17542" class="InductiveConstructor Operator">·</a> <a id="23806" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23741" class="Bound">W</a> <a id="23808" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="23811" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23739" class="Bound">N</a> <a id="23813" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22656" class="Function Operator">[</a> <a id="23815" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23741" class="Bound">W</a> <a id="23817" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22656" class="Function Operator">]</a>

  <a id="_—→_.ξ-suc"></a><a id="23822" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23822" class="InductiveConstructor">ξ-suc</a> <a id="23828" class="Symbol">:</a> <a id="23830" class="Symbol">∀</a> <a id="23832" class="Symbol">{</a><a id="23833" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23833" class="Bound">M</a> <a id="23835" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23835" class="Bound">M′</a> <a id="23838" class="Symbol">:</a> <a id="23840" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="23844" class="Symbol">}</a>
    <a id="23850" class="Symbol">→</a> <a id="23852" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23833" class="Bound">M</a> <a id="23854" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="23857" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23835" class="Bound">M′</a>
      <a id="23866" class="Comment">-----------------</a>
    <a id="23888" class="Symbol">→</a> <a id="23890" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17622" class="InductiveConstructor Operator">`suc</a> <a id="23895" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23833" class="Bound">M</a> <a id="23897" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="23900" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17622" class="InductiveConstructor Operator">`suc</a> <a id="23905" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23835" class="Bound">M′</a>

  <a id="_—→_.ξ-case"></a><a id="23911" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23911" class="InductiveConstructor">ξ-case</a> <a id="23918" class="Symbol">:</a> <a id="23920" class="Symbol">∀</a> <a id="23922" class="Symbol">{</a><a id="23923" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23923" class="Bound">L</a> <a id="23925" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23925" class="Bound">L′</a> <a id="23928" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23928" class="Bound">M</a> <a id="23930" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23930" class="Bound">N</a> <a id="23932" class="Symbol">:</a> <a id="23934" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="23938" class="Symbol">}</a>
    <a id="23944" class="Symbol">→</a> <a id="23946" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23923" class="Bound">L</a> <a id="23948" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="23951" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23925" class="Bound">L′</a>
      <a id="23960" class="Comment">-------------------------------------------------------</a>
    <a id="24020" class="Symbol">→</a> <a id="24022" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">case</a> <a id="24027" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23923" class="Bound">L</a> <a id="24029" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">[zero⇒</a> <a id="24036" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23928" class="Bound">M</a> <a id="24038" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">|suc⇒</a> <a id="24044" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23930" class="Bound">N</a> <a id="24046" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">]</a> <a id="24048" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="24051" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">case</a> <a id="24056" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23925" class="Bound">L′</a> <a id="24059" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">[zero⇒</a> <a id="24066" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23928" class="Bound">M</a> <a id="24068" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">|suc⇒</a> <a id="24074" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23930" class="Bound">N</a> <a id="24076" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">]</a>

  <a id="_—→_.β-zero"></a><a id="24081" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24081" class="InductiveConstructor">β-zero</a> <a id="24088" class="Symbol">:</a>  <a id="24091" class="Symbol">∀</a> <a id="24093" class="Symbol">{</a><a id="24094" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24094" class="Bound">M</a> <a id="24096" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24096" class="Bound">N</a> <a id="24098" class="Symbol">:</a> <a id="24100" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="24104" class="Symbol">}</a>
      <a id="24112" class="Comment">----------------------------------</a>
    <a id="24151" class="Symbol">→</a> <a id="24153" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">case</a> <a id="24158" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17589" class="InductiveConstructor">`zero</a> <a id="24164" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">[zero⇒</a> <a id="24171" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24094" class="Bound">M</a> <a id="24173" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">|suc⇒</a> <a id="24179" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24096" class="Bound">N</a> <a id="24181" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">]</a> <a id="24183" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="24186" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24094" class="Bound">M</a>

  <a id="_—→_.β-suc"></a><a id="24191" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24191" class="InductiveConstructor">β-suc</a> <a id="24197" class="Symbol">:</a> <a id="24199" class="Symbol">∀</a> <a id="24201" class="Symbol">{</a><a id="24202" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24202" class="Bound">V</a> <a id="24204" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24204" class="Bound">M</a> <a id="24206" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24206" class="Bound">N</a> <a id="24208" class="Symbol">:</a> <a id="24210" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="24214" class="Symbol">}</a>
    <a id="24220" class="Symbol">→</a> <a id="24222" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23046" class="Datatype">Value</a> <a id="24228" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24202" class="Bound">V</a>
      <a id="24236" class="Comment">-------------------------------------------</a>
    <a id="24284" class="Symbol">→</a> <a id="24286" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">case</a> <a id="24291" class="Symbol">(</a><a id="24292" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17622" class="InductiveConstructor Operator">`suc</a> <a id="24297" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24202" class="Bound">V</a><a id="24298" class="Symbol">)</a> <a id="24300" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">[zero⇒</a> <a id="24307" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24204" class="Bound">M</a> <a id="24309" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">|suc⇒</a> <a id="24315" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24206" class="Bound">N</a> <a id="24317" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17662" class="InductiveConstructor Operator">]</a> <a id="24319" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="24322" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24206" class="Bound">N</a> <a id="24324" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22656" class="Function Operator">[</a> <a id="24326" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24202" class="Bound">V</a> <a id="24328" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22656" class="Function Operator">]</a>

  <a id="_—→_.β-μ"></a><a id="24333" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24333" class="InductiveConstructor">β-μ</a> <a id="24337" class="Symbol">:</a> <a id="24339" class="Symbol">∀</a> <a id="24341" class="Symbol">{</a><a id="24342" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24342" class="Bound">N</a> <a id="24344" class="Symbol">:</a> <a id="24346" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="24350" class="Symbol">}</a>
      <a id="24358" class="Comment">----------------</a>
    <a id="24379" class="Symbol">→</a> <a id="24381" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17716" class="InductiveConstructor Operator">μ</a> <a id="24383" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24342" class="Bound">N</a> <a id="24385" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="24388" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24342" class="Bound">N</a> <a id="24390" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22656" class="Function Operator">[</a> <a id="24392" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17716" class="InductiveConstructor Operator">μ</a> <a id="24394" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24342" class="Bound">N</a> <a id="24396" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22656" class="Function Operator">]</a>

  <a id="_—→_.ξ-#"></a><a id="24401" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24401" class="InductiveConstructor">ξ-#</a> <a id="24405" class="Symbol">:</a> <a id="24407" class="Symbol">∀</a> <a id="24409" class="Symbol">{</a><a id="24410" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24410" class="Bound">M</a> <a id="24412" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24412" class="Bound">M′</a> <a id="24415" class="Symbol">:</a> <a id="24417" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="24421" class="Symbol">}{</a><a id="24423" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24423" class="Bound">l</a><a id="24424" class="Symbol">}</a>
    <a id="24430" class="Symbol">→</a> <a id="24432" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24410" class="Bound">M</a> <a id="24434" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="24437" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24412" class="Bound">M′</a>
    <a id="24444" class="Symbol">→</a> <a id="24446" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24410" class="Bound">M</a> <a id="24448" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17834" class="InductiveConstructor Operator">#</a> <a id="24450" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24423" class="Bound">l</a> <a id="24452" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="24455" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24412" class="Bound">M′</a> <a id="24458" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17834" class="InductiveConstructor Operator">#</a> <a id="24460" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24423" class="Bound">l</a>

  <a id="_—→_.β-#"></a><a id="24465" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24465" class="InductiveConstructor">β-#</a> <a id="24469" class="Symbol">:</a> <a id="24471" class="Symbol">∀</a> <a id="24473" class="Symbol">{</a><a id="24474" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24474" class="Bound">n</a><a id="24475" class="Symbol">}{</a><a id="24477" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24477" class="Bound">ls</a> <a id="24480" class="Symbol">:</a> <a id="24482" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="24486" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="24491" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24474" class="Bound">n</a><a id="24492" class="Symbol">}{</a><a id="24494" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24494" class="Bound">Ms</a> <a id="24497" class="Symbol">:</a> <a id="24499" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="24503" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="24508" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24474" class="Bound">n</a><a id="24509" class="Symbol">}</a> <a id="24511" class="Symbol">{</a><a id="24512" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24512" class="Bound">l</a><a id="24513" class="Symbol">}{</a><a id="24515" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24515" class="Bound">j</a> <a id="24517" class="Symbol">:</a> <a id="24519" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1000" class="Datatype">Fin</a> <a id="24523" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24474" class="Bound">n</a><a id="24524" class="Symbol">}</a>
    <a id="24530" class="Symbol">→</a> <a id="24532" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="24539" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24477" class="Bound">ls</a> <a id="24542" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24515" class="Bound">j</a> <a id="24544" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="24546" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24512" class="Bound">l</a>
      <a id="24554" class="Comment">---------------------------------</a>
    <a id="24592" class="Symbol">→</a> <a id="24594" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｛</a> <a id="24596" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24477" class="Bound">ls</a> <a id="24599" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">:=</a> <a id="24602" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24494" class="Bound">Ms</a> <a id="24605" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｝</a> <a id="24607" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17834" class="InductiveConstructor Operator">#</a> <a id="24609" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24512" class="Bound">l</a> <a id="24611" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a>  <a id="24615" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="24622" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24494" class="Bound">Ms</a> <a id="24625" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24515" class="Bound">j</a>
</pre>{% endraw %}
We have just two new reduction rules:
* Rule `ξ-#`: A field access expression `M # l` reduces to `M′ # l`
   provided that `M` reduces to `M′`.

* Rule `β-#`: When field access is applied to a record,
   and if the label `l` is at position `j` in the vector of field names,
   then result is the term at position `j` in the field initializers.


## Canonical Forms

As in the [Properties]({{ site.baseurl }}/Properties/) chapter, we
define a `Canonical V ⦂ A` relation that characterizes the well-typed
values.  The presence of the subsumption rule impacts its definition
because we must allow the type of the value `V` to be a subtype of `A`.
{% raw %}<pre class="Agda"><a id="25280" class="Keyword">data</a> <a id="Canonical_⦂_"></a><a id="25285" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">Canonical_⦂_</a> <a id="25298" class="Symbol">:</a> <a id="25300" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="25305" class="Symbol">→</a> <a id="25307" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="25312" class="Symbol">→</a> <a id="25314" class="PrimitiveType">Set</a> <a id="25318" class="Keyword">where</a>

  <a id="Canonical_⦂_.C-ƛ"></a><a id="25327" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25327" class="InductiveConstructor">C-ƛ</a> <a id="25331" class="Symbol">:</a> <a id="25333" class="Symbol">∀</a> <a id="25335" class="Symbol">{</a><a id="25336" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25336" class="Bound">N</a> <a id="25338" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25338" class="Bound">A</a> <a id="25340" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25340" class="Bound">B</a> <a id="25342" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25342" class="Bound">C</a> <a id="25344" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25344" class="Bound">D</a><a id="25345" class="Symbol">}</a>
    <a id="25351" class="Symbol">→</a>  <a id="25354" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16510" class="InductiveConstructor">∅</a> <a id="25356" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">,</a> <a id="25358" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25338" class="Bound">A</a> <a id="25360" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="25362" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25336" class="Bound">N</a> <a id="25364" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="25366" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25340" class="Bound">B</a>
    <a id="25372" class="Symbol">→</a> <a id="25374" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25338" class="Bound">A</a> <a id="25376" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="25378" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25340" class="Bound">B</a> <a id="25380" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="25383" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25342" class="Bound">C</a> <a id="25385" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="25387" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25344" class="Bound">D</a>
      <a id="25395" class="Comment">-------------------------</a>
    <a id="25425" class="Symbol">→</a> <a id="25427" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">Canonical</a> <a id="25437" class="Symbol">(</a><a id="25438" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17502" class="InductiveConstructor Operator">ƛ</a> <a id="25440" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25336" class="Bound">N</a><a id="25441" class="Symbol">)</a> <a id="25443" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">⦂</a> <a id="25445" class="Symbol">(</a><a id="25446" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25342" class="Bound">C</a> <a id="25448" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8392" class="InductiveConstructor Operator">⇒</a> <a id="25450" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25344" class="Bound">D</a><a id="25451" class="Symbol">)</a>

  <a id="Canonical_⦂_.C-zero"></a><a id="25456" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25456" class="InductiveConstructor">C-zero</a> <a id="25463" class="Symbol">:</a>
      <a id="25471" class="Comment">--------------------</a>
      <a id="25498" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">Canonical</a> <a id="25508" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17589" class="InductiveConstructor">`zero</a> <a id="25514" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">⦂</a> <a id="25516" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a>

  <a id="Canonical_⦂_.C-suc"></a><a id="25522" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25522" class="InductiveConstructor">C-suc</a> <a id="25528" class="Symbol">:</a> <a id="25530" class="Symbol">∀</a> <a id="25532" class="Symbol">{</a><a id="25533" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25533" class="Bound">V</a><a id="25534" class="Symbol">}</a>
    <a id="25540" class="Symbol">→</a> <a id="25542" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">Canonical</a> <a id="25552" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25533" class="Bound">V</a> <a id="25554" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">⦂</a> <a id="25556" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a>
      <a id="25565" class="Comment">---------------------</a>
    <a id="25591" class="Symbol">→</a> <a id="25593" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">Canonical</a> <a id="25603" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17622" class="InductiveConstructor Operator">`suc</a> <a id="25608" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25533" class="Bound">V</a> <a id="25610" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">⦂</a> <a id="25612" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8421" class="InductiveConstructor">`ℕ</a>

  <a id="Canonical_⦂_.C-rcd"></a><a id="25618" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25618" class="InductiveConstructor">C-rcd</a> <a id="25624" class="Symbol">:</a> <a id="25626" class="Symbol">∀{</a><a id="25628" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25628" class="Bound">n</a> <a id="25630" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25630" class="Bound">m</a><a id="25631" class="Symbol">}{</a><a id="25633" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25633" class="Bound">ls</a> <a id="25636" class="Symbol">:</a> <a id="25638" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="25642" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="25647" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25628" class="Bound">n</a><a id="25648" class="Symbol">}{</a><a id="25650" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25650" class="Bound">ks</a> <a id="25653" class="Symbol">:</a> <a id="25655" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="25659" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#4597" class="Function">Name</a> <a id="25664" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25630" class="Bound">m</a><a id="25665" class="Symbol">}{</a><a id="25667" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25667" class="Bound">Ms</a> <a id="25670" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25670" class="Bound">As</a> <a id="25673" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25673" class="Bound">Bs</a><a id="25675" class="Symbol">}{</a><a id="25677" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25677" class="Bound">dls</a><a id="25680" class="Symbol">}</a>
    <a id="25686" class="Symbol">→</a> <a id="25688" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16510" class="InductiveConstructor">∅</a> <a id="25690" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⊢*</a> <a id="25693" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25667" class="Bound">Ms</a> <a id="25696" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⦂</a> <a id="25698" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25670" class="Bound">As</a>
    <a id="25705" class="Symbol">→</a> <a id="25707" class="Symbol">(</a><a id="25708" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25708" class="Bound">dks</a> <a id="25712" class="Symbol">:</a> <a id="25714" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5360" class="Function">distinct</a> <a id="25723" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25650" class="Bound">ks</a><a id="25725" class="Symbol">)</a>
    <a id="25731" class="Symbol">→</a> <a id="25733" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="25735" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25650" class="Bound">ks</a> <a id="25738" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="25740" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25670" class="Bound">As</a> <a id="25743" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a><a id="25744" class="Symbol">{</a><a id="25745" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25708" class="Bound">dks</a><a id="25748" class="Symbol">}</a>  <a id="25751" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9222" class="Datatype Operator">&lt;:</a> <a id="25754" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="25756" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25633" class="Bound">ls</a> <a id="25759" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="25761" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25673" class="Bound">Bs</a> <a id="25764" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a><a id="25765" class="Symbol">{</a><a id="25766" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25677" class="Bound">dls</a><a id="25769" class="Symbol">}</a>
    <a id="25775" class="Symbol">→</a> <a id="25777" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">Canonical</a> <a id="25787" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｛</a> <a id="25789" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25650" class="Bound">ks</a> <a id="25792" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">:=</a> <a id="25795" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25667" class="Bound">Ms</a> <a id="25798" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17756" class="InductiveConstructor Operator">｝</a> <a id="25800" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">⦂</a> <a id="25802" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｛</a> <a id="25804" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25633" class="Bound">ls</a> <a id="25807" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">⦂</a> <a id="25809" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25673" class="Bound">Bs</a> <a id="25812" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8436" class="InductiveConstructor Operator">｝</a> <a id="25814" class="Symbol">{</a><a id="25815" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25677" class="Bound">dls</a><a id="25818" class="Symbol">}</a>
</pre>{% endraw %}
Every closed, well-typed value is canonical:
{% raw %}<pre class="Agda"><a id="canonical"></a><a id="25874" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="25884" class="Symbol">:</a> <a id="25886" class="Symbol">∀</a> <a id="25888" class="Symbol">{</a><a id="25889" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25889" class="Bound">V</a> <a id="25891" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25891" class="Bound">A</a><a id="25892" class="Symbol">}</a>
  <a id="25896" class="Symbol">→</a> <a id="25898" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16510" class="InductiveConstructor">∅</a> <a id="25900" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="25902" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25889" class="Bound">V</a> <a id="25904" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="25906" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25891" class="Bound">A</a>
  <a id="25910" class="Symbol">→</a> <a id="25912" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23046" class="Datatype">Value</a> <a id="25918" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25889" class="Bound">V</a>
    <a id="25924" class="Comment">-----------</a>
  <a id="25938" class="Symbol">→</a> <a id="25940" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">Canonical</a> <a id="25950" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25889" class="Bound">V</a> <a id="25952" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">⦂</a> <a id="25954" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25891" class="Bound">A</a>
<a id="25956" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="25966" class="Symbol">(</a><a id="25967" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18226" class="InductiveConstructor">⊢`</a> <a id="25970" class="Symbol">())</a>          <a id="25983" class="Symbol">()</a>
<a id="25986" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="25996" class="Symbol">(</a><a id="25997" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18296" class="InductiveConstructor">⊢ƛ</a> <a id="26000" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26000" class="Bound">⊢N</a><a id="26002" class="Symbol">)</a>          <a id="26013" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23074" class="InductiveConstructor">V-ƛ</a>         <a id="26025" class="Symbol">=</a>  <a id="26028" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25327" class="InductiveConstructor">C-ƛ</a> <a id="26032" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26000" class="Bound">⊢N</a> <a id="26035" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14062" class="Function">&lt;:-refl</a>
<a id="26043" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26053" class="Symbol">(</a><a id="26054" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18385" class="InductiveConstructor">⊢·</a> <a id="26057" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26057" class="Bound">⊢L</a> <a id="26060" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26060" class="Bound">⊢M</a><a id="26062" class="Symbol">)</a>       <a id="26070" class="Symbol">()</a>
<a id="26073" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26083" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18483" class="InductiveConstructor">⊢zero</a>            <a id="26100" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23125" class="InductiveConstructor">V-zero</a>      <a id="26112" class="Symbol">=</a>  <a id="26115" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25456" class="InductiveConstructor">C-zero</a>
<a id="26122" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26132" class="Symbol">(</a><a id="26133" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18542" class="InductiveConstructor">⊢suc</a> <a id="26138" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26138" class="Bound">⊢V</a><a id="26140" class="Symbol">)</a>        <a id="26149" class="Symbol">(</a><a id="26150" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23177" class="InductiveConstructor">V-suc</a> <a id="26156" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26156" class="Bound">VV</a><a id="26158" class="Symbol">)</a>  <a id="26161" class="Symbol">=</a>  <a id="26164" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25522" class="InductiveConstructor">C-suc</a> <a id="26170" class="Symbol">(</a><a id="26171" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26181" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26138" class="Bound">⊢V</a> <a id="26184" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26156" class="Bound">VV</a><a id="26186" class="Symbol">)</a>
<a id="26188" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26198" class="Symbol">(</a><a id="26199" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18621" class="InductiveConstructor">⊢case</a> <a id="26205" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26205" class="Bound">⊢L</a> <a id="26208" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26208" class="Bound">⊢M</a> <a id="26211" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26211" class="Bound">⊢N</a><a id="26213" class="Symbol">)</a> <a id="26215" class="Symbol">()</a>
<a id="26218" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26228" class="Symbol">(</a><a id="26229" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18780" class="InductiveConstructor">⊢μ</a> <a id="26232" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26232" class="Bound">⊢M</a><a id="26234" class="Symbol">)</a>          <a id="26245" class="Symbol">()</a>
<a id="26248" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26258" class="Symbol">(</a><a id="26259" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18856" class="InductiveConstructor">⊢rcd</a> <a id="26264" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26264" class="Bound">⊢Ms</a> <a id="26268" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26268" class="Bound">d</a><a id="26269" class="Symbol">)</a> <a id="26271" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26271" class="Bound">VV</a> <a id="26274" class="Symbol">=</a> <a id="26276" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25618" class="InductiveConstructor">C-rcd</a> <a id="26282" class="Symbol">{</a><a id="26283" class="Argument">dls</a> <a id="26287" class="Symbol">=</a> <a id="26289" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26268" class="Bound">d</a><a id="26290" class="Symbol">}</a> <a id="26292" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26264" class="Bound">⊢Ms</a> <a id="26296" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26268" class="Bound">d</a> <a id="26298" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14062" class="Function">&lt;:-refl</a> 
<a id="26307" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26317" class="Symbol">(</a><a id="26318" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="26322" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26322" class="Bound">⊢V</a> <a id="26325" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9255" class="InductiveConstructor">&lt;:-nat</a><a id="26331" class="Symbol">)</a> <a id="26333" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26333" class="Bound">VV</a> <a id="26336" class="Symbol">=</a> <a id="26338" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26348" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26322" class="Bound">⊢V</a> <a id="26351" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26333" class="Bound">VV</a>
<a id="26354" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26364" class="Symbol">(</a><a id="26365" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="26369" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26369" class="Bound">⊢V</a> <a id="26372" class="Symbol">(</a><a id="26373" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9276" class="InductiveConstructor">&lt;:-fun</a> <a id="26380" class="Symbol">{</a><a id="26381" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26381" class="Bound">A</a><a id="26382" class="Symbol">}{</a><a id="26384" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26384" class="Bound">B</a><a id="26385" class="Symbol">}{</a><a id="26387" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26387" class="Bound">C</a><a id="26388" class="Symbol">}{</a><a id="26390" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26390" class="Bound">D</a><a id="26391" class="Symbol">}</a> <a id="26393" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26393" class="Bound">C&lt;:A</a> <a id="26398" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26398" class="Bound">B&lt;:D</a><a id="26402" class="Symbol">))</a> <a id="26405" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26405" class="Bound">VV</a> 
    <a id="26413" class="Keyword">with</a> <a id="26418" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26428" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26369" class="Bound">⊢V</a> <a id="26431" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26405" class="Bound">VV</a> 
<a id="26435" class="Symbol">...</a> <a id="26439" class="Symbol">|</a> <a id="26441" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25327" class="InductiveConstructor">C-ƛ</a> <a id="26445" class="Symbol">{</a><a id="26446" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26446" class="Bound">N</a><a id="26447" class="Symbol">}{</a><a id="26449" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26449" class="Bound">A′</a><a id="26451" class="Symbol">}{</a><a id="26453" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26453" class="Bound">B′</a><a id="26455" class="Symbol">}{</a><a id="26457" class="Bound">A</a><a id="26458" class="Symbol">}{</a><a id="26460" class="Bound">B</a><a id="26461" class="Symbol">}</a> <a id="26463" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26463" class="Bound">⊢N</a>  <a id="26467" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26467" class="Bound">AB′&lt;:AB</a> <a id="26475" class="Symbol">=</a> <a id="26477" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25327" class="InductiveConstructor">C-ƛ</a> <a id="26481" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26463" class="Bound">⊢N</a> <a id="26484" class="Symbol">(</a><a id="26485" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14172" class="Function">&lt;:-trans</a> <a id="26494" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26467" class="Bound">AB′&lt;:AB</a> <a id="26502" class="Symbol">(</a><a id="26503" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9276" class="InductiveConstructor">&lt;:-fun</a> <a id="26510" class="Bound">C&lt;:A</a> <a id="26515" class="Bound">B&lt;:D</a><a id="26519" class="Symbol">))</a>
<a id="26522" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26532" class="Symbol">(</a><a id="26533" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="26537" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26537" class="Bound">⊢V</a> <a id="26540" class="Symbol">(</a><a id="26541" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9373" class="InductiveConstructor">&lt;:-rcd</a> <a id="26548" class="Symbol">{</a><a id="26549" class="Argument">ks</a> <a id="26552" class="Symbol">=</a> <a id="26554" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26554" class="Bound">ks</a><a id="26556" class="Symbol">}{</a><a id="26558" class="Argument">ls</a> <a id="26561" class="Symbol">=</a> <a id="26563" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26563" class="Bound">ls</a><a id="26565" class="Symbol">}{</a><a id="26567" class="Argument">d2</a> <a id="26570" class="Symbol">=</a> <a id="26572" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26572" class="Bound">dls</a><a id="26575" class="Symbol">}</a> <a id="26577" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26577" class="Bound">ls⊆ks</a> <a id="26583" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26583" class="Bound">ls⦂Ss&lt;:ks⦂Ts</a><a id="26595" class="Symbol">))</a> <a id="26598" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26598" class="Bound">VV</a>
    <a id="26605" class="Keyword">with</a> <a id="26610" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="26620" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26537" class="Bound">⊢V</a> <a id="26623" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26598" class="Bound">VV</a>
<a id="26626" class="Symbol">...</a> <a id="26630" class="Symbol">|</a> <a id="26632" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25618" class="InductiveConstructor">C-rcd</a> <a id="26638" class="Symbol">{</a><a id="26639" class="Argument">ks</a> <a id="26642" class="Symbol">=</a> <a id="26644" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26644" class="Bound">ks′</a><a id="26647" class="Symbol">}</a> <a id="26649" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26649" class="Bound">⊢Ms</a> <a id="26653" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26653" class="Bound">dks′</a> <a id="26658" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26658" class="Bound">As&lt;:Ss</a> <a id="26665" class="Symbol">=</a>
      <a id="26673" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25618" class="InductiveConstructor">C-rcd</a> <a id="26679" class="Symbol">{</a><a id="26680" class="Argument">dls</a> <a id="26684" class="Symbol">=</a> <a id="26686" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#6753" class="Function">distinct-relevant</a> <a id="26704" class="Bound">dls</a><a id="26707" class="Symbol">}</a> <a id="26709" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26649" class="Bound">⊢Ms</a> <a id="26713" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26653" class="Bound">dks′</a> <a id="26718" class="Symbol">(</a><a id="26719" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#14172" class="Function">&lt;:-trans</a> <a id="26728" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#26658" class="Bound">As&lt;:Ss</a> <a id="26735" class="Symbol">(</a><a id="26736" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9373" class="InductiveConstructor">&lt;:-rcd</a> <a id="26743" class="Bound">ls⊆ks</a> <a id="26749" class="Bound">ls⦂Ss&lt;:ks⦂Ts</a><a id="26761" class="Symbol">))</a>
</pre>{% endraw %}The case for subsumption (`⊢<:`) is interesting. We proceed by
cases on the derivation of subtyping.

* If the last rule is `<:-nat`, then we have `∅ ⊢ V ⦂ ℕ`
  and the induction hypothesis gives us `Canonical V ⦂ ℕ`.

* If the last rule is `<:-fun`, then we have `A ⇒ B <: C ⇒ D`
  and `∅ ⊢ ƛ N ⦂ A ⇒ B`. By the induction hypothesis,
  we have `∅ , A′ ⊢ N ⦂ B′` and `A′ ⇒ B′ <: A ⇒ B` for some `A′` and `B′`.
  We conclude that `Canonical (ƛ N) ⦂ C ⇒ D` by rule `C-ƛ` and the transitivity of subtyping.

* If the last rule is `<:-rcd`, then we have `｛ ls ⦂ Ss ｝ <: ｛ ks ⦂ Ts ｝`
  and `∅ ⊢ ｛ ks′ := Ms ｝ ⦂ ｛ ks ⦂ Ss ｝`. By the induction hypothesis,
  we have `∅ ⊢* Ms ⦂ As`, `distinct ks′`, and `｛ ks′ ⦂ As ｝ <: ｛ ks ⦂ Ss ｝`.
  We conclude that `Canonical ｛ ks′ := Ms ｝ ⦂ ｛ ks ⦂ Ts ｝`
  by rule `C-rcd` and the transitivity of subtyping.


If a term is canonical, then it is also a value.
{% raw %}<pre class="Agda"><a id="value"></a><a id="27661" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27661" class="Function">value</a> <a id="27667" class="Symbol">:</a> <a id="27669" class="Symbol">∀</a> <a id="27671" class="Symbol">{</a><a id="27672" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27672" class="Bound">M</a> <a id="27674" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27674" class="Bound">A</a><a id="27675" class="Symbol">}</a>
  <a id="27679" class="Symbol">→</a> <a id="27681" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">Canonical</a> <a id="27691" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27672" class="Bound">M</a> <a id="27693" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">⦂</a> <a id="27695" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27674" class="Bound">A</a>
    <a id="27701" class="Comment">----------------</a>
  <a id="27720" class="Symbol">→</a> <a id="27722" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23046" class="Datatype">Value</a> <a id="27728" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27672" class="Bound">M</a>
<a id="27730" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27661" class="Function">value</a> <a id="27736" class="Symbol">(</a><a id="27737" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25327" class="InductiveConstructor">C-ƛ</a> <a id="27741" class="Symbol">_</a> <a id="27743" class="Symbol">_)</a>     <a id="27750" class="Symbol">=</a> <a id="27752" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23074" class="InductiveConstructor">V-ƛ</a>
<a id="27756" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27661" class="Function">value</a> <a id="27762" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25456" class="InductiveConstructor">C-zero</a>        <a id="27776" class="Symbol">=</a> <a id="27778" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23125" class="InductiveConstructor">V-zero</a>
<a id="27785" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27661" class="Function">value</a> <a id="27791" class="Symbol">(</a><a id="27792" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25522" class="InductiveConstructor">C-suc</a> <a id="27798" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27798" class="Bound">CM</a><a id="27800" class="Symbol">)</a>    <a id="27805" class="Symbol">=</a> <a id="27807" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23177" class="InductiveConstructor">V-suc</a> <a id="27813" class="Symbol">(</a><a id="27814" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27661" class="Function">value</a> <a id="27820" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27798" class="Bound">CM</a><a id="27822" class="Symbol">)</a>
<a id="27824" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27661" class="Function">value</a> <a id="27830" class="Symbol">(</a><a id="27831" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25618" class="InductiveConstructor">C-rcd</a> <a id="27837" class="Symbol">_</a> <a id="27839" class="Symbol">_</a> <a id="27841" class="Symbol">_)</a> <a id="27844" class="Symbol">=</a> <a id="27846" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23250" class="InductiveConstructor">V-rcd</a>
</pre>{% endraw %}
A canonical value is a well-typed value.
{% raw %}<pre class="Agda"><a id="typed"></a><a id="27902" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27902" class="Function">typed</a> <a id="27908" class="Symbol">:</a> <a id="27910" class="Symbol">∀</a> <a id="27912" class="Symbol">{</a><a id="27913" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27913" class="Bound">V</a> <a id="27915" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27915" class="Bound">A</a><a id="27916" class="Symbol">}</a>
  <a id="27920" class="Symbol">→</a> <a id="27922" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">Canonical</a> <a id="27932" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27913" class="Bound">V</a> <a id="27934" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25285" class="Datatype Operator">⦂</a> <a id="27936" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27915" class="Bound">A</a>
    <a id="27942" class="Comment">---------------</a>
  <a id="27960" class="Symbol">→</a> <a id="27962" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16510" class="InductiveConstructor">∅</a> <a id="27964" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="27966" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27913" class="Bound">V</a> <a id="27968" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="27970" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27915" class="Bound">A</a>
<a id="27972" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27902" class="Function">typed</a> <a id="27978" class="Symbol">(</a><a id="27979" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25327" class="InductiveConstructor">C-ƛ</a> <a id="27983" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27983" class="Bound">⊢N</a> <a id="27986" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27986" class="Bound">AB&lt;:CD</a><a id="27992" class="Symbol">)</a> <a id="27994" class="Symbol">=</a> <a id="27996" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="28000" class="Symbol">(</a><a id="28001" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18296" class="InductiveConstructor">⊢ƛ</a> <a id="28004" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27983" class="Bound">⊢N</a><a id="28006" class="Symbol">)</a> <a id="28008" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27986" class="Bound">AB&lt;:CD</a>
<a id="28015" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27902" class="Function">typed</a> <a id="28021" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25456" class="InductiveConstructor">C-zero</a> <a id="28028" class="Symbol">=</a> <a id="28030" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18483" class="InductiveConstructor">⊢zero</a>
<a id="28036" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27902" class="Function">typed</a> <a id="28042" class="Symbol">(</a><a id="28043" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25522" class="InductiveConstructor">C-suc</a> <a id="28049" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28049" class="Bound">c</a><a id="28050" class="Symbol">)</a> <a id="28052" class="Symbol">=</a> <a id="28054" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18542" class="InductiveConstructor">⊢suc</a> <a id="28059" class="Symbol">(</a><a id="28060" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27902" class="Function">typed</a> <a id="28066" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28049" class="Bound">c</a><a id="28067" class="Symbol">)</a>
<a id="28069" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27902" class="Function">typed</a> <a id="28075" class="Symbol">(</a><a id="28076" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25618" class="InductiveConstructor">C-rcd</a> <a id="28082" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28082" class="Bound">⊢Ms</a> <a id="28086" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28086" class="Bound">dks</a> <a id="28090" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28090" class="Bound">As&lt;:Bs</a><a id="28096" class="Symbol">)</a> <a id="28098" class="Symbol">=</a> <a id="28100" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="28104" class="Symbol">(</a><a id="28105" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18856" class="InductiveConstructor">⊢rcd</a> <a id="28110" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28082" class="Bound">⊢Ms</a> <a id="28114" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28086" class="Bound">dks</a><a id="28117" class="Symbol">)</a> <a id="28119" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28090" class="Bound">As&lt;:Bs</a>
</pre>{% endraw %}
## Progress <a name="subtyping-progress"></a>

The Progress theorem states that a well-typed term may either take a
reduction step or it is already a value. The proof of Progress is like
the one in the [Properties]({{ site.baseurl }}/Properties/); it
proceeds by induction on the typing derivation and most of the cases
remain the same. Below we discuss the new cases for records and
subsumption.

{% raw %}<pre class="Agda"><a id="28533" class="Keyword">data</a> <a id="Progress"></a><a id="28538" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28538" class="Datatype">Progress</a> <a id="28547" class="Symbol">(</a><a id="28548" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28548" class="Bound">M</a> <a id="28550" class="Symbol">:</a> <a id="28552" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="28556" class="Symbol">)</a> <a id="28558" class="Symbol">:</a> <a id="28560" class="PrimitiveType">Set</a> <a id="28564" class="Keyword">where</a>

  <a id="Progress.step"></a><a id="28573" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="28578" class="Symbol">:</a> <a id="28580" class="Symbol">∀</a> <a id="28582" class="Symbol">{</a><a id="28583" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28583" class="Bound">N</a><a id="28584" class="Symbol">}</a>
    <a id="28590" class="Symbol">→</a> <a id="28592" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28548" class="Bound">M</a> <a id="28594" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="28597" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28583" class="Bound">N</a>
      <a id="28605" class="Comment">----------</a>
    <a id="28620" class="Symbol">→</a> <a id="28622" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28538" class="Datatype">Progress</a> <a id="28631" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28548" class="Bound">M</a>

  <a id="Progress.done"></a><a id="28636" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28636" class="InductiveConstructor">done</a> <a id="28641" class="Symbol">:</a>
      <a id="28649" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23046" class="Datatype">Value</a> <a id="28655" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28548" class="Bound">M</a>
      <a id="28663" class="Comment">----------</a>
    <a id="28678" class="Symbol">→</a> <a id="28680" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28538" class="Datatype">Progress</a> <a id="28689" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28548" class="Bound">M</a>
</pre>{% endraw %}
{% raw %}<pre class="Agda"><a id="progress"></a><a id="28700" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="28709" class="Symbol">:</a> <a id="28711" class="Symbol">∀</a> <a id="28713" class="Symbol">{</a><a id="28714" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28714" class="Bound">M</a> <a id="28716" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28716" class="Bound">A</a><a id="28717" class="Symbol">}</a>
  <a id="28721" class="Symbol">→</a> <a id="28723" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16510" class="InductiveConstructor">∅</a> <a id="28725" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="28727" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28714" class="Bound">M</a> <a id="28729" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="28731" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28716" class="Bound">A</a>
    <a id="28737" class="Comment">----------</a>
  <a id="28750" class="Symbol">→</a> <a id="28752" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28538" class="Datatype">Progress</a> <a id="28761" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28714" class="Bound">M</a>
<a id="28763" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="28772" class="Symbol">(</a><a id="28773" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18226" class="InductiveConstructor">⊢`</a> <a id="28776" class="Symbol">())</a>
<a id="28780" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="28789" class="Symbol">(</a><a id="28790" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18296" class="InductiveConstructor">⊢ƛ</a> <a id="28793" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28793" class="Bound">⊢N</a><a id="28795" class="Symbol">)</a>                            <a id="28824" class="Symbol">=</a> <a id="28826" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28636" class="InductiveConstructor">done</a> <a id="28831" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23074" class="InductiveConstructor">V-ƛ</a>
<a id="28835" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="28844" class="Symbol">(</a><a id="28845" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18385" class="InductiveConstructor">⊢·</a> <a id="28848" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28848" class="Bound">⊢L</a> <a id="28851" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28851" class="Bound">⊢M</a><a id="28853" class="Symbol">)</a>
    <a id="28859" class="Keyword">with</a> <a id="28864" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="28873" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28848" class="Bound">⊢L</a>
<a id="28876" class="Symbol">...</a> <a id="28880" class="Symbol">|</a> <a id="28882" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="28887" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28887" class="Bound">L—→L′</a>                            <a id="28920" class="Symbol">=</a> <a id="28922" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="28927" class="Symbol">(</a><a id="28928" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23543" class="InductiveConstructor">ξ-·₁</a> <a id="28933" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28887" class="Bound">L—→L′</a><a id="28938" class="Symbol">)</a>
<a id="28940" class="Symbol">...</a> <a id="28944" class="Symbol">|</a> <a id="28946" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28636" class="InductiveConstructor">done</a> <a id="28951" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28951" class="Bound">VL</a>
        <a id="28962" class="Keyword">with</a> <a id="28967" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="28976" class="Bound">⊢M</a>
<a id="28979" class="Symbol">...</a>     <a id="28987" class="Symbol">|</a> <a id="28989" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="28994" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28994" class="Bound">M—→M′</a>                        <a id="29023" class="Symbol">=</a> <a id="29025" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="29030" class="Symbol">(</a><a id="29031" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23629" class="InductiveConstructor">ξ-·₂</a> <a id="29036" class="Bound">VL</a> <a id="29039" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28994" class="Bound">M—→M′</a><a id="29044" class="Symbol">)</a>
<a id="29046" class="Symbol">...</a>     <a id="29054" class="Symbol">|</a> <a id="29056" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28636" class="InductiveConstructor">done</a> <a id="29061" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29061" class="Bound">VM</a> 
        <a id="29073" class="Keyword">with</a> <a id="29078" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="29088" class="Bound">⊢L</a> <a id="29091" class="Bound">VL</a> 
<a id="29095" class="Symbol">...</a>     <a id="29103" class="Symbol">|</a> <a id="29105" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25327" class="InductiveConstructor">C-ƛ</a> <a id="29109" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29109" class="Bound">⊢N</a> <a id="29112" class="Symbol">_</a>                          <a id="29139" class="Symbol">=</a> <a id="29141" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="29146" class="Symbol">(</a><a id="29147" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23730" class="InductiveConstructor">β-ƛ</a> <a id="29151" class="Bound">VM</a><a id="29153" class="Symbol">)</a>
<a id="29155" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="29164" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18483" class="InductiveConstructor">⊢zero</a>                              <a id="29199" class="Symbol">=</a>  <a id="29202" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28636" class="InductiveConstructor">done</a> <a id="29207" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23125" class="InductiveConstructor">V-zero</a>
<a id="29214" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="29223" class="Symbol">(</a><a id="29224" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18542" class="InductiveConstructor">⊢suc</a> <a id="29229" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29229" class="Bound">⊢M</a><a id="29231" class="Symbol">)</a> <a id="29233" class="Keyword">with</a> <a id="29238" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="29247" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29229" class="Bound">⊢M</a>
<a id="29250" class="Symbol">...</a>  <a id="29255" class="Symbol">|</a> <a id="29257" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="29262" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29262" class="Bound">M—→M′</a>                           <a id="29294" class="Symbol">=</a>  <a id="29297" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="29302" class="Symbol">(</a><a id="29303" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23822" class="InductiveConstructor">ξ-suc</a> <a id="29309" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29262" class="Bound">M—→M′</a><a id="29314" class="Symbol">)</a>
<a id="29316" class="Symbol">...</a>  <a id="29321" class="Symbol">|</a> <a id="29323" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28636" class="InductiveConstructor">done</a> <a id="29328" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29328" class="Bound">VM</a>                              <a id="29360" class="Symbol">=</a>  <a id="29363" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28636" class="InductiveConstructor">done</a> <a id="29368" class="Symbol">(</a><a id="29369" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23177" class="InductiveConstructor">V-suc</a> <a id="29375" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29328" class="Bound">VM</a><a id="29377" class="Symbol">)</a>
<a id="29379" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="29388" class="Symbol">(</a><a id="29389" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18621" class="InductiveConstructor">⊢case</a> <a id="29395" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29395" class="Bound">⊢L</a> <a id="29398" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29398" class="Bound">⊢M</a> <a id="29401" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29401" class="Bound">⊢N</a><a id="29403" class="Symbol">)</a> <a id="29405" class="Keyword">with</a> <a id="29410" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="29419" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29395" class="Bound">⊢L</a>
<a id="29422" class="Symbol">...</a> <a id="29426" class="Symbol">|</a> <a id="29428" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="29433" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29433" class="Bound">L—→L′</a>                            <a id="29466" class="Symbol">=</a>  <a id="29469" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="29474" class="Symbol">(</a><a id="29475" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23911" class="InductiveConstructor">ξ-case</a> <a id="29482" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29433" class="Bound">L—→L′</a><a id="29487" class="Symbol">)</a>
<a id="29489" class="Symbol">...</a> <a id="29493" class="Symbol">|</a> <a id="29495" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28636" class="InductiveConstructor">done</a> <a id="29500" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29500" class="Bound">VL</a> <a id="29503" class="Keyword">with</a> <a id="29508" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="29518" class="Bound">⊢L</a> <a id="29521" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29500" class="Bound">VL</a>
<a id="29524" class="Symbol">...</a>   <a id="29530" class="Symbol">|</a> <a id="29532" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25456" class="InductiveConstructor">C-zero</a>                              <a id="29568" class="Symbol">=</a>  <a id="29571" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="29576" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24081" class="InductiveConstructor">β-zero</a>
<a id="29583" class="Symbol">...</a>   <a id="29589" class="Symbol">|</a> <a id="29591" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25522" class="InductiveConstructor">C-suc</a> <a id="29597" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29597" class="Bound">CL</a>                            <a id="29627" class="Symbol">=</a>  <a id="29630" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="29635" class="Symbol">(</a><a id="29636" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24191" class="InductiveConstructor">β-suc</a> <a id="29642" class="Symbol">(</a><a id="29643" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27661" class="Function">value</a> <a id="29649" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29597" class="Bound">CL</a><a id="29651" class="Symbol">))</a>
<a id="29654" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="29663" class="Symbol">(</a><a id="29664" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18780" class="InductiveConstructor">⊢μ</a> <a id="29667" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29667" class="Bound">⊢M</a><a id="29669" class="Symbol">)</a>                            <a id="29698" class="Symbol">=</a>  <a id="29701" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="29706" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24333" class="InductiveConstructor">β-μ</a>
<a id="29710" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="29719" class="Symbol">(</a><a id="29720" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19013" class="InductiveConstructor">⊢#</a> <a id="29723" class="Symbol">{</a><a id="29724" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29724" class="Bound">n</a><a id="29725" class="Symbol">}{</a><a id="29727" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29727" class="Bound">Γ</a><a id="29728" class="Symbol">}{</a><a id="29730" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29730" class="Bound">A</a><a id="29731" class="Symbol">}{</a><a id="29733" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29733" class="Bound">M</a><a id="29734" class="Symbol">}{</a><a id="29736" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29736" class="Bound">l</a><a id="29737" class="Symbol">}{</a><a id="29739" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29739" class="Bound">ls</a><a id="29741" class="Symbol">}{</a><a id="29743" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29743" class="Bound">As</a><a id="29745" class="Symbol">}{</a><a id="29747" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29747" class="Bound">i</a><a id="29748" class="Symbol">}{</a><a id="29750" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29750" class="Bound">d</a><a id="29751" class="Symbol">}</a> <a id="29753" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29753" class="Bound">⊢M</a> <a id="29756" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29756" class="Bound">ls[i]=l</a> <a id="29764" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29764" class="Bound">As[i]=A</a><a id="29771" class="Symbol">)</a>
    <a id="29777" class="Keyword">with</a> <a id="29782" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="29791" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29753" class="Bound">⊢M</a>
<a id="29794" class="Symbol">...</a> <a id="29798" class="Symbol">|</a> <a id="29800" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="29805" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29805" class="Bound">M—→M′</a>                            <a id="29838" class="Symbol">=</a>  <a id="29841" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="29846" class="Symbol">(</a><a id="29847" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24401" class="InductiveConstructor">ξ-#</a> <a id="29851" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29805" class="Bound">M—→M′</a><a id="29856" class="Symbol">)</a>
<a id="29858" class="Symbol">...</a> <a id="29862" class="Symbol">|</a> <a id="29864" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28636" class="InductiveConstructor">done</a> <a id="29869" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29869" class="Bound">VM</a>
    <a id="29876" class="Keyword">with</a> <a id="29881" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="29891" class="Bound">⊢M</a> <a id="29894" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29869" class="Bound">VM</a>
<a id="29897" class="Symbol">...</a> <a id="29901" class="Symbol">|</a> <a id="29903" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25618" class="InductiveConstructor">C-rcd</a> <a id="29909" class="Symbol">{</a><a id="29910" class="Argument">ks</a> <a id="29913" class="Symbol">=</a> <a id="29915" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29915" class="Bound">ms</a><a id="29917" class="Symbol">}{</a><a id="29919" class="Argument">As</a> <a id="29922" class="Symbol">=</a> <a id="29924" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29924" class="Bound">Bs</a><a id="29926" class="Symbol">}</a> <a id="29928" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29928" class="Bound">⊢Ms</a> <a id="29932" class="Symbol">_</a> <a id="29934" class="Symbol">(</a><a id="29935" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9373" class="InductiveConstructor">&lt;:-rcd</a> <a id="29942" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29942" class="Bound">ls⊆ms</a> <a id="29948" class="Symbol">_)</a>
    <a id="29955" class="Keyword">with</a> <a id="29960" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7959" class="Function">lookup-⊆</a> <a id="29969" class="Symbol">{</a><a id="29970" class="Argument">i</a> <a id="29972" class="Symbol">=</a> <a id="29974" class="Bound">i</a><a id="29975" class="Symbol">}</a> <a id="29977" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29942" class="Bound">ls⊆ms</a>
<a id="29983" class="Symbol">...</a> <a id="29987" class="Symbol">|</a> <a id="29989" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="29991" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29991" class="Bound">k</a> <a id="29993" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="29995" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29995" class="Bound">ls[i]=ms[k]</a> <a id="30007" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>                   <a id="30027" class="Symbol">=</a>  <a id="30030" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28573" class="InductiveConstructor">step</a> <a id="30035" class="Symbol">(</a><a id="30036" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24465" class="InductiveConstructor">β-#</a> <a id="30040" class="Symbol">{</a><a id="30041" class="Argument">j</a> <a id="30043" class="Symbol">=</a> <a id="30045" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29991" class="Bound">k</a><a id="30046" class="Symbol">}(</a><a id="30048" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#984" class="Function">trans</a> <a id="30054" class="Symbol">(</a><a id="30055" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="30059" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#29995" class="Bound">ls[i]=ms[k]</a><a id="30070" class="Symbol">)</a> <a id="30072" class="Bound">ls[i]=l</a><a id="30079" class="Symbol">))</a>
<a id="30082" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="30091" class="Symbol">(</a><a id="30092" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18856" class="InductiveConstructor">⊢rcd</a> <a id="30097" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#30097" class="Bound">x</a> <a id="30099" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#30099" class="Bound">d</a><a id="30100" class="Symbol">)</a>                         <a id="30126" class="Symbol">=</a>  <a id="30129" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28636" class="InductiveConstructor">done</a> <a id="30134" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23250" class="InductiveConstructor">V-rcd</a>
<a id="30140" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="30149" class="Symbol">(</a><a id="30150" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="30154" class="Symbol">{</a><a id="30155" class="Argument">A</a> <a id="30157" class="Symbol">=</a> <a id="30159" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#30159" class="Bound">A</a><a id="30160" class="Symbol">}{</a><a id="30162" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#30162" class="Bound">B</a><a id="30163" class="Symbol">}</a> <a id="30165" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#30165" class="Bound">⊢M</a> <a id="30168" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#30168" class="Bound">A&lt;:B</a><a id="30172" class="Symbol">)</a>           <a id="30184" class="Symbol">=</a>  <a id="30187" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#28700" class="Function">progress</a> <a id="30196" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#30165" class="Bound">⊢M</a>
</pre>{% endraw %}* Case `⊢#`: We have `Γ ⊢ M ⦂ ｛ ls ⦂ As ｝`, `lookup ls i ≡ l`, and `lookup As i ≡ A`.
  By the induction hypothesis, either `M —→ M′` or `M` is a value. In the later case we
  conclude that `M # l —→ M′ # l` by rule `ξ-#`. On the other hand, if `M` is a value,
  we invoke the canonical forms lemma to show that `M` has the form `｛ ms := Ms ｝`
  where `∅ ⊢* Ms ⦂ Bs` and `ls ⊆ ms`. By lemma `lookup-⊆`, we have
  `lookup ls i ≡ lookup ms k` for some `k`. Thus, we have `lookup ms k ≡ l`
  and we conclude `｛ ms := Ms ｝ # l —→ lookup Ms k` by rule `β-#`.

* Case `⊢rcd`: we immediately characterize the record as a value.

* Case `⊢<:`: we invoke the induction hypothesis on sub-derivation of `Γ ⊢ M ⦂ A`.
  

## Preservation <a name="subtyping-preservation"></a>

In this section we prove that when a well-typed term takes a reduction
step, the result is another well-typed term with the same type.

As mentioned earlier, we need to prove that substitution preserve
types, which in turn requires that renaming preserves types.  The
proofs of these lemmas are adapted from the intrinsic versions of the
`ext`, `rename`, `exts`, and `subst` functions in the
[DeBruijn]({{ site.baseurl }}/DeBruijn/) chapter.

We define the following abbreviation for a *well-typed renaming* from Γ
to Δ, that is, a renaming that sends variables in Γ to variables in Δ
with the same type.
{% raw %}<pre class="Agda"><a id="_⦂ᵣ_⇒_"></a><a id="31576" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31576" class="Function Operator">_⦂ᵣ_⇒_</a> <a id="31583" class="Symbol">:</a> <a id="31585" class="Symbol">(</a><a id="31586" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="31589" class="Symbol">→</a> <a id="31591" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a><a id="31593" class="Symbol">)</a> <a id="31595" class="Symbol">→</a> <a id="31597" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16488" class="Datatype">Context</a> <a id="31605" class="Symbol">→</a> <a id="31607" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16488" class="Datatype">Context</a> <a id="31615" class="Symbol">→</a> <a id="31617" class="PrimitiveType">Set</a>
<a id="31621" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31621" class="Bound">ρ</a> <a id="31623" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31576" class="Function Operator">⦂ᵣ</a> <a id="31626" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31626" class="Bound">Γ</a> <a id="31628" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31576" class="Function Operator">⇒</a> <a id="31630" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31630" class="Bound">Δ</a> <a id="31632" class="Symbol">=</a> <a id="31634" class="Symbol">∀</a> <a id="31636" class="Symbol">{</a><a id="31637" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31637" class="Bound">x</a> <a id="31639" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31639" class="Bound">A</a><a id="31640" class="Symbol">}</a> <a id="31642" class="Symbol">→</a> <a id="31644" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31626" class="Bound">Γ</a> <a id="31646" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">∋</a> <a id="31648" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31637" class="Bound">x</a> <a id="31650" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">⦂</a> <a id="31652" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31639" class="Bound">A</a> <a id="31654" class="Symbol">→</a> <a id="31656" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31630" class="Bound">Δ</a> <a id="31658" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">∋</a> <a id="31660" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31621" class="Bound">ρ</a> <a id="31662" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31637" class="Bound">x</a> <a id="31664" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">⦂</a> <a id="31666" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31639" class="Bound">A</a>
</pre>{% endraw %}
The `ext` function takes a well-typed renaming from Γ to Δ
and extends it to become a renaming from (Γ , B) to (Δ , B).
{% raw %}<pre class="Agda"><a id="ext-pres"></a><a id="31797" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31797" class="Function">ext-pres</a> <a id="31806" class="Symbol">:</a> <a id="31808" class="Symbol">∀</a> <a id="31810" class="Symbol">{</a><a id="31811" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31811" class="Bound">Γ</a> <a id="31813" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31813" class="Bound">Δ</a> <a id="31815" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31815" class="Bound">ρ</a> <a id="31817" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31817" class="Bound">B</a><a id="31818" class="Symbol">}</a>
  <a id="31822" class="Symbol">→</a> <a id="31824" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31815" class="Bound">ρ</a> <a id="31826" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31576" class="Function Operator">⦂ᵣ</a> <a id="31829" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31811" class="Bound">Γ</a> <a id="31831" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31576" class="Function Operator">⇒</a> <a id="31833" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31813" class="Bound">Δ</a>
    <a id="31839" class="Comment">--------------------------------</a>
  <a id="31874" class="Symbol">→</a> <a id="31876" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20715" class="Function">ext</a> <a id="31880" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31815" class="Bound">ρ</a> <a id="31882" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31576" class="Function Operator">⦂ᵣ</a> <a id="31885" class="Symbol">(</a><a id="31886" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31811" class="Bound">Γ</a> <a id="31888" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">,</a> <a id="31890" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31817" class="Bound">B</a><a id="31891" class="Symbol">)</a> <a id="31893" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31576" class="Function Operator">⇒</a> <a id="31895" class="Symbol">(</a><a id="31896" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31813" class="Bound">Δ</a> <a id="31898" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">,</a> <a id="31900" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31817" class="Bound">B</a><a id="31901" class="Symbol">)</a>
<a id="31903" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31797" class="Function">ext-pres</a> <a id="31912" class="Symbol">{</a><a id="31913" class="Argument">ρ</a> <a id="31915" class="Symbol">=</a> <a id="31917" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31917" class="Bound">ρ</a> <a id="31919" class="Symbol">}</a> <a id="31921" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31921" class="Bound">ρ⦂</a> <a id="31924" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16746" class="InductiveConstructor">Z</a> <a id="31926" class="Symbol">=</a> <a id="31928" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16746" class="InductiveConstructor">Z</a>
<a id="31930" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31797" class="Function">ext-pres</a> <a id="31939" class="Symbol">{</a><a id="31940" class="Argument">ρ</a> <a id="31942" class="Symbol">=</a> <a id="31944" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31944" class="Bound">ρ</a> <a id="31946" class="Symbol">}</a> <a id="31948" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31948" class="Bound">ρ⦂</a> <a id="31951" class="Symbol">(</a><a id="31952" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16806" class="InductiveConstructor">S</a> <a id="31954" class="Symbol">{</a><a id="31955" class="Argument">x</a> <a id="31957" class="Symbol">=</a> <a id="31959" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31959" class="Bound">x</a><a id="31960" class="Symbol">}</a> <a id="31962" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31962" class="Bound">∋x</a><a id="31964" class="Symbol">)</a> <a id="31966" class="Symbol">=</a>  <a id="31969" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16806" class="InductiveConstructor">S</a> <a id="31971" class="Symbol">(</a><a id="31972" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31948" class="Bound">ρ⦂</a> <a id="31975" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31962" class="Bound">∋x</a><a id="31977" class="Symbol">)</a>
</pre>{% endraw %}
Next we prove that both `rename` and `rename-vec` preserve types.  We
use the `ext-pres` lemma in each of the cases with a variable binding: `⊢ƛ`,
`⊢μ`, and `⊢case`.
{% raw %}<pre class="Agda"><a id="ren-vec-pres"></a><a id="32154" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32154" class="Function">ren-vec-pres</a> <a id="32167" class="Symbol">:</a> <a id="32169" class="Symbol">∀</a> <a id="32171" class="Symbol">{</a><a id="32172" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32172" class="Bound">Γ</a> <a id="32174" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32174" class="Bound">Δ</a> <a id="32176" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32176" class="Bound">ρ</a><a id="32177" class="Symbol">}{</a><a id="32179" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32179" class="Bound">n</a><a id="32180" class="Symbol">}{</a><a id="32182" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32182" class="Bound">Ms</a> <a id="32185" class="Symbol">:</a> <a id="32187" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="32191" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="32196" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32179" class="Bound">n</a><a id="32197" class="Symbol">}{</a><a id="32199" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32199" class="Bound">As</a> <a id="32202" class="Symbol">:</a> <a id="32204" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="32208" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="32213" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32179" class="Bound">n</a><a id="32214" class="Symbol">}</a>
  <a id="32218" class="Symbol">→</a> <a id="32220" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32176" class="Bound">ρ</a> <a id="32222" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31576" class="Function Operator">⦂ᵣ</a> <a id="32225" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32172" class="Bound">Γ</a> <a id="32227" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31576" class="Function Operator">⇒</a> <a id="32229" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32174" class="Bound">Δ</a>  <a id="32232" class="Symbol">→</a>  <a id="32235" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32172" class="Bound">Γ</a> <a id="32237" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⊢*</a> <a id="32240" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32182" class="Bound">Ms</a> <a id="32243" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⦂</a> <a id="32245" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32199" class="Bound">As</a>  <a id="32249" class="Symbol">→</a>  <a id="32252" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32174" class="Bound">Δ</a> <a id="32254" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⊢*</a> <a id="32257" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20923" class="Function">rename-vec</a> <a id="32268" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32176" class="Bound">ρ</a> <a id="32270" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32182" class="Bound">Ms</a> <a id="32273" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⦂</a> <a id="32275" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32199" class="Bound">As</a>

<a id="rename-pres"></a><a id="32279" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32291" class="Symbol">:</a> <a id="32293" class="Symbol">∀</a> <a id="32295" class="Symbol">{</a><a id="32296" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32296" class="Bound">Γ</a> <a id="32298" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32298" class="Bound">Δ</a> <a id="32300" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32300" class="Bound">ρ</a> <a id="32302" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32302" class="Bound">M</a> <a id="32304" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32304" class="Bound">A</a><a id="32305" class="Symbol">}</a>
  <a id="32309" class="Symbol">→</a> <a id="32311" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32300" class="Bound">ρ</a> <a id="32313" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31576" class="Function Operator">⦂ᵣ</a> <a id="32316" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32296" class="Bound">Γ</a> <a id="32318" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31576" class="Function Operator">⇒</a> <a id="32320" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32298" class="Bound">Δ</a>
  <a id="32324" class="Symbol">→</a> <a id="32326" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32296" class="Bound">Γ</a> <a id="32328" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="32330" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32302" class="Bound">M</a> <a id="32332" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="32334" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32304" class="Bound">A</a>
    <a id="32340" class="Comment">------------------</a>
  <a id="32361" class="Symbol">→</a> <a id="32363" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32298" class="Bound">Δ</a> <a id="32365" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="32367" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20980" class="Function">rename</a> <a id="32374" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32300" class="Bound">ρ</a> <a id="32376" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32302" class="Bound">M</a> <a id="32378" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="32380" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32304" class="Bound">A</a>
<a id="32382" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32394" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32394" class="Bound">ρ⦂</a> <a id="32397" class="Symbol">(</a><a id="32398" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18226" class="InductiveConstructor">⊢`</a> <a id="32401" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32401" class="Bound">∋w</a><a id="32403" class="Symbol">)</a>           <a id="32415" class="Symbol">=</a>  <a id="32418" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18226" class="InductiveConstructor">⊢`</a> <a id="32421" class="Symbol">(</a><a id="32422" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32394" class="Bound">ρ⦂</a> <a id="32425" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32401" class="Bound">∋w</a><a id="32427" class="Symbol">)</a>
<a id="32429" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32441" class="Symbol">{</a><a id="32442" class="Argument">ρ</a> <a id="32444" class="Symbol">=</a> <a id="32446" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32446" class="Bound">ρ</a><a id="32447" class="Symbol">}</a> <a id="32449" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32449" class="Bound">ρ⦂</a> <a id="32452" class="Symbol">(</a><a id="32453" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18296" class="InductiveConstructor">⊢ƛ</a> <a id="32456" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32456" class="Bound">⊢N</a><a id="32458" class="Symbol">)</a>   <a id="32462" class="Symbol">=</a>  <a id="32465" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18296" class="InductiveConstructor">⊢ƛ</a> <a id="32468" class="Symbol">(</a><a id="32469" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32481" class="Symbol">{</a><a id="32482" class="Argument">ρ</a> <a id="32484" class="Symbol">=</a> <a id="32486" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20715" class="Function">ext</a> <a id="32490" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32446" class="Bound">ρ</a><a id="32491" class="Symbol">}</a> <a id="32493" class="Symbol">(</a><a id="32494" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31797" class="Function">ext-pres</a> <a id="32503" class="Symbol">{</a><a id="32504" class="Argument">ρ</a> <a id="32506" class="Symbol">=</a> <a id="32508" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32446" class="Bound">ρ</a><a id="32509" class="Symbol">}</a> <a id="32511" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32449" class="Bound">ρ⦂</a><a id="32513" class="Symbol">)</a> <a id="32515" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32456" class="Bound">⊢N</a><a id="32517" class="Symbol">)</a>
<a id="32519" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32531" class="Symbol">{</a><a id="32532" class="Argument">ρ</a> <a id="32534" class="Symbol">=</a> <a id="32536" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32536" class="Bound">ρ</a><a id="32537" class="Symbol">}</a> <a id="32539" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32539" class="Bound">ρ⦂</a> <a id="32542" class="Symbol">(</a><a id="32543" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18385" class="InductiveConstructor">⊢·</a> <a id="32546" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32546" class="Bound">⊢L</a> <a id="32549" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32549" class="Bound">⊢M</a><a id="32551" class="Symbol">)=</a>  <a id="32555" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18385" class="InductiveConstructor">⊢·</a> <a id="32558" class="Symbol">(</a><a id="32559" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32571" class="Symbol">{</a><a id="32572" class="Argument">ρ</a> <a id="32574" class="Symbol">=</a> <a id="32576" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32536" class="Bound">ρ</a><a id="32577" class="Symbol">}</a> <a id="32579" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32539" class="Bound">ρ⦂</a> <a id="32582" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32546" class="Bound">⊢L</a><a id="32584" class="Symbol">)</a> <a id="32586" class="Symbol">(</a><a id="32587" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32599" class="Symbol">{</a><a id="32600" class="Argument">ρ</a> <a id="32602" class="Symbol">=</a> <a id="32604" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32536" class="Bound">ρ</a><a id="32605" class="Symbol">}</a> <a id="32607" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32539" class="Bound">ρ⦂</a> <a id="32610" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32549" class="Bound">⊢M</a><a id="32612" class="Symbol">)</a>
<a id="32614" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32626" class="Symbol">{</a><a id="32627" class="Argument">ρ</a> <a id="32629" class="Symbol">=</a> <a id="32631" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32631" class="Bound">ρ</a><a id="32632" class="Symbol">}</a> <a id="32634" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32634" class="Bound">ρ⦂</a> <a id="32637" class="Symbol">(</a><a id="32638" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18780" class="InductiveConstructor">⊢μ</a> <a id="32641" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32641" class="Bound">⊢M</a><a id="32643" class="Symbol">)</a>   <a id="32647" class="Symbol">=</a>  <a id="32650" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18780" class="InductiveConstructor">⊢μ</a> <a id="32653" class="Symbol">(</a><a id="32654" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32666" class="Symbol">{</a><a id="32667" class="Argument">ρ</a> <a id="32669" class="Symbol">=</a> <a id="32671" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#20715" class="Function">ext</a> <a id="32675" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32631" class="Bound">ρ</a><a id="32676" class="Symbol">}</a> <a id="32678" class="Symbol">(</a><a id="32679" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31797" class="Function">ext-pres</a> <a id="32688" class="Symbol">{</a><a id="32689" class="Argument">ρ</a> <a id="32691" class="Symbol">=</a> <a id="32693" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32631" class="Bound">ρ</a><a id="32694" class="Symbol">}</a> <a id="32696" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32634" class="Bound">ρ⦂</a><a id="32698" class="Symbol">)</a> <a id="32700" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32641" class="Bound">⊢M</a><a id="32702" class="Symbol">)</a>
<a id="32704" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32716" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32716" class="Bound">ρ⦂</a> <a id="32719" class="Symbol">(</a><a id="32720" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18856" class="InductiveConstructor">⊢rcd</a> <a id="32725" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32725" class="Bound">⊢Ms</a> <a id="32729" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32729" class="Bound">dls</a><a id="32732" class="Symbol">)</a>    <a id="32737" class="Symbol">=</a> <a id="32739" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18856" class="InductiveConstructor">⊢rcd</a> <a id="32744" class="Symbol">(</a><a id="32745" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32154" class="Function">ren-vec-pres</a> <a id="32758" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32716" class="Bound">ρ⦂</a> <a id="32761" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32725" class="Bound">⊢Ms</a> <a id="32765" class="Symbol">)</a> <a id="32767" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32729" class="Bound">dls</a>
<a id="32771" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32783" class="Symbol">{</a><a id="32784" class="Argument">ρ</a> <a id="32786" class="Symbol">=</a> <a id="32788" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32788" class="Bound">ρ</a><a id="32789" class="Symbol">}</a> <a id="32791" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32791" class="Bound">ρ⦂</a> <a id="32794" class="Symbol">(</a><a id="32795" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19013" class="InductiveConstructor">⊢#</a> <a id="32798" class="Symbol">{</a><a id="32799" class="Argument">d</a> <a id="32801" class="Symbol">=</a> <a id="32803" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32803" class="Bound">d</a><a id="32804" class="Symbol">}</a> <a id="32806" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32806" class="Bound">⊢M</a> <a id="32809" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32809" class="Bound">lif</a> <a id="32813" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32813" class="Bound">liA</a><a id="32816" class="Symbol">)</a> <a id="32818" class="Symbol">=</a> <a id="32820" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19013" class="InductiveConstructor">⊢#</a> <a id="32823" class="Symbol">{</a><a id="32824" class="Argument">d</a> <a id="32826" class="Symbol">=</a> <a id="32828" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32803" class="Bound">d</a><a id="32829" class="Symbol">}(</a><a id="32831" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32843" class="Symbol">{</a><a id="32844" class="Argument">ρ</a> <a id="32846" class="Symbol">=</a> <a id="32848" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32788" class="Bound">ρ</a><a id="32849" class="Symbol">}</a> <a id="32851" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32791" class="Bound">ρ⦂</a> <a id="32854" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32806" class="Bound">⊢M</a><a id="32856" class="Symbol">)</a> <a id="32858" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32809" class="Bound">lif</a> <a id="32862" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32813" class="Bound">liA</a>
<a id="32866" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32878" class="Symbol">{</a><a id="32879" class="Argument">ρ</a> <a id="32881" class="Symbol">=</a> <a id="32883" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32883" class="Bound">ρ</a><a id="32884" class="Symbol">}</a> <a id="32886" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32886" class="Bound">ρ⦂</a> <a id="32889" class="Symbol">(</a><a id="32890" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="32894" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32894" class="Bound">⊢M</a> <a id="32897" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32897" class="Bound">lt</a><a id="32899" class="Symbol">)</a> <a id="32901" class="Symbol">=</a> <a id="32903" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="32907" class="Symbol">(</a><a id="32908" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32920" class="Symbol">{</a><a id="32921" class="Argument">ρ</a> <a id="32923" class="Symbol">=</a> <a id="32925" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32883" class="Bound">ρ</a><a id="32926" class="Symbol">}</a> <a id="32928" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32886" class="Bound">ρ⦂</a> <a id="32931" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32894" class="Bound">⊢M</a><a id="32933" class="Symbol">)</a> <a id="32935" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32897" class="Bound">lt</a>
<a id="32938" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32950" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32950" class="Bound">ρ⦂</a> <a id="32953" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18483" class="InductiveConstructor">⊢zero</a>               <a id="32973" class="Symbol">=</a> <a id="32975" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18483" class="InductiveConstructor">⊢zero</a>
<a id="32981" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="32993" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32993" class="Bound">ρ⦂</a> <a id="32996" class="Symbol">(</a><a id="32997" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18542" class="InductiveConstructor">⊢suc</a> <a id="33002" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33002" class="Bound">⊢M</a><a id="33004" class="Symbol">)</a>           <a id="33016" class="Symbol">=</a> <a id="33018" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18542" class="InductiveConstructor">⊢suc</a> <a id="33023" class="Symbol">(</a><a id="33024" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="33036" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32993" class="Bound">ρ⦂</a> <a id="33039" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33002" class="Bound">⊢M</a><a id="33041" class="Symbol">)</a>
<a id="33043" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="33055" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33055" class="Bound">ρ⦂</a> <a id="33058" class="Symbol">(</a><a id="33059" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18621" class="InductiveConstructor">⊢case</a> <a id="33065" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33065" class="Bound">⊢L</a> <a id="33068" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33068" class="Bound">⊢M</a> <a id="33071" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33071" class="Bound">⊢N</a><a id="33073" class="Symbol">)</a>    <a id="33078" class="Symbol">=</a>
    <a id="33084" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18621" class="InductiveConstructor">⊢case</a> <a id="33090" class="Symbol">(</a><a id="33091" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="33103" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33055" class="Bound">ρ⦂</a> <a id="33106" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33065" class="Bound">⊢L</a><a id="33108" class="Symbol">)</a> <a id="33110" class="Symbol">(</a><a id="33111" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="33123" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33055" class="Bound">ρ⦂</a> <a id="33126" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33068" class="Bound">⊢M</a><a id="33128" class="Symbol">)</a> <a id="33130" class="Symbol">(</a><a id="33131" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="33143" class="Symbol">(</a><a id="33144" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#31797" class="Function">ext-pres</a> <a id="33153" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33055" class="Bound">ρ⦂</a><a id="33155" class="Symbol">)</a> <a id="33157" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33071" class="Bound">⊢N</a><a id="33159" class="Symbol">)</a>

<a id="33162" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32154" class="Function">ren-vec-pres</a> <a id="33175" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33175" class="Bound">ρ⦂</a> <a id="33178" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19285" class="InductiveConstructor">⊢*-[]</a> <a id="33184" class="Symbol">=</a> <a id="33186" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19285" class="InductiveConstructor">⊢*-[]</a>
<a id="33192" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32154" class="Function">ren-vec-pres</a> <a id="33205" class="Symbol">{</a><a id="33206" class="Argument">ρ</a> <a id="33208" class="Symbol">=</a> <a id="33210" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33210" class="Bound">ρ</a><a id="33211" class="Symbol">}</a> <a id="33213" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33213" class="Bound">ρ⦂</a> <a id="33216" class="Symbol">(</a><a id="33217" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19316" class="InductiveConstructor">⊢*-∷</a> <a id="33222" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33222" class="Bound">⊢M</a> <a id="33225" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33225" class="Bound">⊢Ms</a><a id="33228" class="Symbol">)</a> <a id="33230" class="Symbol">=</a>
  <a id="33234" class="Keyword">let</a> <a id="33238" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33238" class="Bound">IH</a> <a id="33241" class="Symbol">=</a> <a id="33243" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32154" class="Function">ren-vec-pres</a> <a id="33256" class="Symbol">{</a><a id="33257" class="Argument">ρ</a> <a id="33259" class="Symbol">=</a> <a id="33261" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33210" class="Bound">ρ</a><a id="33262" class="Symbol">}</a> <a id="33264" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33213" class="Bound">ρ⦂</a> <a id="33267" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33225" class="Bound">⊢Ms</a> <a id="33271" class="Keyword">in</a>
  <a id="33276" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19316" class="InductiveConstructor">⊢*-∷</a> <a id="33281" class="Symbol">(</a><a id="33282" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="33294" class="Symbol">{</a><a id="33295" class="Argument">ρ</a> <a id="33297" class="Symbol">=</a> <a id="33299" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33210" class="Bound">ρ</a><a id="33300" class="Symbol">}</a> <a id="33302" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33213" class="Bound">ρ⦂</a> <a id="33305" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33222" class="Bound">⊢M</a><a id="33307" class="Symbol">)</a> <a id="33309" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33238" class="Bound">IH</a>
</pre>{% endraw %}
A *well-typed substitution* from Γ to Δ sends variables in Γ to terms
of the same type in the context Δ.
{% raw %}<pre class="Agda"><a id="_⦂_⇒_"></a><a id="33426" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33426" class="Function Operator">_⦂_⇒_</a> <a id="33432" class="Symbol">:</a> <a id="33434" class="Symbol">(</a><a id="33435" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17177" class="Function">Id</a> <a id="33438" class="Symbol">→</a> <a id="33440" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a><a id="33444" class="Symbol">)</a> <a id="33446" class="Symbol">→</a> <a id="33448" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16488" class="Datatype">Context</a> <a id="33456" class="Symbol">→</a> <a id="33458" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16488" class="Datatype">Context</a> <a id="33466" class="Symbol">→</a> <a id="33468" class="PrimitiveType">Set</a>
<a id="33472" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33472" class="Bound">σ</a> <a id="33474" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33426" class="Function Operator">⦂</a> <a id="33476" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33476" class="Bound">Γ</a> <a id="33478" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33426" class="Function Operator">⇒</a> <a id="33480" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33480" class="Bound">Δ</a> <a id="33482" class="Symbol">=</a> <a id="33484" class="Symbol">∀</a> <a id="33486" class="Symbol">{</a><a id="33487" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33487" class="Bound">A</a> <a id="33489" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33489" class="Bound">x</a><a id="33490" class="Symbol">}</a> <a id="33492" class="Symbol">→</a> <a id="33494" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33476" class="Bound">Γ</a> <a id="33496" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">∋</a> <a id="33498" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33489" class="Bound">x</a> <a id="33500" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">⦂</a> <a id="33502" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33487" class="Bound">A</a> <a id="33504" class="Symbol">→</a> <a id="33506" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33480" class="Bound">Δ</a> <a id="33508" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="33510" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="33516" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33472" class="Bound">σ</a> <a id="33518" class="Symbol">(</a><a id="33519" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17464" class="InductiveConstructor Operator">`</a> <a id="33521" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33489" class="Bound">x</a><a id="33522" class="Symbol">)</a> <a id="33524" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="33526" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33487" class="Bound">A</a>
</pre>{% endraw %}
The `exts` function sends well-typed substitutions from Γ to Δ to
well-typed substitutions from (Γ , B) to (Δ , B). In the case for `S`,
we note that `exts σ (suc x) ≡ rename sub (σ x)`, so we need to prove
`Δ , B ⊢ rename suc (σ x) ⦂ A`, which we obtain by the `rename-pres`
lemma.

{% raw %}<pre class="Agda"><a id="exts-pres"></a><a id="33821" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33821" class="Function">exts-pres</a> <a id="33831" class="Symbol">:</a> <a id="33833" class="Symbol">∀</a> <a id="33835" class="Symbol">{</a><a id="33836" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33836" class="Bound">Γ</a> <a id="33838" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33838" class="Bound">Δ</a> <a id="33840" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33840" class="Bound">σ</a> <a id="33842" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33842" class="Bound">B</a><a id="33843" class="Symbol">}</a>
  <a id="33847" class="Symbol">→</a> <a id="33849" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33840" class="Bound">σ</a> <a id="33851" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33426" class="Function Operator">⦂</a> <a id="33853" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33836" class="Bound">Γ</a> <a id="33855" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33426" class="Function Operator">⇒</a> <a id="33857" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33838" class="Bound">Δ</a>
    <a id="33863" class="Comment">--------------------------------</a>
  <a id="33898" class="Symbol">→</a> <a id="33900" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21647" class="Function">exts</a> <a id="33905" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33840" class="Bound">σ</a> <a id="33907" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33426" class="Function Operator">⦂</a> <a id="33909" class="Symbol">(</a><a id="33910" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33836" class="Bound">Γ</a> <a id="33912" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">,</a> <a id="33914" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33842" class="Bound">B</a><a id="33915" class="Symbol">)</a> <a id="33917" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33426" class="Function Operator">⇒</a> <a id="33919" class="Symbol">(</a><a id="33920" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33838" class="Bound">Δ</a> <a id="33922" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">,</a> <a id="33924" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33842" class="Bound">B</a><a id="33925" class="Symbol">)</a>
<a id="33927" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33821" class="Function">exts-pres</a> <a id="33937" class="Symbol">{</a><a id="33938" class="Argument">σ</a> <a id="33940" class="Symbol">=</a> <a id="33942" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33942" class="Bound">σ</a><a id="33943" class="Symbol">}</a> <a id="33945" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33945" class="Bound">σ⦂</a> <a id="33948" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16746" class="InductiveConstructor">Z</a> <a id="33950" class="Symbol">=</a> <a id="33952" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18226" class="InductiveConstructor">⊢`</a> <a id="33955" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16746" class="InductiveConstructor">Z</a>
<a id="33957" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33821" class="Function">exts-pres</a> <a id="33967" class="Symbol">{</a><a id="33968" class="Argument">σ</a> <a id="33970" class="Symbol">=</a> <a id="33972" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33972" class="Bound">σ</a><a id="33973" class="Symbol">}</a> <a id="33975" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33975" class="Bound">σ⦂</a> <a id="33978" class="Symbol">(</a><a id="33979" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16806" class="InductiveConstructor">S</a> <a id="33981" class="Symbol">{</a><a id="33982" class="Argument">x</a> <a id="33984" class="Symbol">=</a> <a id="33986" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33986" class="Bound">x</a><a id="33987" class="Symbol">}</a> <a id="33989" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33989" class="Bound">∋x</a><a id="33991" class="Symbol">)</a> <a id="33993" class="Symbol">=</a> <a id="33995" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#32279" class="Function">rename-pres</a> <a id="34007" class="Symbol">{</a><a id="34008" class="Argument">ρ</a> <a id="34010" class="Symbol">=</a> <a id="34012" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a><a id="34015" class="Symbol">}</a> <a id="34017" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16806" class="InductiveConstructor">S</a> <a id="34019" class="Symbol">(</a><a id="34020" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33975" class="Bound">σ⦂</a> <a id="34023" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33989" class="Bound">∋x</a><a id="34025" class="Symbol">)</a>
</pre>{% endraw %}
Now we prove that both `subst` and `subst-vec` preserve types.  We use
the `exts-pres` lemma in each of the cases with a variable binding:
`⊢ƛ`, `⊢μ`, and `⊢case`.
{% raw %}<pre class="Agda"><a id="subst-vec-pres"></a><a id="34200" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34200" class="Function">subst-vec-pres</a> <a id="34215" class="Symbol">:</a> <a id="34217" class="Symbol">∀</a> <a id="34219" class="Symbol">{</a><a id="34220" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34220" class="Bound">Γ</a> <a id="34222" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34222" class="Bound">Δ</a> <a id="34224" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34224" class="Bound">σ</a><a id="34225" class="Symbol">}{</a><a id="34227" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34227" class="Bound">n</a><a id="34228" class="Symbol">}{</a><a id="34230" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34230" class="Bound">Ms</a> <a id="34233" class="Symbol">:</a> <a id="34235" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="34239" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="34244" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34227" class="Bound">n</a><a id="34245" class="Symbol">}{</a><a id="34247" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34247" class="Bound">A</a><a id="34248" class="Symbol">}</a>
  <a id="34252" class="Symbol">→</a> <a id="34254" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34224" class="Bound">σ</a> <a id="34256" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33426" class="Function Operator">⦂</a> <a id="34258" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34220" class="Bound">Γ</a> <a id="34260" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33426" class="Function Operator">⇒</a> <a id="34262" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34222" class="Bound">Δ</a>  <a id="34265" class="Symbol">→</a>  <a id="34268" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34220" class="Bound">Γ</a> <a id="34270" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⊢*</a> <a id="34273" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34230" class="Bound">Ms</a> <a id="34276" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⦂</a> <a id="34278" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34247" class="Bound">A</a>  <a id="34281" class="Symbol">→</a>  <a id="34284" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34222" class="Bound">Δ</a> <a id="34286" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⊢*</a> <a id="34289" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21855" class="Function">subst-vec</a> <a id="34299" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34224" class="Bound">σ</a> <a id="34301" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34230" class="Bound">Ms</a> <a id="34304" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⦂</a> <a id="34306" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34247" class="Bound">A</a>

<a id="subst-pres"></a><a id="34309" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="34320" class="Symbol">:</a> <a id="34322" class="Symbol">∀</a> <a id="34324" class="Symbol">{</a><a id="34325" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34325" class="Bound">Γ</a> <a id="34327" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34327" class="Bound">Δ</a> <a id="34329" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34329" class="Bound">σ</a> <a id="34331" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34331" class="Bound">N</a> <a id="34333" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34333" class="Bound">A</a><a id="34334" class="Symbol">}</a>
  <a id="34338" class="Symbol">→</a> <a id="34340" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34329" class="Bound">σ</a> <a id="34342" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33426" class="Function Operator">⦂</a> <a id="34344" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34325" class="Bound">Γ</a> <a id="34346" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33426" class="Function Operator">⇒</a> <a id="34348" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34327" class="Bound">Δ</a>
  <a id="34352" class="Symbol">→</a> <a id="34354" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34325" class="Bound">Γ</a> <a id="34356" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="34358" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34331" class="Bound">N</a> <a id="34360" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="34362" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34333" class="Bound">A</a>
    <a id="34368" class="Comment">-----------------</a>
  <a id="34388" class="Symbol">→</a> <a id="34390" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34327" class="Bound">Δ</a> <a id="34392" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="34394" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="34400" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34329" class="Bound">σ</a> <a id="34402" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34331" class="Bound">N</a> <a id="34404" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="34406" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34333" class="Bound">A</a>
<a id="34408" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="34419" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34419" class="Bound">σ⦂</a> <a id="34422" class="Symbol">(</a><a id="34423" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18226" class="InductiveConstructor">⊢`</a> <a id="34426" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34426" class="Bound">eq</a><a id="34428" class="Symbol">)</a>            <a id="34441" class="Symbol">=</a> <a id="34443" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34419" class="Bound">σ⦂</a> <a id="34446" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34426" class="Bound">eq</a>
<a id="34449" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="34460" class="Symbol">{</a><a id="34461" class="Argument">σ</a> <a id="34463" class="Symbol">=</a> <a id="34465" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34465" class="Bound">σ</a><a id="34466" class="Symbol">}</a> <a id="34468" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34468" class="Bound">σ⦂</a> <a id="34471" class="Symbol">(</a><a id="34472" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18296" class="InductiveConstructor">⊢ƛ</a> <a id="34475" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34475" class="Bound">⊢N</a><a id="34477" class="Symbol">)</a>    <a id="34482" class="Symbol">=</a> <a id="34484" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18296" class="InductiveConstructor">⊢ƛ</a> <a id="34487" class="Symbol">(</a><a id="34488" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a><a id="34498" class="Symbol">{</a><a id="34499" class="Argument">σ</a> <a id="34501" class="Symbol">=</a> <a id="34503" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21647" class="Function">exts</a> <a id="34508" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34465" class="Bound">σ</a><a id="34509" class="Symbol">}(</a><a id="34511" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33821" class="Function">exts-pres</a> <a id="34521" class="Symbol">{</a><a id="34522" class="Argument">σ</a> <a id="34524" class="Symbol">=</a> <a id="34526" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34465" class="Bound">σ</a><a id="34527" class="Symbol">}</a> <a id="34529" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34468" class="Bound">σ⦂</a><a id="34531" class="Symbol">)</a> <a id="34533" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34475" class="Bound">⊢N</a><a id="34535" class="Symbol">)</a> 
<a id="34538" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="34549" class="Symbol">{</a><a id="34550" class="Argument">σ</a> <a id="34552" class="Symbol">=</a> <a id="34554" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34554" class="Bound">σ</a><a id="34555" class="Symbol">}</a> <a id="34557" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34557" class="Bound">σ⦂</a> <a id="34560" class="Symbol">(</a><a id="34561" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18385" class="InductiveConstructor">⊢·</a> <a id="34564" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34564" class="Bound">⊢L</a> <a id="34567" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34567" class="Bound">⊢M</a><a id="34569" class="Symbol">)</a> <a id="34571" class="Symbol">=</a> <a id="34573" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18385" class="InductiveConstructor">⊢·</a> <a id="34576" class="Symbol">(</a><a id="34577" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a><a id="34587" class="Symbol">{</a><a id="34588" class="Argument">σ</a> <a id="34590" class="Symbol">=</a> <a id="34592" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34554" class="Bound">σ</a><a id="34593" class="Symbol">}</a> <a id="34595" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34557" class="Bound">σ⦂</a> <a id="34598" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34564" class="Bound">⊢L</a><a id="34600" class="Symbol">)</a> <a id="34602" class="Symbol">(</a><a id="34603" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a><a id="34613" class="Symbol">{</a><a id="34614" class="Argument">σ</a> <a id="34616" class="Symbol">=</a> <a id="34618" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34554" class="Bound">σ</a><a id="34619" class="Symbol">}</a> <a id="34621" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34557" class="Bound">σ⦂</a> <a id="34624" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34567" class="Bound">⊢M</a><a id="34626" class="Symbol">)</a> 
<a id="34629" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="34640" class="Symbol">{</a><a id="34641" class="Argument">σ</a> <a id="34643" class="Symbol">=</a> <a id="34645" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34645" class="Bound">σ</a><a id="34646" class="Symbol">}</a> <a id="34648" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34648" class="Bound">σ⦂</a> <a id="34651" class="Symbol">(</a><a id="34652" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18780" class="InductiveConstructor">⊢μ</a> <a id="34655" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34655" class="Bound">⊢M</a><a id="34657" class="Symbol">)</a>    <a id="34662" class="Symbol">=</a> <a id="34664" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18780" class="InductiveConstructor">⊢μ</a> <a id="34667" class="Symbol">(</a><a id="34668" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a><a id="34678" class="Symbol">{</a><a id="34679" class="Argument">σ</a> <a id="34681" class="Symbol">=</a> <a id="34683" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21647" class="Function">exts</a> <a id="34688" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34645" class="Bound">σ</a><a id="34689" class="Symbol">}</a> <a id="34691" class="Symbol">(</a><a id="34692" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33821" class="Function">exts-pres</a><a id="34701" class="Symbol">{</a><a id="34702" class="Argument">σ</a> <a id="34704" class="Symbol">=</a> <a id="34706" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34645" class="Bound">σ</a><a id="34707" class="Symbol">}</a> <a id="34709" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34648" class="Bound">σ⦂</a><a id="34711" class="Symbol">)</a> <a id="34713" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34655" class="Bound">⊢M</a><a id="34715" class="Symbol">)</a> 
<a id="34718" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="34729" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34729" class="Bound">σ⦂</a> <a id="34732" class="Symbol">(</a><a id="34733" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18856" class="InductiveConstructor">⊢rcd</a> <a id="34738" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34738" class="Bound">⊢Ms</a> <a id="34742" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34742" class="Bound">dls</a><a id="34745" class="Symbol">)</a> <a id="34747" class="Symbol">=</a> <a id="34749" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18856" class="InductiveConstructor">⊢rcd</a> <a id="34754" class="Symbol">(</a><a id="34755" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34200" class="Function">subst-vec-pres</a> <a id="34770" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34729" class="Bound">σ⦂</a> <a id="34773" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34738" class="Bound">⊢Ms</a> <a id="34777" class="Symbol">)</a> <a id="34779" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34742" class="Bound">dls</a>
<a id="34783" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="34794" class="Symbol">{</a><a id="34795" class="Argument">σ</a> <a id="34797" class="Symbol">=</a> <a id="34799" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34799" class="Bound">σ</a><a id="34800" class="Symbol">}</a> <a id="34802" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34802" class="Bound">σ⦂</a> <a id="34805" class="Symbol">(</a><a id="34806" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19013" class="InductiveConstructor">⊢#</a> <a id="34809" class="Symbol">{</a><a id="34810" class="Argument">d</a> <a id="34812" class="Symbol">=</a> <a id="34814" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34814" class="Bound">d</a><a id="34815" class="Symbol">}</a> <a id="34817" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34817" class="Bound">⊢M</a> <a id="34820" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34820" class="Bound">lif</a> <a id="34824" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34824" class="Bound">liA</a><a id="34827" class="Symbol">)</a> <a id="34829" class="Symbol">=</a>
    <a id="34835" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19013" class="InductiveConstructor">⊢#</a> <a id="34838" class="Symbol">{</a><a id="34839" class="Argument">d</a> <a id="34841" class="Symbol">=</a> <a id="34843" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34814" class="Bound">d</a><a id="34844" class="Symbol">}</a> <a id="34846" class="Symbol">(</a><a id="34847" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="34858" class="Symbol">{</a><a id="34859" class="Argument">σ</a> <a id="34861" class="Symbol">=</a> <a id="34863" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34799" class="Bound">σ</a><a id="34864" class="Symbol">}</a> <a id="34866" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34802" class="Bound">σ⦂</a> <a id="34869" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34817" class="Bound">⊢M</a><a id="34871" class="Symbol">)</a> <a id="34873" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34820" class="Bound">lif</a> <a id="34877" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34824" class="Bound">liA</a>
<a id="34881" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="34892" class="Symbol">{</a><a id="34893" class="Argument">σ</a> <a id="34895" class="Symbol">=</a> <a id="34897" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34897" class="Bound">σ</a><a id="34898" class="Symbol">}</a> <a id="34900" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34900" class="Bound">σ⦂</a> <a id="34903" class="Symbol">(</a><a id="34904" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="34908" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34908" class="Bound">⊢N</a> <a id="34911" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34911" class="Bound">lt</a><a id="34913" class="Symbol">)</a> <a id="34915" class="Symbol">=</a> <a id="34917" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="34921" class="Symbol">(</a><a id="34922" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="34933" class="Symbol">{</a><a id="34934" class="Argument">σ</a> <a id="34936" class="Symbol">=</a> <a id="34938" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34897" class="Bound">σ</a><a id="34939" class="Symbol">}</a> <a id="34941" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34900" class="Bound">σ⦂</a> <a id="34944" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34908" class="Bound">⊢N</a><a id="34946" class="Symbol">)</a> <a id="34948" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34911" class="Bound">lt</a>
<a id="34951" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="34962" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34962" class="Bound">σ⦂</a> <a id="34965" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18483" class="InductiveConstructor">⊢zero</a> <a id="34971" class="Symbol">=</a> <a id="34973" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18483" class="InductiveConstructor">⊢zero</a>
<a id="34979" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="34990" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34990" class="Bound">σ⦂</a> <a id="34993" class="Symbol">(</a><a id="34994" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18542" class="InductiveConstructor">⊢suc</a> <a id="34999" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34999" class="Bound">⊢M</a><a id="35001" class="Symbol">)</a> <a id="35003" class="Symbol">=</a> <a id="35005" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18542" class="InductiveConstructor">⊢suc</a> <a id="35010" class="Symbol">(</a><a id="35011" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="35022" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34990" class="Bound">σ⦂</a> <a id="35025" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34999" class="Bound">⊢M</a><a id="35027" class="Symbol">)</a>
<a id="35029" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="35040" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35040" class="Bound">σ⦂</a> <a id="35043" class="Symbol">(</a><a id="35044" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18621" class="InductiveConstructor">⊢case</a> <a id="35050" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35050" class="Bound">⊢L</a> <a id="35053" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35053" class="Bound">⊢M</a> <a id="35056" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35056" class="Bound">⊢N</a><a id="35058" class="Symbol">)</a> <a id="35060" class="Symbol">=</a>
    <a id="35066" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18621" class="InductiveConstructor">⊢case</a> <a id="35072" class="Symbol">(</a><a id="35073" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="35084" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35040" class="Bound">σ⦂</a> <a id="35087" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35050" class="Bound">⊢L</a><a id="35089" class="Symbol">)</a> <a id="35091" class="Symbol">(</a><a id="35092" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="35103" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35040" class="Bound">σ⦂</a> <a id="35106" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35053" class="Bound">⊢M</a><a id="35108" class="Symbol">)</a> <a id="35110" class="Symbol">(</a><a id="35111" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="35122" class="Symbol">(</a><a id="35123" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#33821" class="Function">exts-pres</a> <a id="35133" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35040" class="Bound">σ⦂</a><a id="35135" class="Symbol">)</a> <a id="35137" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35056" class="Bound">⊢N</a><a id="35139" class="Symbol">)</a>

<a id="35142" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34200" class="Function">subst-vec-pres</a> <a id="35157" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35157" class="Bound">σ⦂</a> <a id="35160" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19285" class="InductiveConstructor">⊢*-[]</a> <a id="35166" class="Symbol">=</a> <a id="35168" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19285" class="InductiveConstructor">⊢*-[]</a>
<a id="35174" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34200" class="Function">subst-vec-pres</a> <a id="35189" class="Symbol">{</a><a id="35190" class="Argument">σ</a> <a id="35192" class="Symbol">=</a> <a id="35194" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35194" class="Bound">σ</a><a id="35195" class="Symbol">}</a> <a id="35197" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35197" class="Bound">σ⦂</a> <a id="35200" class="Symbol">(</a><a id="35201" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19316" class="InductiveConstructor">⊢*-∷</a> <a id="35206" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35206" class="Bound">⊢M</a> <a id="35209" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35209" class="Bound">⊢Ms</a><a id="35212" class="Symbol">)</a> <a id="35214" class="Symbol">=</a>
    <a id="35220" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19316" class="InductiveConstructor">⊢*-∷</a> <a id="35225" class="Symbol">(</a><a id="35226" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="35237" class="Symbol">{</a><a id="35238" class="Argument">σ</a> <a id="35240" class="Symbol">=</a> <a id="35242" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35194" class="Bound">σ</a><a id="35243" class="Symbol">}</a> <a id="35245" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35197" class="Bound">σ⦂</a> <a id="35248" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35206" class="Bound">⊢M</a><a id="35250" class="Symbol">)</a> <a id="35252" class="Symbol">(</a><a id="35253" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34200" class="Function">subst-vec-pres</a> <a id="35268" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35197" class="Bound">σ⦂</a> <a id="35271" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35209" class="Bound">⊢Ms</a><a id="35274" class="Symbol">)</a>
</pre>{% endraw %}
The fact that single substitution preserves types is a corollary
of `subst-pres`.
{% raw %}<pre class="Agda"><a id="substitution"></a><a id="35367" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35367" class="Function">substitution</a> <a id="35380" class="Symbol">:</a> <a id="35382" class="Symbol">∀{</a><a id="35384" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35384" class="Bound">Γ</a> <a id="35386" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35386" class="Bound">A</a> <a id="35388" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35388" class="Bound">B</a> <a id="35390" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35390" class="Bound">M</a> <a id="35392" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35392" class="Bound">N</a><a id="35393" class="Symbol">}</a>
   <a id="35398" class="Symbol">→</a> <a id="35400" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35384" class="Bound">Γ</a> <a id="35402" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="35404" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35390" class="Bound">M</a> <a id="35406" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="35408" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35386" class="Bound">A</a>
   <a id="35413" class="Symbol">→</a> <a id="35415" class="Symbol">(</a><a id="35416" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35384" class="Bound">Γ</a> <a id="35418" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">,</a> <a id="35420" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35386" class="Bound">A</a><a id="35421" class="Symbol">)</a> <a id="35423" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="35425" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35392" class="Bound">N</a> <a id="35427" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="35429" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35388" class="Bound">B</a>
     <a id="35436" class="Comment">---------------</a>
   <a id="35455" class="Symbol">→</a> <a id="35457" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35384" class="Bound">Γ</a> <a id="35459" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="35461" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35392" class="Bound">N</a> <a id="35463" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22656" class="Function Operator">[</a> <a id="35465" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35390" class="Bound">M</a> <a id="35467" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22656" class="Function Operator">]</a> <a id="35469" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="35471" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35388" class="Bound">B</a>
<a id="35473" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35367" class="Function">substitution</a> <a id="35486" class="Symbol">{</a><a id="35487" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35487" class="Bound">Γ</a><a id="35488" class="Symbol">}{</a><a id="35490" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35490" class="Bound">A</a><a id="35491" class="Symbol">}{</a><a id="35493" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35493" class="Bound">B</a><a id="35494" class="Symbol">}{</a><a id="35496" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35496" class="Bound">M</a><a id="35497" class="Symbol">}{</a><a id="35499" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35499" class="Bound">N</a><a id="35500" class="Symbol">}</a> <a id="35502" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35502" class="Bound">⊢M</a> <a id="35505" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35505" class="Bound">⊢N</a> <a id="35508" class="Symbol">=</a> <a id="35510" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#34309" class="Function">subst-pres</a> <a id="35521" class="Symbol">{</a><a id="35522" class="Argument">σ</a> <a id="35524" class="Symbol">=</a> <a id="35526" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22571" class="Function">subst-zero</a> <a id="35537" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35496" class="Bound">M</a><a id="35538" class="Symbol">}</a> <a id="35540" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35559" class="Function">G</a> <a id="35542" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35505" class="Bound">⊢N</a>
    <a id="35549" class="Keyword">where</a>
    <a id="35559" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35559" class="Function">G</a> <a id="35561" class="Symbol">:</a> <a id="35563" class="Symbol">∀</a> <a id="35565" class="Symbol">{</a><a id="35566" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35566" class="Bound">C</a> <a id="35568" class="Symbol">:</a> <a id="35570" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a><a id="35574" class="Symbol">}</a> <a id="35576" class="Symbol">{</a><a id="35577" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35577" class="Bound">x</a> <a id="35579" class="Symbol">:</a> <a id="35581" href="Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="35582" class="Symbol">}</a>
      <a id="35590" class="Symbol">→</a> <a id="35592" class="Symbol">(</a><a id="35593" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35487" class="Bound">Γ</a> <a id="35595" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16526" class="InductiveConstructor Operator">,</a> <a id="35597" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35490" class="Bound">A</a><a id="35598" class="Symbol">)</a> <a id="35600" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">∋</a> <a id="35602" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35577" class="Bound">x</a> <a id="35604" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16704" class="Datatype Operator">⦂</a> <a id="35606" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35566" class="Bound">C</a> <a id="35608" class="Symbol">→</a> <a id="35610" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35487" class="Bound">Γ</a> <a id="35612" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="35614" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#21913" class="Function">subst</a> <a id="35620" class="Symbol">(</a><a id="35621" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#22571" class="Function">subst-zero</a> <a id="35632" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35496" class="Bound">M</a><a id="35633" class="Symbol">)</a> <a id="35635" class="Symbol">(</a><a id="35636" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17464" class="InductiveConstructor Operator">`</a> <a id="35638" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35577" class="Bound">x</a><a id="35639" class="Symbol">)</a> <a id="35641" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="35643" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35566" class="Bound">C</a>
    <a id="35649" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35559" class="Function">G</a> <a id="35651" class="Symbol">{</a><a id="35652" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35652" class="Bound">C</a><a id="35653" class="Symbol">}</a> <a id="35655" class="Symbol">{</a><a id="35656" href="Agda.Builtin.Nat.html#183" class="InductiveConstructor">zero</a><a id="35660" class="Symbol">}</a> <a id="35662" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16746" class="InductiveConstructor">Z</a> <a id="35664" class="Symbol">=</a> <a id="35666" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35502" class="Bound">⊢M</a>
    <a id="35673" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35559" class="Function">G</a> <a id="35675" class="Symbol">{</a><a id="35676" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35676" class="Bound">C</a><a id="35677" class="Symbol">}</a> <a id="35679" class="Symbol">{</a><a id="35680" href="Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="35684" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35684" class="Bound">x</a><a id="35685" class="Symbol">}</a> <a id="35687" class="Symbol">(</a><a id="35688" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16806" class="InductiveConstructor">S</a> <a id="35690" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35690" class="Bound">∋x</a><a id="35692" class="Symbol">)</a> <a id="35694" class="Symbol">=</a> <a id="35696" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18226" class="InductiveConstructor">⊢`</a> <a id="35699" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35690" class="Bound">∋x</a>
</pre>{% endraw %}
We require just one last lemma before we get to the proof of preservation.
The following lemma establishes that field access preserves types.
{% raw %}<pre class="Agda"><a id="field-pres"></a><a id="35853" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35853" class="Function">field-pres</a> <a id="35864" class="Symbol">:</a> <a id="35866" class="Symbol">∀{</a><a id="35868" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35868" class="Bound">n</a><a id="35869" class="Symbol">}{</a><a id="35871" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35871" class="Bound">As</a> <a id="35874" class="Symbol">:</a> <a id="35876" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="35880" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#8373" class="Datatype">Type</a> <a id="35885" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35868" class="Bound">n</a><a id="35886" class="Symbol">}{</a><a id="35888" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35888" class="Bound">A</a><a id="35889" class="Symbol">}{</a><a id="35891" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35891" class="Bound">Ms</a> <a id="35894" class="Symbol">:</a> <a id="35896" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#935" class="Datatype">Vec</a> <a id="35900" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#17445" class="Datatype">Term</a> <a id="35905" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35868" class="Bound">n</a><a id="35906" class="Symbol">}{</a><a id="35908" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35908" class="Bound">i</a> <a id="35910" class="Symbol">:</a> <a id="35912" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1000" class="Datatype">Fin</a> <a id="35916" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35868" class="Bound">n</a><a id="35917" class="Symbol">}</a>
         <a id="35928" class="Symbol">→</a> <a id="35930" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16510" class="InductiveConstructor">∅</a> <a id="35932" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⊢*</a> <a id="35935" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35891" class="Bound">Ms</a> <a id="35938" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18117" class="Datatype Operator">⦂</a> <a id="35940" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35871" class="Bound">As</a>
         <a id="35952" class="Symbol">→</a> <a id="35954" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="35961" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35871" class="Bound">As</a> <a id="35964" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35908" class="Bound">i</a> <a id="35966" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="35968" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35888" class="Bound">A</a>
         <a id="35979" class="Symbol">→</a> <a id="35981" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16510" class="InductiveConstructor">∅</a> <a id="35983" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="35985" href="https://agda.github.io/agda-stdlib/v1.1/Data.Vec.Base.html#1491" class="Function">lookup</a> <a id="35992" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35891" class="Bound">Ms</a> <a id="35995" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35908" class="Bound">i</a> <a id="35997" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="35999" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35888" class="Bound">A</a>
<a id="36001" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35853" class="Function">field-pres</a> <a id="36012" class="Symbol">{</a><a id="36013" class="Argument">i</a> <a id="36015" class="Symbol">=</a> <a id="36017" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1022" class="InductiveConstructor">zero</a><a id="36021" class="Symbol">}</a> <a id="36023" class="Symbol">(</a><a id="36024" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19316" class="InductiveConstructor">⊢*-∷</a> <a id="36029" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36029" class="Bound">⊢M</a> <a id="36032" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36032" class="Bound">⊢Ms</a><a id="36035" class="Symbol">)</a> <a id="36037" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="36042" class="Symbol">=</a> <a id="36044" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36029" class="Bound">⊢M</a>
<a id="36047" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35853" class="Function">field-pres</a> <a id="36058" class="Symbol">{</a><a id="36059" class="Argument">i</a> <a id="36061" class="Symbol">=</a> <a id="36063" href="https://agda.github.io/agda-stdlib/v1.1/Data.Fin.Base.html#1053" class="InductiveConstructor">suc</a> <a id="36067" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36067" class="Bound">i</a><a id="36068" class="Symbol">}</a> <a id="36070" class="Symbol">(</a><a id="36071" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19316" class="InductiveConstructor">⊢*-∷</a> <a id="36076" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36076" class="Bound">⊢M</a> <a id="36079" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36079" class="Bound">⊢Ms</a><a id="36082" class="Symbol">)</a> <a id="36084" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36084" class="Bound">As[i]=A</a> <a id="36092" class="Symbol">=</a> <a id="36094" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35853" class="Function">field-pres</a> <a id="36105" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36079" class="Bound">⊢Ms</a> <a id="36109" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36084" class="Bound">As[i]=A</a>
</pre>{% endraw %}The proof is by induction on the typing derivation.

* Case `⊢-*-[]`: This case yields a contradiction because `Fin 0` is uninhabitable.

* Case `⊢-*-∷`: So we have `∅ ⊢ M ⦂ B` and `∅ ⊢* Ms ⦂ As`. We proceed by cases on `i`.

    * If it is `0`, then lookup yields term `M` and `A ≡ B`, so we conclude that `∅ ⊢ M ⦂ A`.
    
    * If it is `suc i`, then we conclude by the induction hypothesis.


We conclude this chapter with the proof of preservation. We discuss
the cases particular to records and subtyping in the paragraph
following the Agda proof.
{% raw %}<pre class="Agda"><a id="preserve"></a><a id="36679" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="36688" class="Symbol">:</a> <a id="36690" class="Symbol">∀</a> <a id="36692" class="Symbol">{</a><a id="36693" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36693" class="Bound">M</a> <a id="36695" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36695" class="Bound">N</a> <a id="36697" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36697" class="Bound">A</a><a id="36698" class="Symbol">}</a>
  <a id="36702" class="Symbol">→</a> <a id="36704" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16510" class="InductiveConstructor">∅</a> <a id="36706" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="36708" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36693" class="Bound">M</a> <a id="36710" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="36712" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36697" class="Bound">A</a>
  <a id="36716" class="Symbol">→</a> <a id="36718" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36693" class="Bound">M</a> <a id="36720" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23509" class="Datatype Operator">—→</a> <a id="36723" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36695" class="Bound">N</a>
    <a id="36729" class="Comment">----------</a>
  <a id="36742" class="Symbol">→</a> <a id="36744" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#16510" class="InductiveConstructor">∅</a> <a id="36746" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⊢</a> <a id="36748" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36695" class="Bound">N</a> <a id="36750" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18181" class="Datatype Operator">⦂</a> <a id="36752" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36697" class="Bound">A</a>
<a id="36754" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="36763" class="Symbol">(</a><a id="36764" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18226" class="InductiveConstructor">⊢`</a> <a id="36767" class="Symbol">())</a>
<a id="36771" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="36780" class="Symbol">(</a><a id="36781" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18296" class="InductiveConstructor">⊢ƛ</a> <a id="36784" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36784" class="Bound">⊢N</a><a id="36786" class="Symbol">)</a>                 <a id="36804" class="Symbol">()</a>
<a id="36807" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="36816" class="Symbol">(</a><a id="36817" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18385" class="InductiveConstructor">⊢·</a> <a id="36820" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36820" class="Bound">⊢L</a> <a id="36823" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36823" class="Bound">⊢M</a><a id="36825" class="Symbol">)</a>              <a id="36840" class="Symbol">(</a><a id="36841" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23543" class="InductiveConstructor">ξ-·₁</a> <a id="36846" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36846" class="Bound">L—→L′</a><a id="36851" class="Symbol">)</a>     <a id="36857" class="Symbol">=</a>  <a id="36860" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18385" class="InductiveConstructor">⊢·</a> <a id="36863" class="Symbol">(</a><a id="36864" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="36873" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36820" class="Bound">⊢L</a> <a id="36876" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36846" class="Bound">L—→L′</a><a id="36881" class="Symbol">)</a> <a id="36883" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36823" class="Bound">⊢M</a>
<a id="36886" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="36895" class="Symbol">(</a><a id="36896" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18385" class="InductiveConstructor">⊢·</a> <a id="36899" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36899" class="Bound">⊢L</a> <a id="36902" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36902" class="Bound">⊢M</a><a id="36904" class="Symbol">)</a>              <a id="36919" class="Symbol">(</a><a id="36920" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23629" class="InductiveConstructor">ξ-·₂</a> <a id="36925" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36925" class="Bound">VL</a> <a id="36928" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36928" class="Bound">M—→M′</a><a id="36933" class="Symbol">)</a>  <a id="36936" class="Symbol">=</a>  <a id="36939" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18385" class="InductiveConstructor">⊢·</a> <a id="36942" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36899" class="Bound">⊢L</a> <a id="36945" class="Symbol">(</a><a id="36946" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="36955" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36902" class="Bound">⊢M</a> <a id="36958" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36928" class="Bound">M—→M′</a><a id="36963" class="Symbol">)</a>
<a id="36965" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="36974" class="Symbol">(</a><a id="36975" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18385" class="InductiveConstructor">⊢·</a> <a id="36978" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36978" class="Bound">⊢L</a> <a id="36981" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36981" class="Bound">⊢M</a><a id="36983" class="Symbol">)</a>              <a id="36998" class="Symbol">(</a><a id="36999" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23730" class="InductiveConstructor">β-ƛ</a> <a id="37003" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37003" class="Bound">VL</a><a id="37005" class="Symbol">)</a>
    <a id="37011" class="Keyword">with</a> <a id="37016" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="37026" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36978" class="Bound">⊢L</a> <a id="37029" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23074" class="InductiveConstructor">V-ƛ</a>
<a id="37033" class="Symbol">...</a> <a id="37037" class="Symbol">|</a> <a id="37039" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25327" class="InductiveConstructor">C-ƛ</a> <a id="37043" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37043" class="Bound">⊢N</a> <a id="37046" class="Symbol">(</a><a id="37047" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9276" class="InductiveConstructor">&lt;:-fun</a> <a id="37054" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37054" class="Bound">CA</a> <a id="37057" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37057" class="Bound">BC</a><a id="37059" class="Symbol">)</a>                       <a id="37083" class="Symbol">=</a>  <a id="37086" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="37090" class="Symbol">(</a><a id="37091" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35367" class="Function">substitution</a> <a id="37104" class="Symbol">(</a><a id="37105" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="37109" class="Bound">⊢M</a> <a id="37112" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37054" class="Bound">CA</a><a id="37114" class="Symbol">)</a> <a id="37116" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37043" class="Bound">⊢N</a><a id="37118" class="Symbol">)</a> <a id="37120" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37057" class="Bound">BC</a>
<a id="37123" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="37132" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18483" class="InductiveConstructor">⊢zero</a>                   <a id="37156" class="Symbol">()</a>
<a id="37159" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="37168" class="Symbol">(</a><a id="37169" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18542" class="InductiveConstructor">⊢suc</a> <a id="37174" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37174" class="Bound">⊢M</a><a id="37176" class="Symbol">)</a>               <a id="37192" class="Symbol">(</a><a id="37193" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23822" class="InductiveConstructor">ξ-suc</a> <a id="37199" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37199" class="Bound">M—→M′</a><a id="37204" class="Symbol">)</a>    <a id="37209" class="Symbol">=</a>  <a id="37212" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18542" class="InductiveConstructor">⊢suc</a> <a id="37217" class="Symbol">(</a><a id="37218" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="37227" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37174" class="Bound">⊢M</a> <a id="37230" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37199" class="Bound">M—→M′</a><a id="37235" class="Symbol">)</a>
<a id="37237" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="37246" class="Symbol">(</a><a id="37247" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18621" class="InductiveConstructor">⊢case</a> <a id="37253" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37253" class="Bound">⊢L</a> <a id="37256" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37256" class="Bound">⊢M</a> <a id="37259" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37259" class="Bound">⊢N</a><a id="37261" class="Symbol">)</a>        <a id="37270" class="Symbol">(</a><a id="37271" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23911" class="InductiveConstructor">ξ-case</a> <a id="37278" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37278" class="Bound">L—→L′</a><a id="37283" class="Symbol">)</a>   <a id="37287" class="Symbol">=</a>  <a id="37290" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18621" class="InductiveConstructor">⊢case</a> <a id="37296" class="Symbol">(</a><a id="37297" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="37306" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37253" class="Bound">⊢L</a> <a id="37309" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37278" class="Bound">L—→L′</a><a id="37314" class="Symbol">)</a> <a id="37316" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37256" class="Bound">⊢M</a> <a id="37319" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37259" class="Bound">⊢N</a>
<a id="37322" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="37331" class="Symbol">(</a><a id="37332" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18621" class="InductiveConstructor">⊢case</a> <a id="37338" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37338" class="Bound">⊢L</a> <a id="37341" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37341" class="Bound">⊢M</a> <a id="37344" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37344" class="Bound">⊢N</a><a id="37346" class="Symbol">)</a>        <a id="37355" class="Symbol">(</a><a id="37356" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24081" class="InductiveConstructor">β-zero</a><a id="37362" class="Symbol">)</a>         <a id="37372" class="Symbol">=</a>  <a id="37375" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37341" class="Bound">⊢M</a>
<a id="37378" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="37387" class="Symbol">(</a><a id="37388" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18621" class="InductiveConstructor">⊢case</a> <a id="37394" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37394" class="Bound">⊢L</a> <a id="37397" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37397" class="Bound">⊢M</a> <a id="37400" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37400" class="Bound">⊢N</a><a id="37402" class="Symbol">)</a>        <a id="37411" class="Symbol">(</a><a id="37412" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24191" class="InductiveConstructor">β-suc</a> <a id="37418" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37418" class="Bound">VV</a><a id="37420" class="Symbol">)</a>
    <a id="37426" class="Keyword">with</a> <a id="37431" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="37441" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37394" class="Bound">⊢L</a> <a id="37444" class="Symbol">(</a><a id="37445" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23177" class="InductiveConstructor">V-suc</a> <a id="37451" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37418" class="Bound">VV</a><a id="37453" class="Symbol">)</a>
<a id="37455" class="Symbol">...</a> <a id="37459" class="Symbol">|</a> <a id="37461" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25522" class="InductiveConstructor">C-suc</a> <a id="37467" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37467" class="Bound">CV</a>                                    <a id="37505" class="Symbol">=</a>  <a id="37508" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35367" class="Function">substitution</a> <a id="37521" class="Symbol">(</a><a id="37522" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#27902" class="Function">typed</a> <a id="37528" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37467" class="Bound">CV</a><a id="37530" class="Symbol">)</a> <a id="37532" class="Bound">⊢N</a>
<a id="37535" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="37544" class="Symbol">(</a><a id="37545" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18780" class="InductiveConstructor">⊢μ</a> <a id="37548" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37548" class="Bound">⊢M</a><a id="37550" class="Symbol">)</a>                 <a id="37568" class="Symbol">(</a><a id="37569" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24333" class="InductiveConstructor">β-μ</a><a id="37572" class="Symbol">)</a>            <a id="37585" class="Symbol">=</a>  <a id="37588" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35367" class="Function">substitution</a> <a id="37601" class="Symbol">(</a><a id="37602" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#18780" class="InductiveConstructor">⊢μ</a> <a id="37605" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37548" class="Bound">⊢M</a><a id="37607" class="Symbol">)</a> <a id="37609" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37548" class="Bound">⊢M</a>
<a id="37612" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="37621" class="Symbol">(</a><a id="37622" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19013" class="InductiveConstructor">⊢#</a> <a id="37625" class="Symbol">{</a><a id="37626" class="Argument">d</a> <a id="37628" class="Symbol">=</a> <a id="37630" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37630" class="Bound">d</a><a id="37631" class="Symbol">}</a> <a id="37633" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37633" class="Bound">⊢M</a> <a id="37636" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37636" class="Bound">lsi</a> <a id="37640" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37640" class="Bound">Asi</a><a id="37643" class="Symbol">)</a> <a id="37645" class="Symbol">(</a><a id="37646" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24401" class="InductiveConstructor">ξ-#</a> <a id="37650" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37650" class="Bound">M—→M′</a><a id="37655" class="Symbol">)</a>      <a id="37662" class="Symbol">=</a>  <a id="37665" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19013" class="InductiveConstructor">⊢#</a> <a id="37668" class="Symbol">{</a><a id="37669" class="Argument">d</a> <a id="37671" class="Symbol">=</a> <a id="37673" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37630" class="Bound">d</a><a id="37674" class="Symbol">}</a> <a id="37676" class="Symbol">(</a><a id="37677" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="37686" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37633" class="Bound">⊢M</a> <a id="37689" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37650" class="Bound">M—→M′</a><a id="37694" class="Symbol">)</a> <a id="37696" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37636" class="Bound">lsi</a> <a id="37700" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37640" class="Bound">Asi</a>
<a id="37704" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="37713" class="Symbol">(</a><a id="37714" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19013" class="InductiveConstructor">⊢#</a> <a id="37717" class="Symbol">{</a><a id="37718" class="Argument">ls</a> <a id="37721" class="Symbol">=</a> <a id="37723" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37723" class="Bound">ls</a><a id="37725" class="Symbol">}{</a><a id="37727" class="Argument">i</a> <a id="37729" class="Symbol">=</a> <a id="37731" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37731" class="Bound">i</a><a id="37732" class="Symbol">}</a> <a id="37734" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37734" class="Bound">⊢M</a> <a id="37737" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="37742" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="37746" class="Symbol">)</a> <a id="37748" class="Symbol">(</a><a id="37749" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#24465" class="InductiveConstructor">β-#</a> <a id="37753" class="Symbol">{</a><a id="37754" class="Argument">ls</a> <a id="37757" class="Symbol">=</a> <a id="37759" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37759" class="Bound">ks</a><a id="37761" class="Symbol">}{</a><a id="37763" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37763" class="Bound">Ms</a><a id="37765" class="Symbol">}{</a><a id="37767" class="Argument">j</a> <a id="37769" class="Symbol">=</a> <a id="37771" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37771" class="Bound">j</a><a id="37772" class="Symbol">}</a> <a id="37774" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37774" class="Bound">ks[j]=l</a><a id="37781" class="Symbol">)</a>
    <a id="37787" class="Keyword">with</a> <a id="37792" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25874" class="Function">canonical</a> <a id="37802" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37734" class="Bound">⊢M</a> <a id="37805" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#23250" class="InductiveConstructor">V-rcd</a>
<a id="37811" class="Symbol">...</a> <a id="37815" class="Symbol">|</a> <a id="37817" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#25618" class="InductiveConstructor">C-rcd</a> <a id="37823" class="Symbol">{</a><a id="37824" class="Argument">As</a> <a id="37827" class="Symbol">=</a> <a id="37829" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37829" class="Bound">Bs</a><a id="37831" class="Symbol">}</a> <a id="37833" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37833" class="Bound">⊢Ms</a> <a id="37837" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37837" class="Bound">dks</a> <a id="37841" class="Symbol">(</a><a id="37842" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#9373" class="InductiveConstructor">&lt;:-rcd</a> <a id="37849" class="Symbol">{</a><a id="37850" class="Argument">ks</a> <a id="37853" class="Symbol">=</a> <a id="37855" class="Bound">ks</a><a id="37857" class="Symbol">}</a> <a id="37859" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37859" class="Bound">ls⊆ks</a> <a id="37865" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37865" class="Bound">Bs&lt;:As</a><a id="37871" class="Symbol">)</a>
    <a id="37877" class="Keyword">with</a> <a id="37882" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#7959" class="Function">lookup-⊆</a> <a id="37891" class="Symbol">{</a><a id="37892" class="Argument">i</a> <a id="37894" class="Symbol">=</a> <a id="37896" class="Bound">i</a><a id="37897" class="Symbol">}</a> <a id="37899" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37859" class="Bound">ls⊆ks</a>
<a id="37905" class="Symbol">...</a> <a id="37909" class="Symbol">|</a> <a id="37911" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="37913" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37913" class="Bound">k</a> <a id="37915" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="37917" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37917" class="Bound">ls[i]=ks[k]</a> <a id="37929" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="37935" class="Keyword">with</a> <a id="37940" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#35853" class="Function">field-pres</a> <a id="37951" class="Symbol">{</a><a id="37952" class="Argument">i</a> <a id="37954" class="Symbol">=</a> <a id="37956" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37913" class="Bound">k</a><a id="37957" class="Symbol">}</a> <a id="37959" class="Bound">⊢Ms</a> <a id="37963" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="37968" class="Symbol">...</a> <a id="37972" class="Symbol">|</a> <a id="37974" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37974" class="Bound">⊢Ms[k]⦂Bs[k]</a>
    <a id="37991" class="Keyword">rewrite</a> <a id="37999" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#5526" class="Function">distinct-lookup-inj</a> <a id="38019" class="Bound">dks</a> <a id="38023" class="Symbol">(</a><a id="38024" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#984" class="Function">trans</a> <a id="38030" class="Bound">ks[j]=l</a> <a id="38038" class="Bound">ls[i]=ks[k]</a><a id="38049" class="Symbol">)</a> <a id="38051" class="Symbol">=</a>
    <a id="38057" class="Keyword">let</a> <a id="38061" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#38061" class="Bound">Ms[k]⦂As[i]</a> <a id="38073" class="Symbol">=</a> <a id="38075" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="38079" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#37974" class="Bound">⊢Ms[k]⦂Bs[k]</a> <a id="38092" class="Symbol">(</a><a id="38093" class="Bound">Bs&lt;:As</a> <a id="38100" class="Symbol">(</a><a id="38101" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="38105" class="Bound">ls[i]=ks[k]</a><a id="38116" class="Symbol">))</a> <a id="38119" class="Keyword">in</a>
    <a id="38126" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#38061" class="Bound">Ms[k]⦂As[i]</a>
<a id="38138" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="38147" class="Symbol">(</a><a id="38148" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="38152" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#38152" class="Bound">⊢M</a> <a id="38155" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#38155" class="Bound">B&lt;:A</a><a id="38159" class="Symbol">)</a> <a id="38161" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#38161" class="Bound">M—→N</a>                       <a id="38188" class="Symbol">=</a>  <a id="38191" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#19177" class="InductiveConstructor">⊢&lt;:</a> <a id="38195" class="Symbol">(</a><a id="38196" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#36679" class="Function">preserve</a> <a id="38205" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#38152" class="Bound">⊢M</a> <a id="38208" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#38161" class="Bound">M—→N</a><a id="38212" class="Symbol">)</a> <a id="38214" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/part2/Subtyping.md %}{% raw %}#38155" class="Bound">B&lt;:A</a>
</pre>{% endraw %}Recall that the proof is by induction on the derivation of `∅ ⊢ M ⦂ A`
with cases on `M —→ N`.

* Case `⊢#` and `ξ-#`: So `∅ ⊢ M ⦂ ｛ ls ⦂ As ｝`, `lookup ls i ≡ l`, `lookup As i ≡ A`,
  and `M —→ M′`. We apply the induction hypothesis to obtain `∅ ⊢ M′ ⦂ ｛ ls ⦂ As ｝`
  and then conclude by rule `⊢#`.
  
* Case `⊢#` and `β-#`. We have `∅ ⊢ ｛ ks := Ms ｝ ⦂ ｛ ls ⦂ As ｝`, `lookup ls i ≡ l`,
  `lookup As i ≡ A`, `lookup ks j ≡ l`, and `｛ ks := Ms ｝ # l —→ lookup Ms j`.
  By the canonical forms lemma, we have `∅ ⊢* Ms ⦂ Bs`, `ls ⊆ ks` and `ks ⦂ Bs <: ls ⦂ As`.
  By lemma `lookup-⊆` we have `lookup ls i ≡ lookup ks k` for some `k`.
  Also, we have `∅ ⊢ lookup Ms k ⦂ lookup Bs k` by lemma `field-pres`.
  Then because `ks ⦂ Bs <: ls ⦂ As` and `lookup ks k ≡ lookup ls i`, we have
  `lookup Bs k <: lookup As i`. So by rule `⊢<:` we have
  `∅ ⊢ lookup Ms k ⦂ lookup As i`.
  Finally, because `lookup` is injective and `lookup ks j ≡ lookup ks k`,
  we have `j ≡ k` and conclude that `∅ ⊢ lookup Ms j ⦂ lookup As i`.

* Case `⊢<:`. We have `∅ ⊢ M ⦂ B`, `B <: A`, and `M —→ N`. We apply the induction hypothesis
  to obtain `∅ ⊢ N ⦂ B` and then subsumption to conclude that `∅ ⊢ N ⦂ A`.


#### Exercise `intrinsic-records` (stretch)

Formulate the language of this chapter, STLC with records, using
intrinsically typed terms. This requires taking an algorithmic approach
to the type system, which means that there is no subsumption rule and
instead subtyping is used in the elimination rules. For example,
the rule for function application would be:

    _·_ : ∀ {Γ A B C}
      → Γ ⊢ A ⇒ B
      → Γ ⊢ C
      → C <: A
        -------
      → Γ ⊢ B

#### Exercise `type-check-records` (practice)

Write a recursive function whose input is a `Term` and whose output
is a typing derivation for that term, if one exists.

    type-check : (M : Term) → (Γ : Context) → Maybe (Σ[ A ∈ Type ] Γ ⊢ M ⦂ A)

#### Exercise `variants` (recommended)

Add variants to the language of this chapter and update the proofs of
progress and preservation. The variant type is a generalization of a
sum type, similar to the way the record type is a generalization of
product. The following summarizes the treatment of variants in the
book Types and Programming Languages. A variant type is traditionally
written:

    〈l₁:A₁, ..., lᵤ:Aᵤ〉

The term for introducing a variant is

    〈l=t〉

and the term for eliminating a variant is

    case L of 〈l₁=x₁〉 ⇒ M₁ | ... | 〈lᵤ=xᵤ〉 ⇒ Mᵤ

The typing rules for these terms are

    (T-Variant)
    Γ ⊢ Mⱼ : Aⱼ
    ---------------------------------
    Γ ⊢ 〈lⱼ=Mⱼ〉 : 〈l₁=A₁, ... , lᵤ=Aᵤ〉


    (T-Case)
    Γ ⊢ L : 〈l₁=A₁, ... , lᵤ=Aᵤ〉
    ∀ i ∈ 1..u,   Γ,xᵢ:Aᵢ ⊢ Mᵢ : B
    ---------------------------------------------------
    Γ ⊢ case L of 〈l₁=x₁〉 ⇒ M₁ | ... | 〈lᵤ=xᵤ〉 ⇒ Mᵤ  : B

The non-algorithmic subtyping rules for variants are

    (S-VariantWidth)
    ------------------------------------------------------------
    〈l₁=A₁, ..., lᵤ=Aᵤ〉   <:   〈l₁=A₁, ..., lᵤ=Aᵤ, ..., lᵤ₊ₓ=Aᵤ₊ₓ〉

    (S-VariantDepth)
    ∀ i ∈ 1..u,    Aᵢ <: Bᵢ
    ---------------------------------------------
    〈l₁=A₁, ..., lᵤ=Aᵤ〉   <:   〈l₁=B₁, ..., lᵤ=Bᵤ〉

    (S-VariantPerm)
    ∀i∈1..u, ∃j∈1..u, kⱼ = lᵢ and Aⱼ = Bᵢ
    ----------------------------------------------
    〈k₁=A₁, ..., kᵤ=Aᵤ〉   <:   〈l₁=B₁, ..., lᵤ=Bᵤ〉
    
Come up with an algorithmic subtyping rule for variant types.

#### Exercise `<:-alternative` (stretch)

Revise this formalization of records with subtyping (including proofs
of progress and preservation) to use the non-algorithmic subtyping
rules for Chapter 15 of Types and Programming Languages, which we list here:

    (S-RcdWidth)
    --------------------------------------------------------------
    { l₁:A₁, ..., lᵤ:Aᵤ, ..., lᵤ₊ₓ:Aᵤ₊ₓ } <: { l₁:A₁, ..., lᵤ:Aᵤ }

    (S-RcdDepth)
        ∀i∈1..u, Aᵢ <: Bᵢ
    ----------------------------------------------
    { l₁:A₁, ..., lᵤ:Aᵤ } <: { l₁:B₁, ..., lᵤ:Bᵤ }

    (S-RcdPerm)
    ∀i∈1..u, ∃j∈1..u, kⱼ = lᵢ and Aⱼ = Bᵢ
    ----------------------------------------------
    { k₁:A₁, ..., kᵤ:Aᵤ } <: { l₁:B₁, ..., lᵤ:Bᵤ }

You will most likely need to prove inversion lemmas for the subtype relation
of the form:

    If S <: T₁ ⇒ T₂, then S ≡ S₁ ⇒ S₂, T₁ <: S₁, and S₂ <: T₂, for some S₁, S₂.

    If S <: { lᵢ : Tᵢ | i ∈ 1..n }, then S ≡ { kⱼ : Sⱼ | j ∈ 1..m }
    and { lᵢ | i ∈ 1..n } ⊆ { kⱼ | j ∈ 1..m }
    and Sⱼ <: Tᵢ for every i and j such that lᵢ = kⱼ. 

## References

* John C. Reynolds. Using Category Theory to Design Implicit
  Conversions and Generic Operators.
  In Semantics-Directed Compiler Generation, 1980.
  LNCS Volume 94.

* Luca Cardelli. A semantics of multiple inheritance.  In Semantics of
  Data Types, 1984. Springer.

* Barbara H. Liskov and Jeannette M. Wing.  A Behavioral Notion of
  Subtyping. In ACM Trans. Program. Lang. Syst.  Volume 16, 1994.
  
* Types and Programming Languages. Benjamin C. Pierce. The MIT Press. 2002.

